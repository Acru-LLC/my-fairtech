{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\chat\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\chat\\Index.vue","mtime":1667352074413},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667355379758},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6XFxBQ1JVIFBST0pFQ1RcXEZhaXIgVGVjaFxcYWNydS1mcm9udGVuZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFZ1ZUVhc3lMaWdodGJveCBmcm9tICJ2dWUtZWFzeS1saWdodGJveCI7CmltcG9ydCBMYXlvdXQgZnJvbSAiQC9yb3V0ZXIvbGF5b3V0cy9tYWluIjsKaW1wb3J0IGFwcENvbmZpZyBmcm9tICJAL2FwcC5jb25maWciOyAvLyBpbXBvcnQgUGFnZUhlYWRlciBmcm9tICJAL2NvbXBvbmVudHMvcGFnZS1oZWFkZXIiOwoKaW1wb3J0IHsgbWFwQWN0aW9ucywgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IG1lc3NlbmdlclNlcnZpY2UgZnJvbSAiQC9zaGFyZWQvc2VydmljZXMvbWVzc2VuZ2VyU2VydmljZSI7CmltcG9ydCB7IFRva2VuU2VydmljZSB9IGZyb20gIkAvc2hhcmVkL3NlcnZpY2VzL3N0b3JhZ2Uuc2VydmljZSI7CmltcG9ydCBmaWxlVXBsb2FkIGZyb20gIi4vZmlsZS11cGxvYWQiOwppbXBvcnQgQ2hhdHMgZnJvbSAiLi9jaGF0cyI7CmltcG9ydCBDb250YWN0cyBmcm9tICIuL2NvbnRhY3RzIjsKaW1wb3J0IEdyb3VwcyBmcm9tICIuL2dyb3VwcyI7CmltcG9ydCBFZGl0IGZyb20gIi4vZWRpdCI7CmltcG9ydCBNZXNzYWdlcyBmcm9tICIuL21lc3NhZ2VzIjsKaW1wb3J0IEdyb3VwTWVtYmVycyBmcm9tICIuL2dyb3VwTWVtYmVycyI7CmltcG9ydCBBZGRHcm91cE1lbWJlcnMgZnJvbSAiLi9hZGROZXdNZW1iZXJzVG9Hcm91cC52dWUiOwppbXBvcnQgRWRpdEdyb3VwIGZyb20gIi4vZWRpdEdyb3VwLnZ1ZSI7Ci8qKg0KICogQ2hhdCBDb21wb25lbnQNCiAqLwoKaW1wb3J0IGkxOG4gZnJvbSAiQC9pMThuIjsKZXhwb3J0IGRlZmF1bHQgewogIHdhdGNoOiB7CiAgICBpbm5lcldpZHRoOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodikgewogICAgICAgIHRoaXMuc2V0V2luZG93V2lkdGhQcml2aXRlKHYpOwogICAgICB9CiAgICB9LAogICAgaW5kZXg6IGZ1bmN0aW9uIGluZGV4KHYpIHsKICAgICAgaWYgKHYgPT0gMikgewogICAgICAgIHRoaXMuJHJlZnMuY29udGFjdENvbXBvbmVudC5nZXRDbGlja1RhYih7CiAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgaXRlbXNQZXJQYWdlOiAxMCwKICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2hDb250YWN0CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodiA9PSAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy5jaGF0Q29tcG9uZW50LmdldENsaWNrVGFiKHsKICAgICAgICAgIHBhZ2U6IDAsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwLAogICAgICAgICAgc2VhcmNoOiB0aGlzLnNlYXJjaENoYXQKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh2ID09IDEpIHsKICAgICAgICB0aGlzLiRyZWZzLmdyb3VwQ29tcG9uZW50LmdldENsaWNrVGFiKHsKICAgICAgICAgIHBhZ2U6IDAsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwLAogICAgICAgICAgc2VhcmNoOiB0aGlzLnNlYXJjaEdyb3VwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBmaWxlOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodikgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIGlmICh2KSB7CiAgICAgICAgICB0aGlzLmZpbGVNb2RhbCA9IHRydWU7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMuJHJlZnMuZmlsZUNvbXBvbmVudC5zZXROYW1lU2l6ZSh2Lm5hbWUsIHYuc2l6ZSk7CiAgICAgICAgICB9LCAzMDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRyZWZzLmZpbGVDb21wb25lbnQuc2V0TmFtZVNpemUobnVsbCwgbnVsbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2VhcmNoR3JvdXA6IGZ1bmN0aW9uIHNlYXJjaEdyb3VwKHYpIHsKICAgICAgaWYgKHRoaXMuaW5kZXggPT0gMSkgewogICAgICAgIHRoaXMuJHJlZnMuZ3JvdXBDb21wb25lbnQuZ2V0Q2xpY2tUYWIoewogICAgICAgICAgcGFnZTogMCwKICAgICAgICAgIGl0ZW1zUGVyUGFnZTogMTAsCiAgICAgICAgICBzZWFyY2g6IHRoaXMuc2VhcmNoR3JvdXAKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaENoYXQ6IGZ1bmN0aW9uIHNlYXJjaENoYXQodikgewogICAgICBpZiAodGhpcy5pbmRleCA9PSAwKSB7CiAgICAgICAgdGhpcy4kcmVmcy5jaGF0Q29tcG9uZW50LmdldENsaWNrVGFiKHsKICAgICAgICAgIHBhZ2U6IDAsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwLAogICAgICAgICAgc2VhcmNoOiB0aGlzLnNlYXJjaENoYXQKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaENvbnRhY3Q6IGZ1bmN0aW9uIHNlYXJjaENvbnRhY3QodikgewogICAgICBpZiAodGhpcy5pbmRleCA9PSAyKSB7CiAgICAgICAgdGhpcy4kcmVmcy5jb250YWN0Q29tcG9uZW50LmdldENsaWNrVGFiKHsKICAgICAgICAgIHBhZ2U6IDAsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwLAogICAgICAgICAgc2VhcmNoOiB0aGlzLnNlYXJjaENvbnRhY3QKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgcGFnZTogewogICAgdGl0bGU6IGkxOG4udCgiY2hhdC5jaGF0IiksCiAgICBtZXRhOiBbewogICAgICBuYW1lOiAiZGVzY3JpcHRpb24iLAogICAgICBjb250ZW50OiBhcHBDb25maWcuZGVzY3JpcHRpb24KICAgIH1dCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMYXlvdXQ6IExheW91dCwKICAgIC8vIFBhZ2VIZWFkZXIsCiAgICBmaWxlVXBsb2FkOiBmaWxlVXBsb2FkLAogICAgQ2hhdHM6IENoYXRzLAogICAgQ29udGFjdHM6IENvbnRhY3RzLAogICAgR3JvdXBzOiBHcm91cHMsCiAgICBFZGl0OiBFZGl0LAogICAgTWVzc2FnZXM6IE1lc3NhZ2VzLAogICAgVnVlRWFzeUxpZ2h0Ym94OiBWdWVFYXN5TGlnaHRib3gsCiAgICBHcm91cE1lbWJlcnM6IEdyb3VwTWVtYmVycywKICAgIEFkZEdyb3VwTWVtYmVyczogQWRkR3JvdXBNZW1iZXJzLAogICAgRWRpdEdyb3VwOiBFZGl0R3JvdXAKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwdWJsaWNQYXRoOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICAgICAgbG9jYWxVc2VyQXZhdGFyVXJsOiBudWxsLAogICAgICB1c2VyQXZhdGFyTG9hZGluZzogZmFsc2UsCiAgICAgIGlubmVyV2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLAogICAgICB1c2VyRnVsbE5hbWU6IFRva2VuU2VydmljZS5nZXRGdWxsTmFtZSgpLAogICAgICB1c2VySWQ6IFRva2VuU2VydmljZS5nZXRVc2VySWQoKSwKICAgICAgYmFzZVVybDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIGxvYWRlckVkaXQ6IGZhbHNlLAogICAgICBlZGl0R3JvdXBNb2RhbDogZmFsc2UsCiAgICAgIHRvdGFsR3JvdXBNZW1iZXI6IDAsCiAgICAgIHNlYXJjaEdyb3VwTWVtYmVyczogIiIsCiAgICAgIGdyb3VwTWVtYmVyc01vZGFsOiBmYWxzZSwKICAgICAgcGFnOiB7CiAgICAgICAgcGFnZTogMCwKICAgICAgICBpdGVtc1BlclBhZ2U6IDEwCiAgICAgIH0sCiAgICAgIGxvYWRlckZpbGU6IGZhbHNlLAogICAgICBjaGF0SWQ6IG51bGwsCiAgICAgIHVwbG9hZFBhdGg6IG51bGwsCiAgICAgIGltYWdlVmlldzogZmFsc2UsCiAgICAgIGVtb2ppZXM6IFsi8J+YgCIsICLwn5iDIiwgIvCfmIQiLCAi8J+YgSIsICLwn5iGIiwgIvCfmIUiLCAi8J+YgiIsICLwn6SjIiwgIvCfmIoiLCAi8J+YhyIsICLwn5mCIiwgIvCfmYMiLCAi8J+YiSIsICLwn5iMIiwgIvCfmI0iLCAi8J+lsCIsICLwn5iYIiwgIvCfmJciLCAi8J+YmSIsICLwn5iaIiwgIvCfmIsiLCAi8J+YmyIsICLwn5idIiwgIvCfmJwiLCAi8J+kqiIsICLwn6SoIiwgIvCfp5AiLCAi8J+kkyIsICLwn5iOIiwgIvCfpKkiLCAi8J+lsyIsICLwn5iPIiwgIvCfmJIiLCAi8J+YniIsICLwn5iUIiwgIvCfmJ8iLCAi8J+YlSIsICLwn5mBIiwgIuKYue+4jyIsICLwn5ijIiwgIvCfmJYiLCAi8J+YqyIsICLwn5ipIiwgIvCfpboiLCAi8J+YoiIsICLwn5itIiwgIvCfmKQiLCAi8J+YoCIsICLwn5ihIiwgIvCfpKwiLCAi8J+kryIsICLwn5izIiwgIvCfpbUiLCAi8J+ltiIsICLwn5ixIiwgIvCfmKgiLCAi8J+YsCIsICLwn5ilIiwgIvCfmJMiLCAi8J+klyIsICLwn6SUIiwgIvCfpK0iLCAi8J+kqyIsICLwn6SlIiwgIvCfmLYiLCAi8J+YkCIsICLwn5iRIiwgIvCfmKwiLCAi8J+ZhCIsICLwn5ivIiwgIvCfmKYiLCAi8J+YpyIsICLwn5iuIiwgIvCfmLIiLCAi8J+lsSIsICLwn5i0IiwgIvCfpKQiLCAi8J+YqiIsICLwn5i1IiwgIvCfpJAiLCAi8J+ltCIsICLwn6SiIiwgIvCfpK4iLCAi8J+kpyIsICLwn5i3IiwgIvCfpJUiLCAi8J+kkSIsICLwn6SgIl0sCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgZ3JvdXBNb2RhbDogZmFsc2UsCiAgICAgIGZpbGVNb2RhbDogZmFsc2UsCiAgICAgIGZpbGU6IG51bGwsCiAgICAgIGZpbGVGb3JVc2VyQXZhdGFyOiBudWxsLAogICAgICBjaGF0RGF0YTogW10sCiAgICAgIGluZGV4OiAwLAogICAgICBpc1NpZGViYXJDaGF0OiBmYWxzZSwKICAgICAgbm9Nc2c6IGZhbHNlLAogICAgICBDSEFUOiBudWxsLAogICAgICBsb2FkZXI6IGZhbHNlLAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICB0aXRsZTogdGhpcy4kdCgiY2hhdC5jaGF0IiksCiAgICAgIHVzZXJuYW1lOiB0aGlzLiR0KCJjaGF0LmNoYXQiKSwKICAgICAgaXRlbXM6IFt7CiAgICAgICAgdGV4dDogdGhpcy4kdCgibWVudSIpLAogICAgICAgIGhyZWY6ICIvIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgiY2hhdC5jaGF0IiksCiAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgIH1dLAogICAgICBjaGF0VHlwZTogImNoYXQiLAogICAgICAvLyBGT1JDSEFUTUVTU0FHRVMKICAgICAgcGFnZTogMCwKICAgICAgZ3JvdXBDaGF0SWQ6IG51bGwsCiAgICAgIHNlYXJjaENoYXQ6ICIiLAogICAgICBzZWFyY2hDb250YWN0OiAiIiwKICAgICAgc2VhcmNoR3JvdXA6ICIiLAogICAgICBtb2JpbGVDaGF0OiBmYWxzZSwKICAgICAgYWRkR3JvdXBNZW1iZXJzTW9kYWw6IGZhbHNlLAogICAgICBzZWFyY2hHcm91cE1lbWJlcnNBZGQ6ICIiCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzMi5pbm5lcldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICB9KTsKICAgIHRoaXMuc2V0V2luZG93V2lkdGhQcml2aXRlKHRoaXMuaW5uZXJXaWR0aCk7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgibWVzc2VuZ2VyIiwgWyJjaGF0TGlzdE1lc3NhZ2VzIiwgImNoYXRUb3RhbE1lc3NhZ2VzIiwgImdyb3VwQ2hhdExpc3RNZXNzYWdlcyJdKSksIHt9LCB7CiAgICAvLyAuLi5tYXBTdGF0ZSgiZW1wbG95ZWUiLCBbInVzZXIiXSksCiAgICBtZXNzYWdlczogZnVuY3Rpb24gbWVzc2FnZXMoKSB7CiAgICAgIGlmICh0aGlzLmNoYXRUeXBlID09ICJncm91cCIpIHsKICAgICAgICByZXR1cm4gdGhpcy5ncm91cENoYXRMaXN0TWVzc2FnZXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY2hhdExpc3RNZXNzYWdlczsKICAgICAgfQogICAgfSwKICAgIHVzZXJBdmF0YXJVcmxGcm9tU3RvcmFnZTogZnVuY3Rpb24gdXNlckF2YXRhclVybEZyb21TdG9yYWdlKCkgewogICAgICB2YXIgdHJpZ2dlckZvclVybCA9IHRoaXMubG9jYWxVc2VyQXZhdGFyVXJsOwogICAgICByZXR1cm4gVG9rZW5TZXJ2aWNlLmdldFVzZXJBdmF0YXJVcmwoKTsKICAgIH0KICB9KSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoIm1lc3NlbmdlciIsIFsiZ2V0QnlDaGF0SWQiLCAic2VuZE1lc3NhZ2UiLCAiZ2V0QnlHcm91cENoYXRJZCIsICJzZW5kTWVzc2FnZUdyb3VwIl0pKSwge30sIHsKICAgIHJlc2V0TWVzc2FnZXNDb21wb25lbnRQcm9wczogZnVuY3Rpb24gcmVzZXRNZXNzYWdlc0NvbXBvbmVudFByb3BzKCkgewogICAgICB0aGlzLkNIQVQgPSBudWxsOwogICAgICB0aGlzLnVzZXJuYW1lID0gdGhpcy4kdCgiY2hhdC5jaGF0Iik7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnbWVzc2VuZ2VyL3NldExpc3RHcm91cENoYXRNZXNzZWdlcycsIHsKICAgICAgICBsaXN0OiBbXSwKICAgICAgICB0b3RhbDogMAogICAgICB9KTsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5ub01zZyA9IGZhbHNlOwogICAgfSwKICAgIHVwZGF0ZVVzZXJBdmF0YXI6IGZ1bmN0aW9uIHVwZGF0ZVVzZXJBdmF0YXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy51c2VyQXZhdGFyTG9hZGluZyA9IHRydWU7CiAgICAgIG1lc3NlbmdlclNlcnZpY2UuY2hhbmdlVXNlckF2YXRhcih0aGlzLmZpbGVGb3JVc2VyQXZhdGFyLCB0aGlzLnVzZXJJZCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBfdGhpczMudXNlckF2YXRhckxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKHJzLmRhdGEpIHsKICAgICAgICAgIF90aGlzMy5sb2NhbFVzZXJBdmF0YXJVcmwgPSBycy5kYXRhOwogICAgICAgICAgVG9rZW5TZXJ2aWNlLnNldFVzZXJBdmF0YXJVcmwocnMuZGF0YSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgIF90aGlzMy51c2VyQXZhdGFyTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB1c2VyQXZhdGFyQ2xpY2tlZDogZnVuY3Rpb24gdXNlckF2YXRhckNsaWNrZWQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXNlckF2YXRhckZpbGVSZWYuJGVsLmZpcnN0Q2hpbGQuY2xpY2soKTsKICAgIH0sCiAgICBjbG9zZU1vZGFsQWRkTWVtYmVyOiBmdW5jdGlvbiBjbG9zZU1vZGFsQWRkTWVtYmVyKCkgewogICAgICB0aGlzLmFkZEdyb3VwTWVtYmVyc01vZGFsID0gZmFsc2U7CiAgICAgIHRoaXMuc2VhcmNoR3JvdXBNZW1iZXJzQWRkID0gIiI7CgogICAgICBpZiAodGhpcy5ncm91cE1lbWJlcnNNb2RhbCAmJiB0aGlzLiRyZWZzLmdyb3VwTWVtYmVyUmVmKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ncm91cE1lbWJlclJlZi5yZXNldCh0aGlzLnNlYXJjaEdyb3VwTWVtYmVycyk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRNZW1iZXJGcm9tTW9kYWw6IGZ1bmN0aW9uIGFkZE1lbWJlckZyb21Nb2RhbCgpIHsKICAgICAgdGhpcy5hZGRNZW1iZXJzVG9Hcm91cCgpOwogICAgfSwKICAgIHNhdmVFZGl0ZWREYXRhOiBmdW5jdGlvbiBzYXZlRWRpdGVkRGF0YSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRlckVkaXQgPSB0cnVlOwogICAgICB2YXIgX3RoaXMkJHJlZnMkZWRpdEdyb3VwID0gdGhpcy4kcmVmcy5lZGl0R3JvdXBSZWYsCiAgICAgICAgICBmaWxlID0gX3RoaXMkJHJlZnMkZWRpdEdyb3VwLmZpbGUsCiAgICAgICAgICBuYW1lID0gX3RoaXMkJHJlZnMkZWRpdEdyb3VwLm5hbWU7CiAgICAgIG1lc3NlbmdlclNlcnZpY2UuZWRpdEdyb3VwKGZpbGUsIG5hbWUsIHRoaXMuQ0hBVC5pZCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMuZGF0YSkgewogICAgICAgICAgaWYgKF90aGlzNC5pbmRleCA9PSAxKSB7CiAgICAgICAgICAgIF90aGlzNC4kcmVmcy5ncm91cENvbXBvbmVudC5nZXRDbGlja1RhYih7CiAgICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwLAogICAgICAgICAgICAgIHNlYXJjaDogX3RoaXM0LnNlYXJjaEdyb3VwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzNC5lZGl0R3JvdXBNb2RhbCA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzNC5zZXRVc2VybmFtZShycy5kYXRhLmdyb3VwTmFtZSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgey8vIGNhdGNoRXJyKGUpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQubG9hZGVyRWRpdCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0R3JvdXA6IGZ1bmN0aW9uIGVkaXRHcm91cCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLmVkaXRHcm91cE1vZGFsID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LiRyZWZzLmVkaXRHcm91cFJlZi5zZXRFZGl0ZWREYXRhKF90aGlzNS5DSEFULmdyb3VwTmFtZSwgIiIuY29uY2F0KF90aGlzNS5iYXNlVXJsLCAiLyIpLmNvbmNhdChfdGhpczUuQ0hBVC51cGxvYWRQYXRoKSk7CiAgICAgIH0sIDMwMCk7CiAgICB9LAogICAgZGVsZXRlR3JvdXA6IGZ1bmN0aW9uIGRlbGV0ZUdyb3VwKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94Q29uZmlybSh0aGlzLiR0KCdtZXNzYWdlcy5kZWxldGVfdGl0bGUnKSwgewogICAgICAgIG9rVGl0bGU6IHRoaXMuJHQoJ2FjdGlvbnMuY29uZmlybScpLAogICAgICAgIGNhbmNlbFRpdGxlOiB0aGlzLiR0KCdhY3Rpb25zLmNhbmNlbCcpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBtZXNzZW5nZXJTZXJ2aWNlLmRlbGV0ZUdyb3VwKF90aGlzNi5DSEFULmlkKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgICBpZiAoX3RoaXM2LmluZGV4ID09IDEpIHsKICAgICAgICAgICAgICBfdGhpczYuJHJlZnMuZ3JvdXBDb21wb25lbnQuZ2V0Q2xpY2tUYWIoewogICAgICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogMTAsCiAgICAgICAgICAgICAgICBzZWFyY2g6IF90aGlzNi5zZWFyY2hHcm91cAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczYucmVzZXRNZXNzYWdlc0NvbXBvbmVudFByb3BzKCk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgey8vIEFuIGVycm9yIG9jY3VycmVkCiAgICAgIH0pOwogICAgfSwKICAgIGFkZE1lbWJlcnNUb0dyb3VwOiBmdW5jdGlvbiBhZGRNZW1iZXJzVG9Hcm91cCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB0aGlzLmFkZEdyb3VwTWVtYmVyc01vZGFsID0gdHJ1ZTsKICAgICAgdGhpcy5zZWFyY2hHcm91cE1lbWJlcnNBZGQgPSAiIjsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM3LiRyZWZzLmFkZEdyb3VwTWVtYmVyUmVmLnJlc2V0KF90aGlzNy5zZWFyY2hHcm91cE1lbWJlcnNBZGQpOwogICAgICB9LCAzMDApOwogICAgfSwKICAgIHNldFRvdGFsRm9yR3JvdXBNZW1iZXI6IGZ1bmN0aW9uIHNldFRvdGFsRm9yR3JvdXBNZW1iZXIodikgewogICAgICB0aGlzLnRvdGFsR3JvdXBNZW1iZXIgPSB2LnRvdGFsOwogICAgfSwKICAgIHZpZXdHcm91cE1lbWJlcnM6IGZ1bmN0aW9uIHZpZXdHcm91cE1lbWJlcnMoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy5ncm91cE1lbWJlcnNNb2RhbCA9IHRydWU7CiAgICAgIHRoaXMuc2VhcmNoR3JvdXBNZW1iZXJzID0gIiI7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOC4kcmVmcy5ncm91cE1lbWJlclJlZi5yZXNldChfdGhpczguc2VhcmNoR3JvdXBNZW1iZXJzKTsKICAgICAgfSwgMzAwKTsKICAgIH0sCiAgICAvL01FU1NBR0UgU0VBUkNISU5HIENIQVQgQU5EIEdST1VQCiAgICBzZWFyY2hNc2c6IGZ1bmN0aW9uIHNlYXJjaE1zZyh2KSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYXJnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghX3RoaXM5LkNIQVQuaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGFyZyA9IHsKICAgICAgICAgICAgICAgICAgcGFnOiBfdGhpczkucGFnLAogICAgICAgICAgICAgICAgICBjaGF0SWQ6IF90aGlzOS5DSEFULmlkLAogICAgICAgICAgICAgICAgICBzZWFyY2g6IHYKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM5LmNoYXRUeXBlID09ICJncm91cCIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkuZ2V0QnlHcm91cENoYXRJZChhcmcpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkuZ2V0QnlDaGF0SWQoYXJnKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vRU5ECiAgICB2aWV3SW1hZ2VGcm9tTWVzc2FnZXM6IGZ1bmN0aW9uIHZpZXdJbWFnZUZyb21NZXNzYWdlcyhwYXRoKSB7CiAgICAgIHRoaXMuaW1hZ2VWaWV3ID0gdHJ1ZTsKICAgICAgdGhpcy51cGxvYWRQYXRoID0gcGF0aDsKICAgIH0sCiAgICBzZXRXaW5kb3dXaWR0aFByaXZpdGU6IGZ1bmN0aW9uIHNldFdpbmRvd1dpZHRoUHJpdml0ZSh2KSB7CiAgICAgIGlmICh2IDwgOTkyKSB7CiAgICAgICAgdGhpcy5tb2JpbGVDaGF0ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1vYmlsZUNoYXQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdEVtb2ppOiBmdW5jdGlvbiBzZWxlY3RFbW9qaShlKSB7CiAgICAgIHRoaXMuJHJlZnMubWVzc2FnZVJlZi5mb3JtLm1lc3NhZ2UgPSBTdHJpbmcodGhpcy4kcmVmcy5tZXNzYWdlUmVmLmZvcm0ubWVzc2FnZS5jb25jYXQoZSkpOwogICAgfSwKICAgIC8vREVMRVRFIE1FU1NBR0UKICAgIGRlbGV0ZU1zZzogZnVuY3Rpb24gZGVsZXRlTXNnKGlkLCBncm91cENoYXRJZCwgY2hhdElkKSB7CiAgICAgIHZhciBkZWxldGVBcGkgPSBmdW5jdGlvbiBkZWxldGVBcGkoYXBpLCBhcmcpIHsKICAgICAgICBhcGkoYXJnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZygnZGVsZXRlZCcpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsvLyBjYXRjaEVycihlcnIpCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBpZiAodGhpcy5jaGF0VHlwZSA9PSAiZ3JvdXAiKSB7CiAgICAgICAgZGVsZXRlQXBpKG1lc3NlbmdlclNlcnZpY2UuZ3JvdXBDaGF0TWVzc2FnZURlbGV0ZSwgewogICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgZ3JvdXBDaGF0SWQ6IGdyb3VwQ2hhdElkCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlQXBpKG1lc3NlbmdlclNlcnZpY2UuY2hhdE1lc3NhZ2VEZWxldGUsIHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIGNoYXRJZDogY2hhdElkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlRWRpdDogZnVuY3Rpb24gc2F2ZUVkaXQoX3JlZikgewogICAgICB2YXIgbWVzc2FnZSA9IF9yZWYubWVzc2FnZSwKICAgICAgICAgIGZpbGUgPSBfcmVmLmZpbGU7CgogICAgICBpZiAodGhpcy5jaGF0VHlwZSA9PSAiZ3JvdXAiKSB7CiAgICAgICAgaWYgKHRoaXMuZ3JvdXBDaGF0SWQpIHsKICAgICAgICAgIG1lc3NlbmdlclNlcnZpY2UuZ3JvdXBDaGF0TWVzc2FnZVVwZGF0ZSh7CiAgICAgICAgICAgIGlkOiB0aGlzLmdyb3VwQ2hhdElkLAogICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHt9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7Ly8gY2F0Y2hFcnIoZXJyKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBtZXNzZW5nZXJTZXJ2aWNlLmNoYXRNZXNzYWdlVXBkYXRlKHsKICAgICAgICAgIGlkOiB0aGlzLmNoYXRJZCwKICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHt9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7Ly8gY2F0Y2hFcnIoZXJyKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZU1zZzogZnVuY3Rpb24gdXBkYXRlTXNnKF9yZWYyKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciBpZCA9IF9yZWYyLmlkLAogICAgICAgICAgbWVzc2FnZSA9IF9yZWYyLm1lc3NhZ2UsCiAgICAgICAgICB1cGxvYWRQYXRoID0gX3JlZjIudXBsb2FkUGF0aCwKICAgICAgICAgIGZpbGVOYW1lID0gX3JlZjIuZmlsZU5hbWU7CgogICAgICBpZiAodGhpcy5jaGF0VHlwZSA9PSAiZ3JvdXAiKSB7CiAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICAgIHRoaXMuZ3JvdXBDaGF0SWQgPSBpZDsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTAuJHJlZnMuZWRpdFJlZi5zZXRNc2cobWVzc2FnZSk7CgogICAgICAgICAgX3RoaXMxMC4kcmVmcy5lZGl0UmVmLnNldEZpbGUoZmlsZU5hbWUsIHVwbG9hZFBhdGgpOwogICAgICAgIH0sIDIwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICAgIHRoaXMuY2hhdElkID0gaWQ7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczEwLiRyZWZzLmVkaXRSZWYuc2V0TXNnKG1lc3NhZ2UpOwoKICAgICAgICAgIF90aGlzMTAuJHJlZnMuZWRpdFJlZi5zZXRGaWxlKGZpbGVOYW1lLCB1cGxvYWRQYXRoKTsKICAgICAgICB9LCAyMDApOwogICAgICB9CiAgICB9LAogICAgZmluaXNoU2VuZEZpbGU6IGZ1bmN0aW9uIGZpbmlzaFNlbmRGaWxlKG1lc3NhZ2UsIGlkLCBlbXBsb3llZUlkLCBmaWxlKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGVyRmlsZSA9IHRydWU7CiAgICAgIHZhciBtZXNzYWdlUmVmID0gdGhpcy4kcmVmcy5tZXNzYWdlUmVmOwogICAgICB2YXIgdG9hc3REYXRhID0gbWVzc2FnZVJlZi50b2FzdERhdGEsCiAgICAgICAgICB0b2FzdFN0YXR1cyA9IG1lc3NhZ2VSZWYudG9hc3RTdGF0dXM7CgogICAgICBpZiAodG9hc3RTdGF0dXMgPT0gInJlcGx5IikgewogICAgICAgIHRoaXMuY2FsbEFwaShtZXNzZW5nZXJTZXJ2aWNlLnJlcGx5Q2hhdCwgewogICAgICAgICAgY2hhdElkOiBpZCwKICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgICAgaWQ6IHRvYXN0RGF0YS5pZAogICAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTEuJHJlZnMuZmlsZUNvbXBvbmVudC5yZXNldCgpOwoKICAgICAgICAgIF90aGlzMTEuZmlsZSA9IG51bGw7CiAgICAgICAgICBfdGhpczExLmZpbGVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgX3RoaXMxMS5sb2FkZXJGaWxlID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMxMS5oYW5kbGVTY3JvbGwoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgIGNoYXRJZDogaWQgfHwgZW1wbG95ZWVJZCwKICAgICAgICAgIG93bmVySWQ6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJfaWQiKSksCiAgICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICAgIH07CiAgICAgICAgbWVzc2VuZ2VyU2VydmljZS5zZW5kRmlsZShkYXRhKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgX3RoaXMxMS4kcmVmcy5maWxlQ29tcG9uZW50LnJlc2V0KCk7CgogICAgICAgICAgX3RoaXMxMS5maWxlID0gbnVsbDsKICAgICAgICAgIF90aGlzMTEuZmlsZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICBfdGhpczExLmxvYWRlckZpbGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczExLmhhbmRsZVNjcm9sbCgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsvLyBjYXRjaEVycihlcnIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2VuZEZpbGU6IGZ1bmN0aW9uIHNlbmRGaWxlKG1lc3NhZ2UsIGZpbGUpIHsKICAgICAgaWYgKHRoaXMuY2hhdFR5cGUgPT0gImNoYXQiKSB7CiAgICAgICAgdmFyIF90aGlzJENIQVQgPSB0aGlzLkNIQVQsCiAgICAgICAgICAgIGlkID0gX3RoaXMkQ0hBVC5pZCwKICAgICAgICAgICAgb3duZXJJZCA9IF90aGlzJENIQVQub3duZXJJZCwKICAgICAgICAgICAgZW1wbG95ZWVJZCA9IF90aGlzJENIQVQuZW1wbG95ZWVJZDsKCiAgICAgICAgaWYgKG93bmVySWQgfHwgaWQpIHsKICAgICAgICAgIHRoaXMuZmluaXNoU2VuZEZpbGUobWVzc2FnZSwgaWQsIGVtcGxveWVlSWQsIGZpbGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZpbmlzaFNlbmRGaWxlRnJvbUNvbnRhY3QoZmlsZSwgbWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmluaXNoU2VuZEZpbGVHcm91cChtZXNzYWdlLCB0aGlzLkNIQVQuaWQsIGZpbGUpOwogICAgICB9CiAgICB9LAogICAgZmluaXNoU2VuZEZpbGVGcm9tQ29udGFjdDogZnVuY3Rpb24gZmluaXNoU2VuZEZpbGVGcm9tQ29udGFjdChmaWxlLCBtZXNzYWdlKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgIG1lc3NlbmdlclNlcnZpY2UuY3JlYXRlQ2hhdCh0aGlzLkNIQVQuZW1wbG95ZWVJZCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJzKSB7CiAgICAgICAgICB2YXIgX3JzJGRhdGEsIGlkLCBlbXBsb3llZUlkOwoKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9ycyRkYXRhID0gcnMuZGF0YSwgaWQgPSBfcnMkZGF0YS5pZCwgZW1wbG95ZWVJZCA9IF9ycyRkYXRhLmVtcGxveWVlSWQ7CgogICAgICAgICAgICAgICAgICBpZiAoIWlkKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLmdldEJ5Q2hhdElkKHsKICAgICAgICAgICAgICAgICAgICBwYWc6IF90aGlzMTIucGFnLAogICAgICAgICAgICAgICAgICAgIGNoYXRJZDogaWQKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEyLmZpbmlzaFNlbmRGaWxlKG1lc3NhZ2UsIGlkLCBlbXBsb3llZUlkLCBmaWxlKTsKCiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgey8vIGNhdGNoRXJyKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGZpbmlzaFNlbmRGaWxlR3JvdXA6IGZ1bmN0aW9uIGZpbmlzaFNlbmRGaWxlR3JvdXAobWVzc2FnZSwgZ3JvdXBJZCwgZmlsZSkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRlckZpbGUgPSB0cnVlOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBncm91cENoYXRJZDogZ3JvdXBJZCwKICAgICAgICBvd25lcklkOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyX2lkIikpLAogICAgICAgIGZpbGU6IGZpbGUsCiAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICB9OwogICAgICBtZXNzZW5nZXJTZXJ2aWNlLnNlbmRJbWFnZUdyb3VwKGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgX3RoaXMxMy4kcmVmcy5maWxlQ29tcG9uZW50LnJlc2V0KCk7CgogICAgICAgIF90aGlzMTMuZmlsZSA9IG51bGw7CiAgICAgICAgX3RoaXMxMy5maWxlTW9kYWwgPSBmYWxzZTsKICAgICAgICBfdGhpczEzLmxvYWRlckZpbGUgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMxMy5oYW5kbGVTY3JvbGwoKTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsZVVwbG9hZDogZnVuY3Rpb24gZmlsZVVwbG9hZCgpIHsKICAgICAgdGhpcy4kcmVmcy5maWxlUmVmLiRlbC5maXJzdENoaWxkLmNsaWNrKCk7CiAgICB9LAogICAgZ2V0TWVzc2FnZXNCeUNoYXRJZDogZnVuY3Rpb24gZ2V0TWVzc2FnZXNCeUNoYXRJZChjbXApIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuQ0hBVC5pZCkgewogICAgICAgIG1lc3NlbmdlclNlcnZpY2UuZ2V0QnlDaGF0SWQoewogICAgICAgICAgcGFnOiB7CiAgICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZSArPSAxLAogICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwCiAgICAgICAgICB9LAogICAgICAgICAgY2hhdElkOiB0aGlzLkNIQVQuaWQKICAgICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhfcmVmNCkgewogICAgICAgICAgICB2YXIgZGF0YTsKICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBkYXRhID0gX3JlZjQuZGF0YTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC4kc3RvcmUuY29tbWl0KCJtZXNzZW5nZXIvcHVzaEl0ZW1zIiwgZGF0YS5saXN0KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBjbXAuc2Nyb2xsVG9wID0gODAwOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxNC5ub01zZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE0Lm5vTXNnID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTQucGFnZSArIC0xOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgIH0pKTsKCiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MikgewogICAgICAgICAgICByZXR1cm4gX3JlZjUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7Ly8gY2F0Y2hFcnIoZXJyKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmhhbmRsZVNjcm9sbCgpOwogICAgICB9CiAgICB9LAogICAgZ2V0TWVzc2FnZXNCeUdyb3VwSWQ6IGZ1bmN0aW9uIGdldE1lc3NhZ2VzQnlHcm91cElkKGNtcCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICBtZXNzZW5nZXJTZXJ2aWNlLmdldEJ5R3JvdXBDaGF0SWQoewogICAgICAgIHBhZzogewogICAgICAgICAgcGFnZTogdGhpcy5wYWdlICs9IDEsCiAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwCiAgICAgICAgfSwKICAgICAgICBjaGF0SWQ6IHRoaXMuQ0hBVC5pZAogICAgICB9KS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoX3JlZjYpIHsKICAgICAgICAgIHZhciBkYXRhOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgZGF0YSA9IF9yZWY2LmRhdGE7CgogICAgICAgICAgICAgICAgICBpZiAoZGF0YS5saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBjbXAuc2Nyb2xsVG9wID0gMTUwMDsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS4kc3RvcmUuY29tbWl0KCJtZXNzZW5nZXIvcHVzaEdyb3VwSXRlbXMiLCBkYXRhLmxpc3QpOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczE1Lm5vTXNnID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS5ub01zZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxNS5wYWdlICsgLTE7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gzKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBHZXQgdGhlIG5hbWUgb2YgdXNlcg0KICAgICAqLwogICAgc2V0VXNlcm5hbWU6IGZ1bmN0aW9uIHNldFVzZXJuYW1lKG5hbWUpIHsKICAgICAgdGhpcy51c2VybmFtZSA9IG5hbWU7CiAgICB9LAogICAgY2hhdFVzZXJuYW1lOiBmdW5jdGlvbiBjaGF0VXNlcm5hbWUoY29udGFjdCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMxNi5jaGF0VHlwZSA9ICJjaGF0IjsKICAgICAgICAgICAgICAgIF90aGlzMTYubm9Nc2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzMTYucGFnZSA9IDA7CiAgICAgICAgICAgICAgICBfdGhpczE2LkNIQVQgPSBjb250YWN0OwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuJHN0b3JlLmNvbW1pdCgibWVzc2VuZ2VyL3NldEN1cnJlbnRDaGF0IiwgY29udGFjdCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE2LnNldFVzZXJuYW1lKGNvbnRhY3QubXlOYW1lKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE2LmdldEJ5Q2hhdElkKHsKICAgICAgICAgICAgICAgICAgcGFnOiB7CiAgICAgICAgICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGNoYXRJZDogY29udGFjdC5pZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuc2V0TW9iaWxlQ2hhdCgpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2V0TW9iaWxlQ2hhdDogZnVuY3Rpb24gc2V0TW9iaWxlQ2hhdCgpIHsKICAgICAgaWYgKHRoaXMubW9iaWxlQ2hhdCkgewogICAgICAgIHRoaXMuaXNTaWRlYmFyQ2hhdCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBncm91cFVzZXJuYW1lOiBmdW5jdGlvbiBncm91cFVzZXJuYW1lKGdyb3VwKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczE3LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMTcubm9Nc2cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXMxNy5wYWdlID0gMDsKICAgICAgICAgICAgICAgICAgX3RoaXMxNy5jaGF0VHlwZSA9ICJncm91cCI7CiAgICAgICAgICAgICAgICAgIF90aGlzMTcuQ0hBVCA9IGdyb3VwOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTcuJHN0b3JlLmNvbW1pdCgibWVzc2VuZ2VyL3NldEN1cnJlbnRDaGF0IiwgZ3JvdXApOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNy5zZXRVc2VybmFtZShncm91cC5ncm91cE5hbWUpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNy5nZXRCeUdyb3VwQ2hhdElkKHsKICAgICAgICAgICAgICAgICAgcGFnOiB7CiAgICAgICAgICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGNoYXRJZDogZ3JvdXAuaWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNy5zZXRNb2JpbGVDaGF0KCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNvbnRhY3RVc2VybmFtZTogZnVuY3Rpb24gY29udGFjdFVzZXJuYW1lKGNvbnRhY3QpIHsKICAgICAgdmFyIF90aGlzMTggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTguJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMxOC5ub01zZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfdGhpczE4LkNIQVQgPSBjb250YWN0OwogICAgICAgICAgICAgICAgICBfdGhpczE4LmNoYXRUeXBlID0gImNoYXQiOwogICAgICAgICAgICAgICAgICBfdGhpczE4LnBhZ2UgPSAwOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTguJHN0b3JlLmNvbW1pdCgibWVzc2VuZ2VyL3NldEN1cnJlbnRDaGF0IiwgY29udGFjdCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LnNldFVzZXJuYW1lKCIgIi5jb25jYXQoY29udGFjdC5sYXN0TmFtZSwgIiAiKS5jb25jYXQoY29udGFjdC5maXJzdE5hbWUsICIgIikuY29uY2F0KGNvbnRhY3QubWlkZGxlTmFtZSkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBpZiAoIWNvbnRhY3QuaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTguZ2V0QnlDaGF0SWQoewogICAgICAgICAgICAgICAgICBwYWc6IHsKICAgICAgICAgICAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgICAgICAgICAgIGl0ZW1zUGVyUGFnZTogMTAKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgY2hhdElkOiBjb250YWN0LmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LiRzdG9yZS5jb21taXQoIm1lc3Nlbmdlci9zZXRMaXN0Q2hhdE1lc3NlZ2VzIiwgewogICAgICAgICAgICAgICAgICB0b3RhbDogMCwKICAgICAgICAgICAgICAgICAgbGlzdDogW10KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LnNldE1vYmlsZUNoYXQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDaGFyIGZvcm0gU3VibWl0DQogICAgICovCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMKICAgIHNlbmRNc2dHcm91cDogZnVuY3Rpb24gc2VuZE1zZ0dyb3VwKG1lc3NhZ2UpIHsKICAgICAgdGhpcy5zZW5kTWVzc2FnZUdyb3VwKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgIGdyb3VwQ2hhdElkOiB0aGlzLkNIQVQuaWQsCiAgICAgICAgb3duZXJJZDogSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcl9pZCIpKQogICAgICB9KSk7IC8vIHRoaXMuZm9ybS5tZXNzYWdlID0gIiI7CgogICAgICB0aGlzLmhhbmRsZVNjcm9sbCgpOwogICAgfSwKICAgIHNlbmRNc2dBcGk6IGZ1bmN0aW9uIHNlbmRNc2dBcGkobXNnLCBjaGF0SWQpIHsKICAgICAgdGhpcy5zZW5kTWVzc2FnZShKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgbWVzc2FnZTogbXNnLAogICAgICAgIGNoYXRJZDogY2hhdElkIHx8IGVtcElkLAogICAgICAgIG93bmVySWQ6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJfaWQiKSkKICAgICAgfSkpOwogICAgfSwKICAgIHNlbmRNc2c6IGZ1bmN0aW9uIHNlbmRNc2cobWVzc2FnZSkgewogICAgICB2YXIgX3RoaXMxOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczE5LkNIQVQub3duZXJJZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMTkuc2VuZE1zZ0FwaShtZXNzYWdlLCBfdGhpczE5LkNIQVQuaWQgfHwgX3RoaXMxOS5DSEFULmVtcGxveWVlSWQpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczE5LkNIQVQuaWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOS5zZW5kTXNnQXBpKG1lc3NhZ2UsIF90aGlzMTkuQ0hBVC5pZCB8fCBfdGhpczE5LkNIQVQuZW1wbG95ZWVJZCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgbWVzc2VuZ2VyU2VydmljZS5jcmVhdGVDaGF0KF90aGlzMTkuQ0hBVC5lbXBsb3llZUlkKS50aGVuKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjggPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KHJzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcnMuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE5LmdldEJ5Q2hhdElkKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtc1BlclBhZ2U6IDEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRJZDogcnMuZGF0YS5pZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTkuc2VuZE1zZ0FwaShtZXNzYWdlLCBycy5kYXRhLmlkIHx8IHJzLmRhdGEuZW1wbG95ZWVJZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOS5pc1NpZGViYXJDaGF0ID0gZmFsc2U7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWY4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsvLyBjYXRjaEVycihlcnIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpczE5LmhhbmRsZVNjcm9sbCgpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY2FsbEFwaTogZnVuY3Rpb24gY2FsbEFwaShhcGksIGFyZykgewogICAgICB2YXIgX3RoaXMyMCA9IHRoaXM7CgogICAgICB2YXIgZnVuYyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDsKICAgICAgdmFyIG1lc3NhZ2VSZWYgPSB0aGlzLiRyZWZzLm1lc3NhZ2VSZWY7CgogICAgICB2YXIgaGlkZVRvYXN0ID0gZnVuY3Rpb24gaGlkZVRvYXN0KCkgewogICAgICAgIGlmIChtZXNzYWdlUmVmKSBtZXNzYWdlUmVmLnJlcGx5TXNnKG51bGwsICJoaWRkZW4iKTsKCiAgICAgICAgX3RoaXMyMC5oYW5kbGVTY3JvbGwoKTsKCiAgICAgICAgaWYgKGZ1bmMpIHsKICAgICAgICAgIGZ1bmMoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBhcGkoYXJnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gaGlkZVRvYXN0KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7Ly8gY2F0Y2hFcnIoZSkKICAgICAgfSk7CiAgICB9LAogICAgLy9NRVNTQUdFIFNFTkQgQVBJCiAgICBmb3JtU3VibWl0OiBmdW5jdGlvbiBmb3JtU3VibWl0KGUpIHsKICAgICAgdmFyIF90aGlzMjEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciBtZXNzYWdlUmVmLCB0b2FzdERhdGEsIHRvYXN0U3RhdHVzLCBtZXNzYWdlLCBwYXlsb2FkLCBfdGhpczIxJENIQVQsIGlkLCBlbXBsb3llZUlkOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG1lc3NhZ2VSZWYgPSBfdGhpczIxLiRyZWZzLm1lc3NhZ2VSZWY7CiAgICAgICAgICAgICAgICBfdGhpczIxLnN1Ym1pdHRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICB0b2FzdERhdGEgPSBtZXNzYWdlUmVmLnRvYXN0RGF0YSwgdG9hc3RTdGF0dXMgPSBtZXNzYWdlUmVmLnRvYXN0U3RhdHVzOwogICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VSZWYuZm9ybS5tZXNzYWdlOyAvLyBzdG9wIGhlcmUgaWYgZm9ybSBpcyBpbnZhbGlkCgogICAgICAgICAgICAgICAgaWYgKCEoKCFtZXNzYWdlIHx8IG1lc3NhZ2UudHJpbSgpLmxlbmd0aCA9PSAwKSAmJiB0b2FzdFN0YXR1cyAhPSAnZm9yd2FyZCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG1lc3NhZ2VSZWYuJHJlZnMubXNnSW5wdXQuJGVsLmZvY3VzKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgICBpZDogdG9hc3REYXRhID8gdG9hc3REYXRhLmlkIDogbnVsbCwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSB0b2FzdFN0YXR1czsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IF9jb250ZXh0MTAudDAgPT09ICJlZGl0IiA/IDEzIDogX2NvbnRleHQxMC50MCA9PT0gImZvcndhcmQiID8gMTUgOiBfY29udGV4dDEwLnQwID09PSAicmVwbHkiID8gMTggOiAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMjEuY2hhdFR5cGUgPT0gImdyb3VwIikgewogICAgICAgICAgICAgICAgICBfdGhpczIxLmNhbGxBcGkobWVzc2VuZ2VyU2VydmljZS5ncm91cENoYXRNZXNzYWdlVXBkYXRlLCBwYXlsb2FkKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMjEuY2FsbEFwaShtZXNzZW5nZXJTZXJ2aWNlLmNoYXRNZXNzYWdlVXBkYXRlLCBwYXlsb2FkKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoImJyZWFrIiwgMjgpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zCiAgICAgICAgICAgICAgICBfdGhpczIxJENIQVQgPSBfdGhpczIxLkNIQVQsIGlkID0gX3RoaXMyMSRDSEFULmlkLCBlbXBsb3llZUlkID0gX3RoaXMyMSRDSEFULmVtcGxveWVlSWQ7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMjEuY2hhdFR5cGUgPT0gImdyb3VwIikgewogICAgICAgICAgICAgICAgICBfdGhpczIxLmNhbGxBcGkobWVzc2VuZ2VyU2VydmljZS5ncm91cENoYXRNZXNzYWdlVXBkYXRlLCBwYXlsb2FkKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChpZCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMjEuY2FsbEFwaShtZXNzZW5nZXJTZXJ2aWNlLmZvcndhcmRDaGF0LCBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgICAgIGNoYXRJZDogaWQKICAgICAgICAgICAgICAgICAgICB9LCBwYXlsb2FkKSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2VuZ2VyU2VydmljZS5jcmVhdGVDaGF0KGVtcGxveWVlSWQpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIxLmNhbGxBcGkobWVzc2VuZ2VyU2VydmljZS5mb3J3YXJkQ2hhdCwgX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXRJZDogcnMuZGF0YS5pZAogICAgICAgICAgICAgICAgICAgICAgfSwgcGF5bG9hZCkpOwogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsvLyBjYXRjaEVycihlcnIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJicmVhayIsIDI4KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmIChfdGhpczIxLmNoYXRUeXBlID09ICJncm91cCIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyMS5jYWxsQXBpKG1lc3NlbmdlclNlcnZpY2UuZ3JvdXBDaGF0TWVzc2FnZVVwZGF0ZSwgcGF5bG9hZCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMyMS5DSEFULmlkKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyMS5jYWxsQXBpKG1lc3NlbmdlclNlcnZpY2UucmVwbHlDaGF0LCBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICAgICAgICAgIGNoYXRJZDogX3RoaXMyMS5DSEFULmlkCiAgICAgICAgICAgICAgICAgICAgfSwgcGF5bG9hZCkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJicmVhayIsIDI4KTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMjEuY2hhdFR5cGUgPT0gImNoYXQiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyMS5zZW5kTXNnKG1lc3NhZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjEuc2VuZE1zZ0dyb3VwKG1lc3NhZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJicmVhayIsIDI4KTsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgIF90aGlzMjEuc3VibWl0dGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBtZXNzYWdlUmVmLmZvcm0ubWVzc2FnZSA9ICIiOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczIxLmluZGV4ID09IDIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyMS5pbmRleCA9IDA7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMjEuJHJlZnMuY2hhdENvbXBvbmVudC5nZXRDbGlja1RhYih7CiAgICAgICAgICAgICAgICAgICAgICBwYWdlOiAwLAogICAgICAgICAgICAgICAgICAgICAgaXRlbXNQZXJQYWdlOiAxMCwKICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaDogX3RoaXMyMS5zZWFyY2hDaGF0CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMjEuQ0hBVCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyMS51c2VybmFtZSA9IF90aGlzMjEuJHQoImNoYXQuY2hhdCIpOwogICAgICAgICAgICAgICAgICB9LCAzMDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBoYW5kbGVTY3JvbGw6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCgpIHsKICAgICAgdmFyIG1lc3NhZ2VSZWYgPSB0aGlzLiRyZWZzLm1lc3NhZ2VSZWY7CgogICAgICBpZiAobWVzc2FnZVJlZi4kcmVmcy5jdXJyZW50LiRlbCkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgbWVzc2FnZVJlZi4kcmVmcy5jdXJyZW50LlNpbXBsZUJhci5nZXRTY3JvbGxFbGVtZW50KCkuc2Nyb2xsVG9wID0gbWVzc2FnZVJlZi4kcmVmcy5jdXJyZW50LlNpbXBsZUJhci5nZXRTY3JvbGxFbGVtZW50KCkuc2Nyb2xsSGVpZ2h0ICsgMTUwMDsKICAgICAgICB9LCA1MDApOwogICAgICB9CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["\r\n<template>\r\n    <Layout>\r\n      <div class=\"col-md-12 text-center\">\r\n        <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.chat.title') }}</div>\r\n      </div>\r\n        <!-- <PageHeader :title=\"title\" :items=\"items\" /> -->\r\n        <div>\r\n            <vue-easy-lightbox\r\n                :visible=\"imageView\"\r\n                :imgs=\"`${baseUrl}${uploadPath}`\"\r\n                @hide=\"imageView = false\"\r\n            ></vue-easy-lightbox>\r\n            <b-modal\r\n                v-model=\"fileModal\"\r\n                size=\"md\"\r\n                :no-close-on-backdrop=\"true\"\r\n                hide-header\r\n                hide-footer\r\n                centered\r\n                body-class=\"p-0\"\r\n            >\r\n                <b-overlay\r\n                    :opacity=\"0.1\"\r\n                    :show=\"loaderFile\"\r\n                    rounded=\"sm\"\r\n                >\r\n                    <file-upload\r\n                        ref=\"fileComponent\"\r\n                        v-if=\"file\"\r\n                        @cancel=\"\r\n              () => {\r\n                fileModal = false;\r\n                file = null;\r\n              }\r\n            \"\r\n                        :file=\"file\"\r\n                        @sendFile=\"sendFile\"\r\n                    />\r\n                </b-overlay>\r\n            </b-modal>\r\n        </div>\r\n        <b-form-file\r\n            ref=\"fileRef\"\r\n            style=\"display: none\"\r\n            v-model=\"file\"\r\n        ></b-form-file>\r\n        <!-- THIS UPLOADER IS FOR USER AVATAR -->\r\n        <b-form-file\r\n            ref=\"userAvatarFileRef\"\r\n            style=\"display: none\"\r\n            v-model=\"fileForUserAvatar\"\r\n            @input=\"updateUserAvatar\"\r\n        ></b-form-file>\r\n        <div class=\"d-lg-flex\">\r\n            <div class=\"chat-leftsidebar mr-lg-4\">\r\n                <div class>\r\n                    <div class=\"py-4\">\r\n                        <div class=\"media align-items-center\">\r\n                            <div class=\"align-self-center mr-3\">\r\n                                <!-- <img\r\n                                    :src=\"require('@/assets/images/acru-logo-with-name.svg')\"\r\n                                    class=\"avatar-sm rounded-circle\"\r\n                                    alt\r\n                                /> -->\r\n                                <!-- <div\r\n                                    class=\"d-flex\"\r\n                                    style=\"justify-content: center\"\r\n                                >\r\n                                    <div class=\"position-relative\">\r\n                                        <img\r\n                                            class=\"rounded-circle bg-light avatar-md p-2\"\r\n                                            :src=\"`${imgUrl ? imgUrl : require('@/assets/images/acru-logo-with-name.svg')}`\"\r\n                                        />\r\n                                        <div\r\n                                            @click=\"changeImage\"\r\n                                            class=\"\r\n                                                avatar-edit-pencil\r\n                                                d-flex\r\n                                                align-items-center\r\n                                                justify-content-center\r\n                                                bg-primary\r\n                                            \"\r\n                                        >\r\n                                            <i\r\n                                                class=\"bx bx-pencil text-white\"\r\n                                                style=\"font-size: 1rem;\"\r\n                                            ></i>\r\n                                        </div>\r\n                                    </div>\r\n                                </div> -->\r\n                                <div class=\"avatar-container\">\r\n                                    <b-spinner\r\n                                        v-if=\"userAvatarLoading\"\r\n                                        variant=\"primary\"\r\n                                        label=\"Loading\"\r\n                                    ></b-spinner>\r\n                                    <img\r\n                                        v-else\r\n                                        class=\"rounded-circle bg-light p-2 image\"\r\n                                        :src=\"`${userAvatarUrlFromStorage ? publicPath+userAvatarUrlFromStorage : require('@/assets/images/users/default-avatar.png')}`\"\r\n                                    />\r\n                                    <div class=\"overlay\">\r\n                                        <div\r\n                                            @click=\"userAvatarClicked\"\r\n                                            class=\"\r\n                                                avatar-edit-pencil\r\n                                                d-flex\r\n                                                align-items-center\r\n                                                justify-content-center\r\n                                                bg-primary\r\n                                            \"\r\n                                        >\r\n                                            <i\r\n                                                class=\"mdi mdi-camera-plus-outline text-white\"\r\n                                                style=\"font-size: 2rem;\"\r\n                                            ></i>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"media-body\">\r\n                                <h5 class=\"font-size-15 mt-0 mb-1\">\r\n                                    {{ `${userFullName}` }}\r\n                                </h5>\r\n                                <p class=\"text-muted mb-0\">\r\n                                    <i class=\"mdi mdi-circle text-success align-middle mr-1\"></i>\r\n                                    {{ $t(\"active\") }}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"chat-leftsidebar-nav mt-0\">\r\n                    <b-tabs\r\n                        pills\r\n                        fill\r\n                        content-class=\"my-2\"\r\n                        v-model=\"index\"\r\n                    >\r\n                        <b-tab\r\n                            title=\"Tab 1\"\r\n                            active\r\n                        >\r\n                            <template v-slot:title>\r\n                                <i class=\"bx bx-chat font-size-20 d-sm-none\"></i>\r\n                                <span class=\"d-none d-sm-block\">{{ $t(\"chat.chat\") }}</span>\r\n                            </template>\r\n                            <div class=\"search-box chat-search-box py-2 mb-2\">\r\n                                <div class=\"position-relative\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        v-model=\"searchChat\"\r\n                                        :placeholder=\"$t('actions.filter')\"\r\n                                    />\r\n                                    <i class=\"bx bx-search-alt search-icon\"></i>\r\n                                </div>\r\n                            </div>\r\n                            <Chats\r\n                                ref=\"chatComponent\"\r\n                                :username=\"username\"\r\n                                @chatClick=\"chatUsername\"\r\n                                :ch=\"CHAT\"\r\n                            />\r\n                        </b-tab>\r\n                        <b-tab>\r\n                            <template v-slot:title>\r\n                                <i class=\"bx bx-group font-size-20 d-sm-none\"></i>\r\n                                <span class=\"d-none d-sm-block\">{{ $t(\"chat.groups\") }}</span>\r\n                            </template>\r\n                            <div class=\"search-box chat-search-box py-2 mb-2\">\r\n                                <div class=\"position-relative\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        class=\"form-control\"\r\n                                        v-model=\"searchGroup\"\r\n                                        :placeholder=\"$t('actions.filter')\"\r\n                                    />\r\n                                    <i class=\"bx bx-search-alt search-icon\"></i>\r\n                                </div>\r\n                            </div>\r\n                            <Groups\r\n                                :group=\"CHAT\"\r\n                                :username=\"username\"\r\n                                @groupClick=\"groupUsername\"\r\n                                ref=\"groupComponent\"\r\n                            />\r\n                        </b-tab>\r\n                        <b-tab>\r\n                            <template v-slot:title>\r\n                                <i class=\"bx bx-book-content font-size-20 d-sm-none\"></i>\r\n                                <span class=\"d-none d-sm-block\">{{ $t(\"chat.contacts\") }}</span>\r\n                            </template>\r\n                            <b-card-text>\r\n                                <div class=\"search-box chat-search-box py-2 mb-2\">\r\n                                    <div class=\"position-relative\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            class=\"form-control\"\r\n                                            v-model=\"searchContact\"\r\n                                            :placeholder=\"$t('actions.filter')\"\r\n                                        />\r\n                                        <i class=\"bx bx-search-alt search-icon\"></i>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <Contacts\r\n                                    :username=\"username\"\r\n                                    ref=\"contactComponent\"\r\n                                    @contactUsername=\"contactUsername\"\r\n                                />\r\n                            </b-card-text>\r\n                        </b-tab>\r\n                    </b-tabs>\r\n                </div>\r\n            </div>\r\n            <div v-if=\"mobileChat\">\r\n                <b-sidebar\r\n                    class=\"sidebar-chat\"\r\n                    shadow\r\n                    sidebar-class=\"p-0\"\r\n                    :no-header=\"true\"\r\n                    right\r\n                    v-model=\"isSidebarChat\"\r\n                >\r\n                    <Messages\r\n                        @editGroup=\"editGroup\"\r\n                        @deleteGroup=\"deleteGroup\"\r\n                        @addMembersToGroup=\"addMembersToGroup\"\r\n                        @viewGroupMembers=\"viewGroupMembers\"\r\n                        @contactUsername=\"contactUsername\"\r\n                        @searchMsg=\"searchMsg\"\r\n                        @back=\"isSidebarChat = false\"\r\n                        ref=\"messageRef\"\r\n                        @viewImageFromMessages=\"viewImageFromMessages\"\r\n                        @getMessagesByGroupId=\"getMessagesByGroupId\"\r\n                        @getMessagesByChatId=\"getMessagesByChatId\"\r\n                        @fileUpload=\"fileUpload\"\r\n                        @selectEmoji=\"selectEmoji\"\r\n                        @formSubmit=\"formSubmit\"\r\n                        @deleteMsg=\"deleteMsg\"\r\n                        :currentContact=\"CHAT\"\r\n                        :username=\"username\"\r\n                        :messages=\"messages\"\r\n                        :emojies=\"emojies\"\r\n                        :submitted=\"submitted\"\r\n                        :noMsg=\"noMsg\"\r\n                        :chatType=\"chatType\"\r\n                        :mobileChat=\"mobileChat\"\r\n                    />\r\n                </b-sidebar>\r\n            </div>\r\n\r\n            <Messages\r\n                v-else\r\n                @editGroup=\"editGroup\"\r\n                @deleteGroup=\"deleteGroup\"\r\n                @addMembersToGroup=\"addMembersToGroup\"\r\n                @viewGroupMembers=\"viewGroupMembers\"\r\n                @contactUsername=\"contactUsername\"\r\n                @searchMsg=\"searchMsg\"\r\n                ref=\"messageRef\"\r\n                @fileUpload=\"fileUpload\"\r\n                @viewImageFromMessages=\"viewImageFromMessages\"\r\n                @getMessagesByGroupId=\"getMessagesByGroupId\"\r\n                @getMessagesByChatId=\"getMessagesByChatId\"\r\n                @selectEmoji=\"selectEmoji\"\r\n                @formSubmit=\"formSubmit\"\r\n                @deleteMsg=\"deleteMsg\"\r\n                :currentContact=\"CHAT\"\r\n                :username=\"username\"\r\n                :messages=\"messages\"\r\n                :emojies=\"emojies\"\r\n                :submitted=\"submitted\"\r\n                :noMsg=\"noMsg\"\r\n                :chatType=\"chatType\"\r\n                :mobileChat=\"mobileChat\"\r\n            />\r\n        </div>\r\n        <b-modal\r\n            v-model=\"isEdit\"\r\n            size=\"lg\"\r\n            :no-close-on-backdrop=\"true\"\r\n            hide-header\r\n            hide-footer\r\n            body-class=\"p-0\"\r\n        >\r\n            <Edit\r\n                ref=\"editRef\"\r\n                :emojies=\"emojies\"\r\n                @cancel=\"isEdit = false\"\r\n                @save=\"saveEdit\"\r\n            />\r\n        </b-modal>\r\n\r\n        <!-- GROUP MEMBERS -->\r\n        <b-modal\r\n            v-model=\"groupMembersModal\"\r\n            size=\"lg\"\r\n            hide-footer\r\n            body-class=\"p-0\"\r\n            :no-close-on-backdrop=\"true\"\r\n        >\r\n            <div>\r\n                <div class=\"pl-5 pr-5 pb-2 pt-2\">\r\n                    <div class=\"search-box\">\r\n                        <div class=\"position-relative\">\r\n                            <input\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                v-model=\"searchGroupMembers\"\r\n                                :placeholder=\"$t('actions.filter')\"\r\n                            />\r\n                            <i class=\"bx bx-search-alt search-icon\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <GroupMembers\r\n                        @setTotalForGroupMember=\"setTotalForGroupMember\"\r\n                        @close=\"groupMembersModal = false\"\r\n                        :searchValue=\"searchGroupMembers\"\r\n                        :group=\"CHAT\"\r\n                        ref=\"groupMemberRef\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <template v-slot:modal-header>\r\n                <div\r\n                    style=\"width: 100%\"\r\n                    class=\"d-flex justify-content-between align-items-center\"\r\n                >\r\n                    <div class=\"d-flex\">\r\n                        <h5 class=\"pre\">{{ CHAT.groupName }}</h5>\r\n                    </div>\r\n                    <div>\r\n                        <b-button\r\n                            variant=\"white\"\r\n                            class=\"btn-label\"\r\n                        >\r\n                            {{ `${$t(\"chat.group_members\")}` }}\r\n                            <b-badge\r\n                                class=\"ml-1\"\r\n                                variant=\"primary\"\r\n                            >{{\r\n                `${totalGroupMember}`\r\n              }}</b-badge>\r\n                        </b-button>\r\n\r\n                        <div class=\"float-right\">\r\n                            <b-button\r\n                                class=\"mr-1\"\r\n                                variant=\"light\"\r\n                                @click=\"addMemberFromModal\"\r\n                            >\r\n                                <i class=\"fa fa-user-plus\"></i>\r\n                            </b-button>\r\n\r\n                            <b-button\r\n                                variant=\"light\"\r\n                                @click=\"groupMembersModal = false\"\r\n                            >\r\n                                <i class=\"fa fa-times\"></i>\r\n                            </b-button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n        </b-modal>\r\n\r\n        <!-- ADD GROUP MEMBERS -->\r\n        <b-modal\r\n            v-model=\"addGroupMembersModal\"\r\n            size=\"lg\"\r\n            hide-footer\r\n            body-class=\"p-0\"\r\n            :no-close-on-backdrop=\"true\"\r\n        >\r\n            <div>\r\n                <div class=\"pl-5 pr-5 pb-2 pt-2\">\r\n                    <div class=\"search-box\">\r\n                        <div class=\"position-relative\">\r\n                            <input\r\n                                type=\"text\"\r\n                                class=\"form-control\"\r\n                                v-model=\"searchGroupMembersAdd\"\r\n                                :placeholder=\"$t('actions.filter')\"\r\n                            />\r\n                            <i class=\"bx bx-search-alt search-icon\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <AddGroupMembers\r\n                        @close=\"closeModalAddMember\"\r\n                        :searchValue=\"searchGroupMembersAdd\"\r\n                        :group=\"CHAT\"\r\n                        ref=\"addGroupMemberRef\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <template v-slot:modal-header>\r\n                <div style=\"width: 100%\">\r\n                    <b-button\r\n                        class=\"float-right\"\r\n                        variant=\"light\"\r\n                        @click=\"addGroupMembersModal = false\"\r\n                    >\r\n                        <i class=\"fa fa-times\"></i>\r\n                    </b-button>\r\n                    <div class=\"d-flex\">\r\n                        <h5 class=\"pre\">{{ CHAT.groupName }}</h5>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n        </b-modal>\r\n\r\n        <!-- GROUP EDIT -->\r\n\r\n        <b-modal\r\n            v-model=\"editGroupModal\"\r\n            size=\"lg\"\r\n            body-class=\"p-0\"\r\n            :no-close-on-backdrop=\"true\"\r\n        >\r\n            <div>\r\n                <div>\r\n                    <EditGroup\r\n                        @close=\"editGroupModal = false\"\r\n                        :group=\"CHAT\"\r\n                        ref=\"editGroupRef\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <template v-slot:modal-header>\r\n                <div style=\"width: 100%\">\r\n                    <b-button\r\n                        class=\"float-right\"\r\n                        variant=\"light\"\r\n                        @click=\"editGroupModal = false\"\r\n                    >\r\n                        <i class=\"fa fa-times\"></i>\r\n                    </b-button>\r\n                </div>\r\n            </template>\r\n\r\n            <template v-slot:modal-footer>\r\n                <div style=\"width: 100%\">\r\n                    <b-button\r\n                        size=\"lg\"\r\n                        class=\"float-right\"\r\n                        variant=\"success\"\r\n                        @click=\"saveEditedData\"\r\n                    >\r\n                        <b-overlay\r\n                            :opacity=\"0.1\"\r\n                            :show=\"loaderEdit\"\r\n                            rounded=\"sm\"\r\n                        >\r\n                            <i class=\"fa fa-save\"></i>\r\n                            {{ $t(\"actions.save\") }}\r\n                        </b-overlay>\r\n                    </b-button>\r\n                </div>\r\n            </template>\r\n        </b-modal>\r\n        <!-- end row -->\r\n    </Layout>\r\n</template>\r\n<style scoped>\r\n.emoji:hover {\r\n    cursor: pointer;\r\n    background: black;\r\n    border-radius: 5px;\r\n}\r\n</style>\r\n<script>\r\nimport VueEasyLightbox from \"vue-easy-lightbox\";\r\nimport Layout from \"@/router/layouts/main\";\r\nimport appConfig from \"@/app.config\";\r\n// import PageHeader from \"@/components/page-header\";\r\n\r\nimport { mapActions, mapState } from \"vuex\";\r\n\r\nimport messengerService from \"@/shared/services/messengerService\";\r\nimport { TokenService } from \"@/shared/services/storage.service\"\r\n\r\nimport fileUpload from \"./file-upload\";\r\nimport Chats from \"./chats\";\r\nimport Contacts from \"./contacts\";\r\nimport Groups from \"./groups\";\r\nimport Edit from \"./edit\";\r\nimport Messages from \"./messages\";\r\nimport GroupMembers from \"./groupMembers\";\r\nimport AddGroupMembers from \"./addNewMembersToGroup.vue\";\r\nimport EditGroup from \"./editGroup.vue\";\r\n/**\r\n * Chat Component\r\n */\r\nimport i18n from \"@/i18n\";\r\nexport default {\r\n    watch: {\r\n        innerWidth: {\r\n            handler (v) {\r\n                this.setWindowWidthPrivite(v);\r\n            },\r\n        },\r\n        index (v) {\r\n            if (v == 2) {\r\n                this.$refs.contactComponent.getClickTab({\r\n                    page: 0,\r\n                    itemsPerPage: 10,\r\n                    search: this.searchContact,\r\n                });\r\n            } else if (v == 0) {\r\n                this.$refs.chatComponent.getClickTab({\r\n                    page: 0,\r\n                    itemsPerPage: 10,\r\n                    search: this.searchChat,\r\n                });\r\n            } else if (v == 1) {\r\n                this.$refs.groupComponent.getClickTab({\r\n                    page: 0,\r\n                    itemsPerPage: 10,\r\n                    search: this.searchGroup,\r\n                });\r\n            }\r\n        },\r\n        file: {\r\n            handler (v) {\r\n                if (v) {\r\n                    this.fileModal = true;\r\n                    setTimeout(() => {\r\n                        this.$refs.fileComponent.setNameSize(v.name, v.size);\r\n                    }, 300);\r\n                } else {\r\n                    this.$refs.fileComponent.setNameSize(null, null);\r\n                }\r\n            },\r\n        },\r\n        searchGroup (v) {\r\n            if (this.index == 1) {\r\n                this.$refs.groupComponent.getClickTab({\r\n                    page: 0,\r\n                    itemsPerPage: 10,\r\n                    search: this.searchGroup,\r\n                });\r\n            }\r\n        },\r\n\r\n        searchChat (v) {\r\n            if (this.index == 0) {\r\n                this.$refs.chatComponent.getClickTab({\r\n                    page: 0,\r\n                    itemsPerPage: 10,\r\n                    search: this.searchChat,\r\n                });\r\n            }\r\n        },\r\n        searchContact (v) {\r\n            if (this.index == 2) {\r\n                this.$refs.contactComponent.getClickTab({\r\n                    page: 0,\r\n                    itemsPerPage: 10,\r\n                    search: this.searchContact,\r\n                });\r\n            }\r\n        },\r\n    },\r\n    page: {\r\n        title: i18n.t(\"chat.chat\"),\r\n        meta: [\r\n            {\r\n                name: \"description\",\r\n                content: appConfig.description,\r\n            },\r\n        ],\r\n    },\r\n    components: {\r\n        Layout,\r\n        // PageHeader,\r\n        fileUpload,\r\n        Chats,\r\n        Contacts,\r\n        Groups,\r\n        Edit,\r\n        Messages,\r\n        VueEasyLightbox,\r\n        GroupMembers,\r\n        AddGroupMembers,\r\n        EditGroup,\r\n    },\r\n    data () {\r\n        return {\r\n            publicPath: process.env.BASE_URL,\r\n            localUserAvatarUrl: null,\r\n            userAvatarLoading: false,\r\n            innerWidth: window.innerWidth,\r\n            userFullName: TokenService.getFullName(),\r\n            userId: TokenService.getUserId(),\r\n            baseUrl: process.env.BASE_URL,\r\n            loaderEdit: false,\r\n            editGroupModal: false,\r\n            totalGroupMember: 0,\r\n            searchGroupMembers: \"\",\r\n            groupMembersModal: false,\r\n            pag: { page: 0, itemsPerPage: 10 },\r\n            loaderFile: false,\r\n            chatId: null,\r\n            uploadPath: null,\r\n            imageView: false,\r\n            emojies: [\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n                \"\",\r\n            ],\r\n            isEdit: false,\r\n            searchValue: \"\",\r\n            groupModal: false,\r\n            fileModal: false,\r\n            file: null,\r\n            fileForUserAvatar: null,\r\n\r\n            chatData: [],\r\n            index: 0,\r\n            isSidebarChat: false,\r\n\r\n            noMsg: false,\r\n            CHAT: null,\r\n            loader: false,\r\n            submitted: false,\r\n\r\n            title: this.$t(\"chat.chat\"),\r\n            username: this.$t(\"chat.chat\"),\r\n            items: [\r\n                {\r\n                    text: this.$t(\"menu\"),\r\n                    href: \"/\",\r\n                },\r\n                {\r\n                    text: this.$t(\"chat.chat\"),\r\n                    active: true,\r\n                },\r\n            ],\r\n            chatType: \"chat\",\r\n\r\n            // FORCHATMESSAGES\r\n            page: 0,\r\n\r\n            groupChatId: null,\r\n            searchChat: \"\",\r\n            searchContact: \"\",\r\n            searchGroup: \"\",\r\n            mobileChat: false,\r\n            addGroupMembersModal: false,\r\n            searchGroupMembersAdd: \"\",\r\n        };\r\n    },\r\n    created () {\r\n        window.addEventListener(\"resize\", () => {\r\n            this.innerWidth = window.innerWidth;\r\n        });\r\n        this.setWindowWidthPrivite(this.innerWidth);\r\n    },\r\n    computed: {\r\n        ...mapState(\"messenger\", [\r\n            \"chatListMessages\",\r\n            \"chatTotalMessages\",\r\n            \"groupChatListMessages\",\r\n        ]),\r\n        // ...mapState(\"employee\", [\"user\"]),\r\n        messages () {\r\n            if (this.chatType == \"group\") {\r\n                return this.groupChatListMessages;\r\n            } else {\r\n                return this.chatListMessages;\r\n            }\r\n        },\r\n        userAvatarUrlFromStorage () {\r\n            let triggerForUrl = this.localUserAvatarUrl\r\n            return TokenService.getUserAvatarUrl()\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(\"messenger\", [\r\n            \"getByChatId\",\r\n            \"sendMessage\",\r\n            \"getByGroupChatId\",\r\n            \"sendMessageGroup\",\r\n        ]),\r\n        resetMessagesComponentProps () {\r\n            this.CHAT = null\r\n            this.username = this.$t(\"chat.chat\")\r\n            this.$store.commit('messenger/setListGroupChatMesseges', { list: [], total: 0 })\r\n            this.submitted = false\r\n            this.noMsg = false\r\n        },\r\n        updateUserAvatar () {\r\n            this.userAvatarLoading = true\r\n            messengerService\r\n                .changeUserAvatar(this.fileForUserAvatar, this.userId)\r\n                .then((rs) => {\r\n                    this.userAvatarLoading = false\r\n                    if (rs.data) {\r\n                        this.localUserAvatarUrl = rs.data\r\n                        TokenService.setUserAvatarUrl(rs.data)\r\n                    }\r\n                })\r\n                .catch((e) => {\r\n                    console.log(e)\r\n                    this.userAvatarLoading = false\r\n                })\r\n        },\r\n        userAvatarClicked () {\r\n            this.$refs.userAvatarFileRef.$el.firstChild.click()\r\n        },\r\n        closeModalAddMember () {\r\n            this.addGroupMembersModal = false;\r\n            this.searchGroupMembersAdd = \"\";\r\n            if (this.groupMembersModal && this.$refs.groupMemberRef) {\r\n                this.$refs.groupMemberRef.reset(this.searchGroupMembers);\r\n            }\r\n        },\r\n        addMemberFromModal () {\r\n            this.addMembersToGroup();\r\n        },\r\n        saveEditedData () {\r\n            this.loaderEdit = true;\r\n            let { file, name } = this.$refs.editGroupRef;\r\n            messengerService\r\n                .editGroup(file, name, this.CHAT.id)\r\n                .then((rs) => {\r\n                    if (rs.data) {\r\n                        if (this.index == 1) {\r\n                            this.$refs.groupComponent.getClickTab({\r\n                                page: 0,\r\n                                itemsPerPage: 10,\r\n                                search: this.searchGroup,\r\n                            });\r\n                        }\r\n                        this.editGroupModal = false;\r\n                        this.setUsername(rs.data.groupName);\r\n                    }\r\n                })\r\n                .catch((e) => {\r\n                    // catchErr(e);\r\n                })\r\n                .finally(() => {\r\n                    this.loaderEdit = false;\r\n                });\r\n        },\r\n        editGroup () {\r\n            this.editGroupModal = true;\r\n            setTimeout(() => {\r\n                this.$refs.editGroupRef.setEditedData(\r\n                    this.CHAT.groupName,\r\n                    `${this.baseUrl}/${this.CHAT.uploadPath}`\r\n                );\r\n            }, 300);\r\n        },\r\n        deleteGroup () {\r\n            this.$bvModal.msgBoxConfirm(this.$t('messages.delete_title'), {\r\n                okTitle: this.$t('actions.confirm'),\r\n                cancelTitle: this.$t('actions.cancel')\r\n            })\r\n                .then(value => {\r\n                    if (value) {\r\n                        messengerService\r\n                            .deleteGroup(this.CHAT.id)\r\n                            .then((rs) => {\r\n                                if (this.index == 1) {\r\n                                    this.$refs.groupComponent.getClickTab({\r\n                                        page: 0,\r\n                                        itemsPerPage: 10,\r\n                                        search: this.searchGroup,\r\n                                    });\r\n                                }\r\n                                this.resetMessagesComponentProps()\r\n                            })\r\n                            .catch(e => {\r\n                                console.log(e)\r\n                            })\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    // An error occurred\r\n                })\r\n        },\r\n        addMembersToGroup () {\r\n            this.addGroupMembersModal = true;\r\n            this.searchGroupMembersAdd = \"\";\r\n\r\n            setTimeout(() => {\r\n                this.$refs.addGroupMemberRef.reset(this.searchGroupMembersAdd);\r\n            }, 300);\r\n        },\r\n        setTotalForGroupMember (v) {\r\n            this.totalGroupMember = v.total;\r\n        },\r\n        viewGroupMembers () {\r\n            this.groupMembersModal = true;\r\n            this.searchGroupMembers = \"\";\r\n            setTimeout(() => {\r\n                this.$refs.groupMemberRef.reset(this.searchGroupMembers);\r\n            }, 300);\r\n        },\r\n        //MESSAGE SEARCHING CHAT AND GROUP\r\n        async searchMsg (v) {\r\n            if (this.CHAT.id) {\r\n                const arg = {\r\n                    pag: this.pag,\r\n                    chatId: this.CHAT.id,\r\n                    search: v,\r\n                };\r\n                if (this.chatType == \"group\") {\r\n                    await this.getByGroupChatId(arg);\r\n                } else {\r\n                    await this.getByChatId(arg);\r\n                }\r\n            }\r\n        },\r\n        //END\r\n\r\n        viewImageFromMessages (path) {\r\n            this.imageView = true;\r\n            this.uploadPath = path;\r\n        },\r\n        setWindowWidthPrivite (v) {\r\n            if (v < 992) {\r\n                this.mobileChat = true;\r\n            } else {\r\n                this.mobileChat = false;\r\n            }\r\n        },\r\n        selectEmoji (e) {\r\n            this.$refs.messageRef.form.message = String(\r\n                this.$refs.messageRef.form.message.concat(e)\r\n            );\r\n        },\r\n\r\n        //DELETE MESSAGE\r\n        deleteMsg (id, groupChatId, chatId) {\r\n            const deleteApi = (api, arg) => {\r\n                api(arg)\r\n                    .then(() => console.log('deleted'))\r\n                    .catch((err) => {\r\n                        // catchErr(err)\r\n                    });\r\n            };\r\n            if (this.chatType == \"group\") {\r\n                deleteApi(messengerService.groupChatMessageDelete, {\r\n                    id,\r\n                    groupChatId,\r\n                });\r\n            } else {\r\n                deleteApi(messengerService.chatMessageDelete, { id, chatId });\r\n            }\r\n        },\r\n\r\n        saveEdit ({ message, file }) {\r\n            if (this.chatType == \"group\") {\r\n                if (this.groupChatId) {\r\n                    messengerService\r\n                        .groupChatMessageUpdate({\r\n                            id: this.groupChatId,\r\n                            message: message,\r\n                        })\r\n                        .then((res) => { })\r\n                        .catch((err) => {\r\n                            // catchErr(err);\r\n                        });\r\n                }\r\n            } else {\r\n                messengerService\r\n                    .chatMessageUpdate({\r\n                        id: this.chatId,\r\n                        message: message,\r\n                    })\r\n                    .then((res) => { })\r\n                    .catch((err) => {\r\n                        // catchErr(err);\r\n                    });\r\n            }\r\n        },\r\n        updateMsg ({ id, message, uploadPath, fileName }) {\r\n            if (this.chatType == \"group\") {\r\n                this.isEdit = true;\r\n                this.groupChatId = id;\r\n                setTimeout(() => {\r\n                    this.$refs.editRef.setMsg(message);\r\n                    this.$refs.editRef.setFile(fileName, uploadPath);\r\n                }, 200);\r\n            } else {\r\n                this.isEdit = true;\r\n                this.chatId = id;\r\n                setTimeout(() => {\r\n                    this.$refs.editRef.setMsg(message);\r\n                    this.$refs.editRef.setFile(fileName, uploadPath);\r\n                }, 200);\r\n            }\r\n        },\r\n        finishSendFile (message, id, employeeId, file) {\r\n            this.loaderFile = true;\r\n            const messageRef = this.$refs.messageRef;\r\n            let { toastData, toastStatus } = messageRef;\r\n            if (toastStatus == \"reply\") {\r\n                this.callApi(\r\n                    messengerService.replyChat,\r\n                    {\r\n                        chatId: id,\r\n                        message: message,\r\n                        file: file,\r\n                        id: toastData.id,\r\n                    },\r\n                    () => {\r\n                        this.$refs.fileComponent.reset();\r\n                        this.file = null;\r\n                        this.fileModal = false;\r\n                        this.loaderFile = false;\r\n                        this.handleScroll();\r\n                    }\r\n                );\r\n            } else {\r\n                let data = {\r\n                    chatId: id || employeeId,\r\n                    ownerId: JSON.parse(localStorage.getItem(\"user_id\")),\r\n                    file: file,\r\n                    message: message,\r\n                };\r\n\r\n                messengerService\r\n                    .sendFile(data)\r\n                    .then((rs) => {\r\n                        this.$refs.fileComponent.reset();\r\n                        this.file = null;\r\n                        this.fileModal = false;\r\n                        this.loaderFile = false;\r\n                        this.handleScroll();\r\n                    })\r\n                    .catch((err) => {\r\n                        // catchErr(err);\r\n                    });\r\n            }\r\n        },\r\n\r\n        sendFile (message, file) {\r\n            if (this.chatType == \"chat\") {\r\n                const { id, ownerId, employeeId } = this.CHAT;\r\n                if (ownerId || id) {\r\n                    this.finishSendFile(message, id, employeeId, file);\r\n                } else {\r\n                    this.finishSendFileFromContact(file, message);\r\n                }\r\n            } else {\r\n                this.finishSendFileGroup(message, this.CHAT.id, file);\r\n            }\r\n        },\r\n        finishSendFileFromContact (file, message) {\r\n            messengerService\r\n                .createChat(this.CHAT.employeeId)\r\n                .then(async (rs) => {\r\n                    const { id, employeeId } = rs.data;\r\n                    if (id) {\r\n                        await this.getByChatId({ pag: this.pag, chatId: id });\r\n                        await this.finishSendFile(message, id, employeeId, file);\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    // catchErr(err);\r\n                });\r\n        },\r\n        finishSendFileGroup (message, groupId, file) {\r\n            this.loaderFile = true;\r\n            let data = {\r\n                groupChatId: groupId,\r\n                ownerId: JSON.parse(localStorage.getItem(\"user_id\")),\r\n                file: file,\r\n                message: message,\r\n            };\r\n            messengerService.sendImageGroup(data).then((rs) => {\r\n                this.$refs.fileComponent.reset();\r\n                this.file = null;\r\n                this.fileModal = false;\r\n                this.loaderFile = false;\r\n                this.handleScroll();\r\n            });\r\n        },\r\n        fileUpload () {\r\n            this.$refs.fileRef.$el.firstChild.click();\r\n        },\r\n\r\n        getMessagesByChatId (cmp) {\r\n            if (this.CHAT.id) {\r\n                messengerService\r\n                    .getByChatId({\r\n                        pag: { page: (this.page += 1), itemsPerPage: 10 },\r\n                        chatId: this.CHAT.id,\r\n                    })\r\n                    .then(async ({ data }) => {\r\n                        this.$store.commit(\"messenger/pushItems\", data.list);\r\n                        if (data.list.length > 0) {\r\n                            cmp.scrollTop = 800;\r\n                            this.noMsg = false;\r\n                        } else {\r\n                            this.noMsg = true;\r\n                            this.page + -1;\r\n                        }\r\n                    })\r\n                    .catch((err) => {\r\n                        // catchErr(err);\r\n                    });\r\n                this.handleScroll();\r\n            }\r\n        },\r\n        getMessagesByGroupId (cmp) {\r\n            messengerService\r\n                .getByGroupChatId({\r\n                    pag: { page: (this.page += 1), itemsPerPage: 10 },\r\n                    chatId: this.CHAT.id,\r\n                })\r\n                .then(async ({ data }) => {\r\n                    if (data.list.length > 0) {\r\n                        cmp.scrollTop = 1500;\r\n                        this.$store.commit(\"messenger/pushGroupItems\", data.list);\r\n                        this.noMsg = false;\r\n                    } else {\r\n                        this.noMsg = true;\r\n                        this.page + -1;\r\n                    }\r\n                });\r\n        },\r\n\r\n        /**\r\n         * Get the name of user\r\n         */\r\n        setUsername (name) {\r\n            this.username = name;\r\n        },\r\n        async chatUsername (contact) {\r\n            this.chatType = \"chat\";\r\n            this.noMsg = false;\r\n            this.page = 0;\r\n\r\n            this.CHAT = contact;\r\n            await this.$store.commit(\"messenger/setCurrentChat\", contact);\r\n            await this.setUsername(contact.myName);\r\n            await this.getByChatId({\r\n                pag: { page: 0, itemsPerPage: 10 },\r\n                chatId: contact.id,\r\n            });\r\n            await this.setMobileChat();\r\n        },\r\n        setMobileChat () {\r\n            if (this.mobileChat) {\r\n                this.isSidebarChat = true;\r\n            }\r\n        },\r\n        async groupUsername (group) {\r\n            this.$nextTick(() => {\r\n                this.noMsg = false;\r\n                this.page = 0;\r\n                this.chatType = \"group\";\r\n                this.CHAT = group;\r\n            });\r\n            await this.$store.commit(\"messenger/setCurrentChat\", group);\r\n            await this.setUsername(group.groupName);\r\n            await this.getByGroupChatId({\r\n                pag: { page: 0, itemsPerPage: 10 },\r\n                chatId: group.id,\r\n            });\r\n            await this.setMobileChat();\r\n        },\r\n        async contactUsername (contact) {\r\n            this.$nextTick(() => {\r\n                this.noMsg = false;\r\n                this.CHAT = contact;\r\n                this.chatType = \"chat\";\r\n                this.page = 0;\r\n            });\r\n            await this.$store.commit(\"messenger/setCurrentChat\", contact);\r\n            await this.setUsername(\r\n                ` ${contact.lastName} ${contact.firstName} ${contact.middleName}`\r\n            );\r\n            if (contact.id) {\r\n                await this.getByChatId({\r\n                    pag: { page: 0, itemsPerPage: 10 },\r\n                    chatId: contact.id,\r\n                });\r\n            } else {\r\n                await this.$store.commit(\"messenger/setListChatMesseges\", {\r\n                    total: 0,\r\n                    list: [],\r\n                });\r\n            }\r\n\r\n            await this.setMobileChat();\r\n        },\r\n\r\n        /**\r\n         * Char form Submit\r\n         */\r\n        // eslint-disable-next-line no-unused-vars\r\n        sendMsgGroup (message) {\r\n            this.sendMessageGroup(\r\n                JSON.stringify({\r\n                    message: message,\r\n                    groupChatId: this.CHAT.id,\r\n                    ownerId: JSON.parse(localStorage.getItem(\"user_id\")),\r\n                })\r\n            );\r\n            // this.form.message = \"\";\r\n            this.handleScroll();\r\n        },\r\n        sendMsgApi (msg, chatId) {\r\n            this.sendMessage(\r\n                JSON.stringify({\r\n                    message: msg,\r\n                    chatId: chatId || empId,\r\n                    ownerId: JSON.parse(localStorage.getItem(\"user_id\")),\r\n                })\r\n            );\r\n        },\r\n        async sendMsg (message) {\r\n            if (this.CHAT.ownerId) {\r\n                this.sendMsgApi(message, this.CHAT.id || this.CHAT.employeeId);\r\n            } else {\r\n                if (this.CHAT.id) {\r\n                    await this.sendMsgApi(message, this.CHAT.id || this.CHAT.employeeId);\r\n                } else {\r\n                    messengerService\r\n                        .createChat(this.CHAT.employeeId)\r\n                        .then(async (rs) => {\r\n                            if (rs.data) {\r\n                                await this.getByChatId({\r\n                                    pag: { page: 0, itemsPerPage: 10 },\r\n                                    chatId: rs.data.id,\r\n                                });\r\n                                this.sendMsgApi(message, rs.data.id || rs.data.employeeId);\r\n                                this.isSidebarChat = false;\r\n                            }\r\n                        })\r\n                        .catch((err) => {\r\n                            // catchErr(err);\r\n                        });\r\n                }\r\n            }\r\n            this.handleScroll();\r\n        },\r\n        callApi (api, arg, func = null) {\r\n            const messageRef = this.$refs.messageRef;\r\n            const hideToast = () => {\r\n                if (messageRef) messageRef.replyMsg(null, \"hidden\");\r\n                this.handleScroll();\r\n                if (func) {\r\n                    func();\r\n                }\r\n            };\r\n            api(arg)\r\n                .then(() => hideToast())\r\n                .catch((e) => {\r\n                    // catchErr(e)\r\n                });\r\n        },\r\n        //MESSAGE SEND API\r\n        async formSubmit (e) {\r\n            const messageRef = this.$refs.messageRef;\r\n\r\n            this.submitted = true;\r\n            let { toastData, toastStatus } = messageRef;\r\n\r\n            const message = messageRef.form.message;\r\n            // stop here if form is invalid\r\n            if ((!message || message.trim().length == 0) && toastStatus != 'forward') {\r\n                messageRef.$refs.msgInput.$el.focus()\r\n                return;\r\n            } else {\r\n                let payload = {\r\n                    id: toastData ? toastData.id : null,\r\n                    message: message,\r\n                };\r\n                switch (toastStatus) {\r\n                    case \"edit\":\r\n                        if (this.chatType == \"group\") {\r\n                            this.callApi(messengerService.groupChatMessageUpdate, payload);\r\n                        } else {\r\n                            this.callApi(messengerService.chatMessageUpdate, payload);\r\n                        }\r\n                        break;\r\n\r\n                    case \"forward\":\r\n                        // eslint-disable-next-line no-case-declarations\r\n                        const { id, employeeId } = this.CHAT;\r\n                        if (this.chatType == \"group\") {\r\n                            this.callApi(messengerService.groupChatMessageUpdate, payload);\r\n                        } else {\r\n                            if (id) {\r\n                                this.callApi(messengerService.forwardChat, {\r\n                                    chatId: id,\r\n                                    ...payload,\r\n                                });\r\n                            } else {\r\n                                messengerService\r\n                                    .createChat(employeeId)\r\n                                    .then((rs) => {\r\n                                        this.callApi(messengerService.forwardChat, {\r\n                                            chatId: rs.data.id,\r\n                                            ...payload,\r\n                                        });\r\n                                    })\r\n                                    .catch((err) => {\r\n                                        // catchErr(err);\r\n                                    });\r\n                            }\r\n                        }\r\n                        break;\r\n                    case \"reply\":\r\n                        if (this.chatType == \"group\") {\r\n                            this.callApi(messengerService.groupChatMessageUpdate, payload);\r\n                        } else {\r\n                            if (this.CHAT.id) {\r\n                                this.callApi(messengerService.replyChat, {\r\n                                    chatId: this.CHAT.id,\r\n                                    ...payload,\r\n                                });\r\n                            }\r\n                        }\r\n                        break;\r\n\r\n                    default:\r\n                        if (this.chatType == \"chat\") {\r\n                            await this.sendMsg(message);\r\n                        } else {\r\n                            await this.sendMsgGroup(message);\r\n                        }\r\n                        break;\r\n                    // }\r\n                }\r\n                this.submitted = false;\r\n                messageRef.form.message = \"\";\r\n                if (this.index == 2) {\r\n                    this.index = 0;\r\n                    setTimeout(() => {\r\n                        this.$refs.chatComponent.getClickTab({\r\n                            page: 0,\r\n                            itemsPerPage: 10,\r\n                            search: this.searchChat,\r\n                        });\r\n                        this.CHAT = null;\r\n                        this.username = this.$t(\"chat.chat\");\r\n                    }, 300);\r\n                }\r\n            }\r\n        },\r\n\r\n        handleScroll () {\r\n            const messageRef = this.$refs.messageRef;\r\n            if (messageRef.$refs.current.$el) {\r\n                setTimeout(() => {\r\n                    messageRef.$refs.current.SimpleBar.getScrollElement().scrollTop =\r\n                        messageRef.$refs.current.SimpleBar.getScrollElement().scrollHeight +\r\n                        1500;\r\n                }, 500);\r\n            }\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.sidebar-chat {\r\n    .b-sidebar {\r\n        width: 100vw;\r\n        background: white;\r\n    }\r\n}\r\n::v-deep.avatar-edit-pencil {\r\n    width: 100%;\r\n    height: 100%;\r\n    transition: all 0.5s ease;\r\n    box-shadow: 5px 5px 5px #eee;\r\n    border-radius: 50px;\r\n    border: 3px solid white;\r\n    cursor: pointer;\r\n    /* background: #556ee6; */\r\n}\r\n::v-deep.avatar-container {\r\n    position: relative;\r\n    width: 5rem;\r\n    height: 5rem;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n::v-deep.image {\r\n    display: block;\r\n    width: 5rem;\r\n    height: 5rem;\r\n}\r\n\r\n::v-deep.overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    opacity: 0;\r\n    transition: 0.3s ease;\r\n}\r\n\r\n::v-deep.avatar-container:hover .overlay {\r\n    opacity: 1;\r\n}\r\n\r\n::v-deep.icon {\r\n    color: white;\r\n    font-size: 100px;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    -ms-transform: translate(-50%, -50%);\r\n    text-align: center;\r\n}\r\n\r\n::v-deep.fa-user:hover {\r\n    color: #eee;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/modules/chat"}]}