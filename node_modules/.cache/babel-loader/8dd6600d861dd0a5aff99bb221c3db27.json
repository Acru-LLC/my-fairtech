{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\ReestrHistoryForContractor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\reestr-contractors\\modules\\natural\\ReestrHistoryForContractor.vue","mtime":1677211559852},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CnZhciBNQUlOX0FQSV9VUkwgPSAncmVlc3RyL2NvbnRyYWN0b3ItcmVlc3RyLWRvY3VtZW50cyc7CnZhciBBUFBFTkRfQVBJX1VSTF9OQVRVUkFMID0gJ2Zvci1jb250cmFjdG9yL2VzdGVzdHZlbml5JzsKdmFyIEFQUEVORF9BUElfVVJMX0RPTUlOQU5UID0gJ2Zvci1jb250cmFjdG9yL2RhbWluaXJpdXNoaXknOwppbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UnOwppbXBvcnQgaGVscGVyU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUmVlc3RySGlzdG9yeUZvckNvbnRyYWN0b3JOYXR1cmFsJywKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHVibGljUGF0aDogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgICAgIC8vIGFjdGl2ZVRhYklkeEZvckNvbnRyYWN0b3I6IDAsCiAgICAgIC8vIGFjdGl2ZVRhYklkeE9mSW5uZXJUYWJzOiAwLAogICAgICBmb3VuZGVyVGFiczogW3sKICAgICAgICBrZXk6ICJsZWdhbCIsCiAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ2NvbHVtbi5sZWdhbF9lbnRpdHknKSwKICAgICAgICBmaWVsZHM6IFt7CiAgICAgICAgICBsYWJlbDogIiMiLAogICAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICBrZXk6ICJpbmRleCIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICduYW1lJywKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ubmFtZScpCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAndGluJywKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uaW5uJykKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdmb3VuZGVyVHlwZScsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnR5cGUnKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2ZvdW5kZXJTaGFyZVBlcmNlbnQnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zaGFyZV9wZXJjZW50YWdlJykKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdmb3VuZGVyU2hhcmVTdW0nLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zaGFyZV9zdW0nKQogICAgICAgIH1dCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpbmRpdmlkdWFsIiwKICAgICAgICB0aXRsZTogdGhpcy4kdCgnY29sdW1uLmluZGl2aWR1YWwnKSwKICAgICAgICBmaWVsZHM6IFt7CiAgICAgICAgICBsYWJlbDogIiMiLAogICAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgICBrZXk6ICJpbmRleCIKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdmdWxsTmFtZScsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLm5hbWUnKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3RpbicsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmlubicpCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncGluZmwnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5wZXJzb25hbF9udW1iZXInKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2ZvdW5kZXJUeXBlJywKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4udHlwZScpCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZm91bmRlclNoYXJlUGVyY2VudCcsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnNoYXJlX3BlcmNlbnRhZ2UnKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2ZvdW5kZXJTaGFyZVN1bScsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnNoYXJlX3N1bScpCiAgICAgICAgfV0KICAgICAgfV0sCiAgICAgIGNvbnRyYWN0b3JUYWJzOiBbewogICAgICAgIGtleTogImdlbmVyYWxJbmZvIiwKICAgICAgICB0aXRsZTogdGhpcy4kdCgnY29sdW1uLmdlbmVyYWxfaW5mbycpLAogICAgICAgIGZpZWxkczogW3sKICAgICAgICAgIGxhYmVsOiAiIyIsCiAgICAgICAgICB0aENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIGtleTogImluZGV4IgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uZnVsbF9uYW1lJyksCiAgICAgICAgICBrZXk6ICJmdWxsTmFtZSIsCiAgICAgICAgICB0aFN0eWxlOiB7CiAgICAgICAgICAgICdtaW4td2lkdGgnOiAnMTdyZW0nCiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zdXBlcmlvcl9wYXJlbnQnKSwKICAgICAgICAgIGtleTogInBhcmVudCIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnN0YXR1cycpLAogICAgICAgICAga2V5OiAic3RhdHVzIgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdzdWJtb2R1bGVzLmZvcm1fb2Zfb3duZXJzaGlwLnRpdGxlJyksCiAgICAgICAgICBrZXk6ICJmb3JtT2ZPd25lcnNoaXAiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5jYW5fbG9naW4nKSwKICAgICAgICAgIGtleTogImNhblJlZ2lzdGVyIiwKICAgICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmlubicpLAogICAgICAgICAga2V5OiAiaW5uIgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ub2tlZCcpLAogICAgICAgICAga2V5OiAib2tlZCIKICAgICAgICB9LAogICAgICAgIC8vIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5kaXJlY3RvcicpLCBrZXk6ICJkaXJlY3RvciIgfSwKICAgICAgICAvLyB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uYWNjb3VudGVyJyksIGtleTogImFjY291bnRlciIgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLm1vYmlsZV9udW1iZXInKSwKICAgICAgICAgIGtleTogIm1vYmlsZU51bWJlciIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnJlZ2lvbicpLAogICAgICAgICAga2V5OiAicmVnaW9uTmFtZSIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmRpc3RyaWN0JyksCiAgICAgICAgICBrZXk6ICJkaXN0cmljdE5hbWUiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5hZGRyZXNzJyksCiAgICAgICAgICBrZXk6ICJhZGRyZXNzIgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ucGhvbmVfbnVtYmVyJyksCiAgICAgICAgICBrZXk6ICJwaG9uZU51bWJlciIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLm1haWwnKSwKICAgICAgICAgIGtleTogImVtYWlsIgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uZmF4X251bWJlcicpLAogICAgICAgICAga2V5OiAiZmF4TnVtYmVyIgogICAgICAgIH1dCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJkaXJlY3RvciIsCiAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ2NvbHVtbi5kaXJlY3RvcicpLAogICAgICAgIGZpZWxkczogW3sKICAgICAgICAgIGtleTogJ2luZGV4JywKICAgICAgICAgIGxhYmVsOiAnIycKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdkaXJlY3Rvck9yQWNjb3VudGVyRnVsbE5hbWUnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5uYW1lJykKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdpbm4nLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5pbm4nKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3BuZmwnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5wZXJzb25hbF9udW1iZXInKQogICAgICAgIH1dCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJhY2NvdW50ZXIiLAogICAgICAgIHRpdGxlOiB0aGlzLiR0KCdjb2x1bW4uYWNjb3VudGVyJyksCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAnaW5kZXgnLAogICAgICAgICAgbGFiZWw6ICcjJwogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2RpcmVjdG9yT3JBY2NvdW50ZXJGdWxsTmFtZScsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLm5hbWUnKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2lubicsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmlubicpCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncG5mbCcsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnBlcnNvbmFsX251bWJlcicpCiAgICAgICAgfV0KICAgICAgfSwgewogICAgICAgIGtleTogImZvdW5kZXJzIiwKICAgICAgICB0aXRsZTogdGhpcy4kdCgnY29sdW1uLmZvdW5kZXJzJyksCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAgbGFiZWw6ICIjIiwKICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAga2V5OiAiaW5kZXgiCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZnVsbE5hbWUnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5uYW1lJykKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdpbm4nLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5pbm4nKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ3BuZmwnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5wZXJzb25hbF9udW1iZXInKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2ZvdW5kZXJUeXBlJywKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4udHlwZScpCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnZm91bmRlclNoYXJlUGVyY2VudCcsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnNoYXJlX3BlcmNlbnRhZ2UnKQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2ZvdW5kZXJTaGFyZVN1bScsCiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnNoYXJlX3N1bScpCiAgICAgICAgfV0KICAgICAgfV0sCiAgICAgIHRhYmxlSW5uZXJUYWJzOiBbewogICAgICAgIGtleTogImNvbnRyYWN0b3IiLAogICAgICAgIHRpdGxlOiB0aGlzLiR0KCdjb2x1bW4uYnVzaW5lc3NfZW50aXR5JyksCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAnaW5kZXgnLAogICAgICAgICAgbGFiZWw6ICcjJwogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ25hbWUnLAogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5uYW1lJykKICAgICAgICB9XQogICAgICB9LCB7CiAgICAgICAga2V5OiAicHJpY2VzIiwKICAgICAgICB0aXRsZTogdGhpcy4kdCgnY29sdW1uLnByaWNlcycpLAogICAgICAgIGZpZWxkczogW3sKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQodGhpcy4kdCgnY29sdW1uLnByaWNlX2FwcHJvdmFsX2Jhc2lzJyksICIgIikuY29uY2F0KHRoaXMuJHQoJ2NvbHVtbi5kYXRlJykpLAogICAgICAgICAga2V5OiAicHJpY2VBcHByb3ZhbERhdGUiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdCh0aGlzLiR0KCdjb2x1bW4uZWZmZWN0aXZlX2RhdGVfcHJpY2UnKSksCiAgICAgICAgICBrZXk6ICJwcmljZUVmZmVjdGl2ZURhdGUiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdCh0aGlzLiR0KCdjb2x1bW4ucHJpY2VfYXBwcm92YWxfYmFzaXMnKSwgIiAiKS5jb25jYXQodGhpcy4kdCgnY29sdW1uLm51bWJlcicpKSwKICAgICAgICAgIGtleTogInByaWNlQXBwcm92YWxOdW1iZXIiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6ICIiLmNvbmNhdCh0aGlzLiR0KCdjb2x1bW4uY3VycmVudF9wcmljZV93aXRoX2R1dHknKSksCiAgICAgICAgICBrZXk6ICJjdXJyZW50UHJpY2VXaXRoRHV0eSIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogIiIuY29uY2F0KHRoaXMuJHQoJ2NvbHVtbi5jdXJyZW50X3ByaWNlX3dpdGhvdXRfZHV0eScpKSwKICAgICAgICAgIGtleTogImN1cnJlbnRQcmljZVdpdGhvdXREdXR5IgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQodGhpcy4kdCgnY29sdW1uLmFkZGl0aW9uYWxfaW5mbycpKSwKICAgICAgICAgIGtleTogImFkZGl0aW9uYWxJbmZvcm1hdGlvbiIKICAgICAgICB9XQogICAgICB9LCB7CiAgICAgICAga2V5OiAiYW5ub3VuY2VkTWVkaWEiLAogICAgICAgIHRpdGxlOiB0aGlzLiR0KCdjb2x1bW4uYW5ub3VuY2VkX21lZGlhJyksCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAgbGFiZWw6ICIjIiwKICAgICAgICAgIHRoQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgICB0ZENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgICAga2V5OiAiaW5kZXgiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5uYW1lJyksCiAgICAgICAgICBrZXk6ICJhbm5vdW5jZWRNZWRpYU5hbWUiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5saW5rJyksCiAgICAgICAgICBrZXk6ICJhbm5vdW5jZWRNZWRpYUxpbmsiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5kYXRlJyksCiAgICAgICAgICBrZXk6ICJhbm5vdW5jZWRNZWRpYURhdGUiCiAgICAgICAgfV0KICAgICAgfSwgewogICAgICAgIGtleTogImNvbWlzc2lvbiIsCiAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ2NvbHVtbi5jb21taXNzaW9uX2FwcGxpY2F0aW9ucycpLAogICAgICAgIGZpZWxkczogW3sKICAgICAgICAgIGxhYmVsOiAiIyIsCiAgICAgICAgICB0aENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICAgIGtleTogImluZGV4IgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ubnVtYmVyJyksCiAgICAgICAgICBrZXk6ICJjb21tZW5jZW1lbnROdW1iZXIiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5kYXRlJyksCiAgICAgICAgICBrZXk6ICJjb21tZW5jZW1lbnREYXRlIgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uaW5pdGlhdG9yJyksCiAgICAgICAgICBrZXk6ICJpbml0aWF0b3JOYW1lIgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uZmluaXNoaW5nX3R5cGUnKSwKICAgICAgICAgIGtleTogImNvbXBsZXRpb25Xb3JrVHlwZSIKICAgICAgICB9LCB7CiAgICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmZpbmlzaGluZ19kYXRlJyksCiAgICAgICAgICBrZXk6ICJjb21wbGV0aW9uV29ya0RhdGUiCiAgICAgICAgfSwgewogICAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5zaG93Y2FzZV9hbW91bnQnKSwKICAgICAgICAgIGtleTogImluc3RydWN0aW9uQW1vdW50IgogICAgICAgIH0sIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ucmVtYWluZGVyX2Ftb3VudCcpLAogICAgICAgICAga2V5OiAicmVzaWR1ZUFtb3VudCIKICAgICAgICB9XQogICAgICB9XSwKICAgICAgcmVnaW9uSWQ6IG51bGwsCiAgICAgIGxvYWRpbmdUYWJsZUl0ZW1zOiBmYWxzZSwKICAgICAgcmVnaW9uczogW10sCiAgICAgIGpzb25fZmllbGRzOiB7CiAgICAgICAgIk9yZGVyIE51bWJlciI6ICJvcmRlck51bWJlciIsCiAgICAgICAgIlJlZXN0ciBBY2NlcHRlZCBEYXRlIjogInJlZXN0ckFjY2VwdGVkRGF0ZSIsCiAgICAgICAgIlJlZXN0ciBDbG9zZWQgRGF0ZSI6ICJyZWVzdHJDbG9zZWREYXRlIiwKICAgICAgICAiQ29udHJhY3RvciBGdWxsTmFtZSI6ICJjb250cmFjdG9yRnVsbE5hbWUiLAogICAgICAgICJHb3Zlcm5tZW50IFBlcmNlbnRhZ2UiOiAiZ292ZXJubWVudFBlcmNlbnRhZ2UiLAogICAgICAgICJTdGF0dXMiOiAic3RhdHVzIiwKICAgICAgICAiUHJvZHVjdCBvciBTZXJ2aWNlIFR5cGUiOiAicHJvZHVjdE9yU2VydmljZVR5cGUiLAogICAgICAgICJQcm9kdWN0IG9yIFNlcnZpY2VzIjogInByb2R1Y3RPclNlcnZpY2VzIiwKICAgICAgICAiVW5pdCI6ICJ1bml0IiwKICAgICAgICAiT2tlZCI6ICJva2VkIiwKICAgICAgICAiU2twIjogInNrcCIsCiAgICAgICAgIlRudmVkIjogInRudmVkIiwKICAgICAgICAiQ29tbWVudCI6ICJjb21tZW50IgogICAgICB9LAogICAgICBqc29uX2RhdGE6IFtdLAogICAgICBqc29uX21ldGE6IFtbewogICAgICAgIGtleTogImNoYXJzZXQiLAogICAgICAgIHZhbHVlOiAidXRmLTgiCiAgICAgIH1dXSwKICAgICAgc2VhcmNoS2V5d29yZDogJycsCiAgICAgIHNlbGVjdGVkOiAyMCwKICAgICAgb3B0aW9uc1RhYmxlOiBbewogICAgICAgIHZhbHVlOiAyMCwKICAgICAgICB0ZXh0OiAyMAogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDUwLAogICAgICAgIHRleHQ6IDUwCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogMTAwLAogICAgICAgIHRleHQ6IDEwMAogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDE1MCwKICAgICAgICB0ZXh0OiAxNTAKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAyMDAsCiAgICAgICAgdGV4dDogMjAwCiAgICAgIH1dLAogICAgICBhY3RpdmVEZXA6IHt9LAogICAgICB0YWJsZUl0ZW1zOiBbXSwKICAgICAgdG90YWxJdGVtczogMCwKICAgICAgdGFibGVGaWVsZHM6IFt7CiAgICAgICAgbGFiZWw6ICIjIiwKICAgICAgICB0aENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgIHRkQ2xhc3M6ICJ0ZXh0LWNlbnRlciIsCiAgICAgICAgc29ydGFibGU6IGZhbHNlLAogICAgICAgIGtleTogImluZGV4IgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5hY3Rpb25zJyksCiAgICAgICAga2V5OiAiYWN0aW9ucyIsCiAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwKICAgICAgICB0ZENsYXNzOiAidGV4dC1jZW50ZXIiLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5vcmRlcl9udW1iZXInKSwKICAgICAgICBrZXk6ICJvcmRlck51bWJlciIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uYWRkZWRfZGF0ZV90b19yZWVzdHInKSwKICAgICAgICBrZXk6ICJyZWVzdHJBY2NlcHRlZERhdGUiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnJlbW92ZWRfZGF0ZV9mcm9tX3JlZXN0cicpLAogICAgICAgIGtleTogInJlZXN0ckNsb3NlZERhdGUiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmJ1c2luZXNzX2VudGl0eScpLAogICAgICAgIGtleTogImNvbnRyYWN0b3JGdWxsTmFtZSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ucmVnaW9uJyksCiAgICAgICAga2V5OiAicmVnaW9uIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5nb3Zlcm5tZW50X3BlcmNlbnRhZ2UnKSwKICAgICAgICBrZXk6ICJnb3Zlcm5tZW50UGVyY2VudGFnZSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uZm91bmRlcnNfcGVyY2VudGFnZScpLAogICAgICAgIGtleTogImZvdW5kZXJzUGVyY2VudGFnZSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uZG9jdW1lbnRfdHlwZScpLAogICAgICAgIGtleTogImRvY3VtZW50VHlwZSIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uc3RhdHVzJyksCiAgICAgICAga2V5OiAic3RhdHVzIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5wcm9kdWN0X29yX3NlcnZpY2VfdHlwZScpLAogICAgICAgIGtleTogInByb2R1Y3RPclNlcnZpY2VUeXBlIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ3N1Ym1vZHVsZXMucHJvZHVjdF9vcl9zZXJ2aWNlcy50aXRsZScpLAogICAgICAgIGtleTogInByb2R1Y3RPclNlcnZpY2VzIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi51bml0JyksCiAgICAgICAga2V5OiAidW5pdCIKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ub2tlZCcpLAogICAgICAgIGtleTogIm9rZWQiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmNvbW1lbnQnKSwKICAgICAgICBrZXk6ICJjb21tZW50IgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5sYXN0X21vZGlmaWVkX2J5JyksCiAgICAgICAga2V5OiAibGFzdE1vZGlmaWVkQnkiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmFwcHJvdmVkX2J5JyksCiAgICAgICAga2V5OiAiYXBwcm92ZWRCeSIKICAgICAgfV0KICAgICAgLyogbWVkaWFUYWJsZUZpZWxkczogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgICAgbGFiZWw6ICIjIiwNCiAgICAgICAgICAgICAgdGhDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICAgICAgdGRDbGFzczogInRleHQtY2VudGVyIiwNCiAgICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICBrZXk6ICJpbmRleCIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4ubmFtZScpLCBrZXk6ICJhbm5vdW5jZWRNZWRpYU5hbWUiIH0sDQogICAgICAgICAgeyBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmxpbmsnKSwga2V5OiAiYW5ub3VuY2VkTWVkaWFMaW5rIiB9LA0KICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5kYXRlJyksIGtleTogImFubm91bmNlZE1lZGlhRGF0ZSIgfQ0KICAgICAgXSwNCiAgICAgIGNvbWlzc2lvblRhYmxlRmllbGRzOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgICBsYWJlbDogIiMiLA0KICAgICAgICAgICAgICB0aENsYXNzOiAidGV4dC1jZW50ZXIiLA0KICAgICAgICAgICAgICB0ZENsYXNzOiAidGV4dC1jZW50ZXIiLA0KICAgICAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAgICAgIGtleTogImluZGV4IiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5udW1iZXInKSwga2V5OiAiY29tbWVuY2VtZW50TnVtYmVyIiB9LA0KICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5kYXRlJyksIGtleTogImNvbW1lbmNlbWVudERhdGUiIH0sDQogICAgICAgICAgeyBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmluaXRpYXRvcicpLCBrZXk6ICJpbml0aWF0b3JOYW1lIiB9LA0KICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5maW5pc2hpbmdfdHlwZScpLCBrZXk6ICJjb21wbGV0aW9uV29ya1R5cGUiIH0sDQogICAgICAgICAgeyBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmZpbmlzaGluZ19kYXRlJyksIGtleTogImNvbXBsZXRpb25Xb3JrRGF0ZSIgfSwNCiAgICAgICAgICB7IGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uc2hvd2Nhc2VfYW1vdW50JyksIGtleTogImluc3RydWN0aW9uQW1vdW50IiB9LA0KICAgICAgICAgIHsgbGFiZWw6IHRoaXMuJHQoJ2NvbHVtbi5yZW1haW5kZXJfYW1vdW50JyksIGtleTogInJlc2lkdWVBbW91bnQiIH0NCiAgICAgIF0gKi8KICAgIH07CiAgfSwKCiAgLyoNCiAgQ09NUFVURUQgKi8KICBjb21wdXRlZDogewogICAgLyogYWN0aXZlSW5uZXJUYWIgKCkgew0KICAgICAgICByZXR1cm4gdGhpcy50YWJsZUlubmVyVGFic1t0aGlzLmFjdGl2ZVRhYklkeE9mSW5uZXJUYWJzXS5rZXkNCiAgICB9LA0KICAgIGFjdGl2ZUNvbnRyYWN0b3JUYWIgKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5jb250cmFjdG9yVGFic1t0aGlzLmFjdGl2ZVRhYklkeEZvckNvbnRyYWN0b3JdLmtleQ0KICAgIH0sICovCiAgICBudW1iZXJPZlBhZ2VzOiBmdW5jdGlvbiBudW1iZXJPZlBhZ2VzKCkgewogICAgICByZXR1cm4gIXRoaXMudG90YWxJdGVtcyB8fCB0aGlzLnRvdGFsSXRlbXMgPD0gMCB8fCB0aGlzLnRvdGFsSXRlbXMgPCB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLml0ZW1zUGVyUGFnZSA/IDEgOiB0aGlzLnRvdGFsSXRlbXMgLyB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLml0ZW1zUGVyUGFnZTsKICAgIH0sCiAgICBpc0RvbWluYW50OiBmdW5jdGlvbiBpc0RvbWluYW50KCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ1JlZXN0ckhpc3RvcnlGb3JDb250cmFjdG9yRG9taW5hbnQnOwogICAgfSwKICAgIGlzTmF0dXJhbDogZnVuY3Rpb24gaXNOYXR1cmFsKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gJ1JlZXN0ckhpc3RvcnlGb3JDb250cmFjdG9yTmF0dXJhbCc7CiAgICB9LAogICAgaXNEb21pbmFudFJlcHVibGljOiBmdW5jdGlvbiBpc0RvbWluYW50UmVwdWJsaWMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnUmVlc3RySGlzdG9yeUZvclJlcHVibGljQ29udHJhY3RvckRvbWluYW50JzsKICAgIH0sCiAgICBpc05hdHVyYWxSZXB1YmxpYzogZnVuY3Rpb24gaXNOYXR1cmFsUmVwdWJsaWMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnUmVlc3RySGlzdG9yeUZvclJlcHVibGljQ29udHJhY3Rvck5hdHVyYWwnOwogICAgfSwKICAgIGpzb25GaWVsZHNDb21wdXRlZDogZnVuY3Rpb24ganNvbkZpZWxkc0NvbXB1dGVkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdG1wID0ge307CiAgICAgIHRoaXMudGFibGVGaWVsZHMuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQsIGluZGV4KSB7CiAgICAgICAgaWYgKGluZGV4ICE9IDAgJiYgaW5kZXggIT0gX3RoaXMudGFibGVGaWVsZHMubGVuZ3RoIC0gMSkgewogICAgICAgICAgdG1wW2ZpZWxkLmxhYmVsXSA9IGZpZWxkLmtleTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gdG1wOwogICAgfSwKICAgIGNhblVwZGF0ZVJlZXN0cjogZnVuY3Rpb24gY2FuVXBkYXRlUmVlc3RyKCkgewogICAgICBpZiAodGhpcy5pc0RvbWluYW50IHx8IHRoaXMuaXNEb21pbmFudFJlcHVibGljKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGNhbigndXBkYXRlJywgJ2NvbnRyYWN0b3IgcmVlc3RyIGRvY3VtZW50IGZvciBhY2NlcHRhbmNlIGRhbWluaXJpdXNoaXknKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTmF0dXJhbCB8fCB0aGlzLmlzTmF0dXJhbFJlcHVibGljKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJGNhbigndXBkYXRlJywgJ2NvbnRyYWN0b3IgcmVlc3RyIGRvY3VtZW50IGZvciBhY2NlcHRhbmNlIGVzdGVzdHZlbml5Jyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIGNhbkFwcHJvdmVSZWVzdHI6IGZ1bmN0aW9uIGNhbkFwcHJvdmVSZWVzdHIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRjYW4oJ2NvbnRyYWN0b3InLCAncmVlc3RyIGRvY3VtZW50IGNvbmZpcm1hdGlvbicpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXBwcm92ZVJlZXN0ckRvYzogZnVuY3Rpb24gYXBwcm92ZVJlZXN0ckRvYyhkb2MpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuJGJ2TW9kYWwubXNnQm94Q29uZmlybSh0aGlzLiR0KCdtZXNzYWdlcy55b3Vfc3VyZV90aXRsZScpLCB7CiAgICAgICAgb2tUaXRsZTogdGhpcy4kdCgnYWN0aW9ucy5jb25maXJtJyksCiAgICAgICAgY2FuY2VsVGl0bGU6IHRoaXMuJHQoJ2FjdGlvbnMuY2FuY2VsJykKICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGhlbHBlclNlcnZpY2UuYXBwcm92ZVJlZXN0ckRvYyhkb2MuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczIuZmV0Y2hUYWJsZUl0ZW1zKCk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIC8vIEFuIGVycm9yIG9jY3VycmVkCiAgICAgIH0pOwogICAgfSwKICAgIGFjdGl2ZUlubmVyVGFiOiBmdW5jdGlvbiBhY3RpdmVJbm5lclRhYihhY3RpdmVUYWJJZHhPZklubmVyVGFicykgewogICAgICByZXR1cm4gdGhpcy50YWJsZUlubmVyVGFic1thY3RpdmVUYWJJZHhPZklubmVyVGFic10ua2V5OwogICAgfSwKICAgIGFjdGl2ZUNvbnRyYWN0b3JUYWI6IGZ1bmN0aW9uIGFjdGl2ZUNvbnRyYWN0b3JUYWIoYWN0aXZlVGFiSWR4Rm9yQ29udHJhY3RvcikgewogICAgICByZXR1cm4gdGhpcy5jb250cmFjdG9yVGFic1thY3RpdmVUYWJJZHhGb3JDb250cmFjdG9yXS5rZXk7CiAgICB9LAogICAgc2V0Um93c0lubmVyVGFic0RhdGE6IGZ1bmN0aW9uIHNldFJvd3NJbm5lclRhYnNEYXRhKGl0ZW0sIGluZGV4LCBzZWxlY3RlZFRhYkluZGV4KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgaXNGb3JDb250cmFjdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKICAgICAgdmFyIGlzRm9yRm91bmRlcnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IGZhbHNlOwogICAgICB2YXIgZm91bmRlclRhYkluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiAwOwogICAgICBpZiAodGhpcy50YWJsZUlubmVyVGFic1tzZWxlY3RlZFRhYkluZGV4XS5rZXkgPT09ICdjb250cmFjdG9yJyB8fCBpc0ZvckNvbnRyYWN0b3IpIHsKICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2xvYWRpbmdJbm5lckRhdGEnLCB0cnVlKTsKICAgICAgICBpZiAodGhpcy5jb250cmFjdG9yVGFic1tzZWxlY3RlZFRhYkluZGV4XS5rZXkgPT09ICdnZW5lcmFsSW5mbycpIHsKICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAnY29udHJhY3RvclRhYkl0ZW1zJywgW2l0ZW0uY29udHJhY3RvckR0b10pOwogICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICdsb2FkaW5nSW5uZXJEYXRhJywgZmFsc2UpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250cmFjdG9yVGFic1tzZWxlY3RlZFRhYkluZGV4XS5rZXkgPT09ICdkaXJlY3RvcicpIHsKICAgICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0Q29udHJhY3RvckRpcmVjdG9yKGl0ZW0uY29udHJhY3RvckR0by5pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMy4kc2V0KGl0ZW0sICdjb250cmFjdG9yVGFiSXRlbXMnLCBbcmVzLmRhdGFdKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIF90aGlzMy4kc2V0KGl0ZW0sICdjb250cmFjdG9yVGFiSXRlbXMnLCBbXSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy4kc2V0KGl0ZW0sICdsb2FkaW5nSW5uZXJEYXRhJywgZmFsc2UpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnRyYWN0b3JUYWJzW3NlbGVjdGVkVGFiSW5kZXhdLmtleSA9PT0gJ2FjY291bnRlcicpIHsKICAgICAgICAgIGhlbHBlclNlcnZpY2UuZ2V0Q29udHJhY3RvckFjY291bnRlcihpdGVtLmNvbnRyYWN0b3JEdG8uaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczMuJHNldChpdGVtLCAnY29udHJhY3RvclRhYkl0ZW1zJywgW3Jlcy5kYXRhXSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBfdGhpczMuJHNldChpdGVtLCAnY29udHJhY3RvclRhYkl0ZW1zJywgW10pOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczMuJHNldChpdGVtLCAnbG9hZGluZ0lubmVyRGF0YScsIGZhbHNlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb250cmFjdG9yVGFic1tzZWxlY3RlZFRhYkluZGV4XS5rZXkgPT09ICdmb3VuZGVycycpIHsKICAgICAgICAgIGlmIChpc0ZvckZvdW5kZXJzICYmIGl0ZW0uZm91bmRlcnNGdWxsRGF0YSkgewogICAgICAgICAgICBpZiAodGhpcy5mb3VuZGVyVGFic1tpdGVtLmFjdGl2ZVRhYklkeEZvckNvbnRyYWN0b3JGb3VuZGVyXS5rZXkgPT09ICdsZWdhbCcpIHsKICAgICAgICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2NvbnRyYWN0b3JUYWJJdGVtcycsIGl0ZW0uZm91bmRlcnNGdWxsRGF0YS5mb3VuZGVyTGVnYWxEdG8pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm91bmRlclRhYnNbaXRlbS5hY3RpdmVUYWJJZHhGb3JDb250cmFjdG9yRm91bmRlcl0ua2V5ID09PSAnaW5kaXZpZHVhbCcpIHsKICAgICAgICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2NvbnRyYWN0b3JUYWJJdGVtcycsIGl0ZW0uZm91bmRlcnNGdWxsRGF0YS5mb3VuZGVySW5kaXZpZHVhbER0byk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kc2V0KGl0ZW0sICdsb2FkaW5nSW5uZXJEYXRhJywgZmFsc2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaGVscGVyU2VydmljZS5nZXRDb250cmFjdG9yRm91bmRlcnMoaXRlbS5jb250cmFjdG9yRHRvLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczMuJHNldChpdGVtLCAnZm91bmRlcnNGdWxsRGF0YScsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICBpZiAoX3RoaXMzLmZvdW5kZXJUYWJzW2l0ZW0uYWN0aXZlVGFiSWR4Rm9yQ29udHJhY3RvckZvdW5kZXJdLmtleSA9PT0gJ2xlZ2FsJykgewogICAgICAgICAgICAgICAgX3RoaXMzLiRzZXQoaXRlbSwgJ2NvbnRyYWN0b3JUYWJJdGVtcycsIHJlcy5kYXRhLmZvdW5kZXJMZWdhbER0byk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpczMuZm91bmRlclRhYnNbaXRlbS5hY3RpdmVUYWJJZHhGb3JDb250cmFjdG9yRm91bmRlcl0ua2V5ID09PSAnaW5kaXZpZHVhbCcpIHsKICAgICAgICAgICAgICAgIF90aGlzMy4kc2V0KGl0ZW0sICdjb250cmFjdG9yVGFiSXRlbXMnLCByZXMuZGF0YS5mb3VuZGVySW5kaXZpZHVhbER0byk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIF90aGlzMy4kc2V0KGl0ZW0sICdmb3VuZGVyc0Z1bGxEYXRhJywgbnVsbCk7CiAgICAgICAgICAgICAgX3RoaXMzLiRzZXQoaXRlbSwgJ2NvbnRyYWN0b3JUYWJJdGVtcycsIFtdKTsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMzLiRzZXQoaXRlbSwgJ2xvYWRpbmdJbm5lckRhdGEnLCBmYWxzZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYmxlSW5uZXJUYWJzW3NlbGVjdGVkVGFiSW5kZXhdLmtleSA9PT0gJ3ByaWNlcycpIHsKICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2lubmVyVGFiSXRlbXMnLCBpdGVtLnByaWNlQXBwcm92YWxEdG9zKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYmxlSW5uZXJUYWJzW3NlbGVjdGVkVGFiSW5kZXhdLmtleSA9PT0gJ2Fubm91bmNlZE1lZGlhJykgewogICAgICAgIHRoaXMuJHNldChpdGVtLCAnaW5uZXJUYWJJdGVtcycsIGl0ZW0uYW5ub3VuY2VkTWVkaWFEdG9zKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnRhYmxlSW5uZXJUYWJzW3NlbGVjdGVkVGFiSW5kZXhdLmtleSA9PT0gJ2NvbWlzc2lvbicpIHsKICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2lubmVyVGFiSXRlbXMnLCBpdGVtLmNvbW1pc3Npb25BcHBsaWNhdGlvbkR0b3MpOwogICAgICB9CiAgICB9LAogICAgcm93Q2xpY2tlZDogZnVuY3Rpb24gcm93Q2xpY2tlZChpdGVtLCBpbmRleCkgewogICAgICB0aGlzLiRzZXQoaXRlbSwgJ19zaG93RGV0YWlscycsICFpdGVtLl9zaG93RGV0YWlscyk7CiAgICAgIGlmICghaXRlbS5hY3RpdmVUYWJJZHhPZklubmVyVGFicykgewogICAgICAgIHRoaXMuJHNldChpdGVtLCAnYWN0aXZlVGFiSWR4T2ZJbm5lclRhYnMnLCAwKTsKICAgICAgfQogICAgICBpZiAoIWl0ZW0uYWN0aXZlVGFiSWR4Rm9yQ29udHJhY3RvcikgewogICAgICAgIHRoaXMuJHNldChpdGVtLCAnYWN0aXZlVGFiSWR4Rm9yQ29udHJhY3RvcicsIDApOwogICAgICB9CiAgICAgIGlmICghaXRlbS5hY3RpdmVUYWJJZHhGb3JDb250cmFjdG9yRm91bmRlcikgewogICAgICAgIHRoaXMuJHNldChpdGVtLCAnYWN0aXZlVGFiSWR4Rm9yQ29udHJhY3RvckZvdW5kZXInLCAwKTsKICAgICAgfQogICAgICB0aGlzLnNldFJvd3NJbm5lclRhYnNEYXRhKGl0ZW0sIGluZGV4LCAwLCB0cnVlKTsKICAgICAgLy8gdGhpcy5mZXRjaFJlZXN0ckRvY3NCeVR5cGVJZChudWxsLCBpdGVtLnR5cGVJZCwgaW5kZXgpCiAgICB9LAogICAgZmV0Y2hSZWVzdHJEb2NzQnlUeXBlSWQ6IGZ1bmN0aW9uIGZldGNoUmVlc3RyRG9jc0J5VHlwZUlkKHRvZ2dsZURldGFpbHMsIHR5cGVJZCwgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGlmICh0b2dnbGVEZXRhaWxzKSB7CiAgICAgICAgdG9nZ2xlRGV0YWlscygpOwogICAgICB9CiAgICAgIHRoaXMuJHNldCh0aGlzLnRhYmxlSXRlbXNbaW5kZXhdLCAnbG9hZGluZ0lubmVyRGF0YScsIHRydWUpOwogICAgICBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNlYXJjaExpc3QoTUFJTl9BUElfVVJMLCBudWxsLCAiIi5jb25jYXQodGhpcy5pc0RvbWluYW50ID8gQVBQRU5EX0FQSV9VUkxfRE9NSU5BTlQgOiB0aGlzLmlzTmF0dXJhbCA/IEFQUEVORF9BUElfVVJMX05BVFVSQUwgOiAnJywgIj9yZWdpb25JZD0iKS5jb25jYXQodGhpcy5yZWdpb25JZCwgIiZ0eXBlSWQ9IikuY29uY2F0KHR5cGVJZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzNC4kc2V0KF90aGlzNC50YWJsZUl0ZW1zW2luZGV4XSwgJ3JlZXN0cicsIHJlcy5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpczQuJHNldChfdGhpczQudGFibGVJdGVtc1tpbmRleF0sICdyZWVzdHInLCBbXSk7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC4kc2V0KF90aGlzNC50YWJsZUl0ZW1zW2luZGV4XSwgJ2xvYWRpbmdJbm5lckRhdGEnLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlZ2lvblNlbGVjdGVkOiBmdW5jdGlvbiByZWdpb25TZWxlY3RlZCgkZXZlbnQpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXM1ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZG9udFJlc2V0RGlzdHJpY3Q7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZG9udFJlc2V0RGlzdHJpY3QgPSBfYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgX2FyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgICAgIGlmICgkZXZlbnQpIHsKICAgICAgICAgICAgICAgIF90aGlzNS5mZXRjaFRhYmxlSXRlbXMoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkb3dubG9hZEV4Y2VsOiBmdW5jdGlvbiBkb3dubG9hZEV4Y2VsKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKICAgICAgdGhpcy5qc29uX2RhdGEgPSBbXTsKICAgICAgdGhpcy50YWJsZUl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBvYmogPSB7fTsKICAgICAgICBvYmoub3JkZXJOdW1iZXIgPSByZXMub3JkZXJOdW1iZXI7CiAgICAgICAgb2JqLnJlZXN0ckFjY2VwdGVkRGF0ZSA9IHJlcy5yZWVzdHJBY2NlcHRlZERhdGU7CiAgICAgICAgb2JqLnJlZXN0ckNsb3NlZERhdGUgPSByZXMucmVlc3RyQ2xvc2VkRGF0ZTsKICAgICAgICBvYmouY29udHJhY3RvckZ1bGxOYW1lID0gcmVzLmNvbnRyYWN0b3JEdG8uZnVsbE5hbWUgKyAnLScgKyByZXMuY29udHJhY3RvckR0by5pbm47CiAgICAgICAgb2JqLmdvdmVybm1lbnRQZXJjZW50YWdlID0gcmVzLmdvdmVybm1lbnRQZXJjZW50YWdlOwogICAgICAgIG9iai5kb2N1bWVudFR5cGUgPSByZXMuZG9jdW1lbnRUeXBlOwogICAgICAgIG9iai5zdGF0dXMgPSBfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lTHQ6IHJlcy5kb2N1bWVudFN0YXR1c05hbWVMdCwKICAgICAgICAgIG5hbWVVejogcmVzLmRvY3VtZW50U3RhdHVzTmFtZVV6LAogICAgICAgICAgbmFtZVJ1OiByZXMuZG9jdW1lbnRTdGF0dXNOYW1lUnUKICAgICAgICB9KTsKICAgICAgICBvYmoucHJvZHVjdE9yU2VydmljZVR5cGUgPSBfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lTHQ6IHJlcy5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlVHlwZUR0by5uYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHJlcy5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlVHlwZUR0by5uYW1lVXosCiAgICAgICAgICBuYW1lUnU6IHJlcy5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlVHlwZUR0by5uYW1lUnUKICAgICAgICB9KTsKICAgICAgICBvYmoucHJvZHVjdE9yU2VydmljZXMgPSBfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lTHQ6IHJlcy5kaXJlY3RvcnlQcm9kdWN0T3JTZXJ2aWNlRHRvLm5hbWVMdCwKICAgICAgICAgIG5hbWVVejogcmVzLmRpcmVjdG9yeVByb2R1Y3RPclNlcnZpY2VEdG8ubmFtZVV6LAogICAgICAgICAgbmFtZVJ1OiByZXMuZGlyZWN0b3J5UHJvZHVjdE9yU2VydmljZUR0by5uYW1lUnUKICAgICAgICB9KTsKICAgICAgICBvYmoudW5pdCA9IF90aGlzNi5nZXROYW1lKHsKICAgICAgICAgIG5hbWVMdDogcmVzLnVuaXROYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHJlcy51bml0TmFtZVV6LAogICAgICAgICAgbmFtZVJ1OiByZXMudW5pdE5hbWVSdQogICAgICAgIH0pOwogICAgICAgIG9iai5za3AgPSByZXMuaW5mb1NLUER0byA/IHJlcy5pbmZvU0tQRHRvLmNvZGUgKyAnLScgKyBfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lTHQ6IHJlcy5pbmZvU0tQRHRvLm5hbWVMdCwKICAgICAgICAgIG5hbWVVejogcmVzLmluZm9TS1BEdG8ubmFtZVV6LAogICAgICAgICAgbmFtZVJ1OiByZXMuaW5mb1NLUER0by5uYW1lUnUKICAgICAgICB9KSA6ICcnOwogICAgICAgIG9iai5va2VkID0gcmVzLmluZm9Pa2VkRHRvID8gcmVzLmluZm9Pa2VkRHRvLmNvZGUgKyAnLScgKyBfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lTHQ6IHJlcy5pbmZvT2tlZER0by5uYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHJlcy5pbmZvT2tlZER0by5uYW1lVXosCiAgICAgICAgICBuYW1lUnU6IHJlcy5pbmZvT2tlZER0by5uYW1lUnUKICAgICAgICB9KSA6ICcnOwogICAgICAgIG9iai50bnZlZCA9IHJlcy5pbmZvVE5WRUREdG8gPyByZXMuaW5mb1ROVkVERHRvLmNvZGUgKyAnLScgKyBfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICBuYW1lTHQ6IHJlcy5pbmZvVE5WRUREdG8ubmFtZUx0LAogICAgICAgICAgbmFtZVV6OiByZXMuaW5mb1ROVkVERHRvLm5hbWVVeiwKICAgICAgICAgIG5hbWVSdTogcmVzLmluZm9UTlZFRER0by5uYW1lUnUKICAgICAgICB9KSA6ICcnOwogICAgICAgIG9iai5jb21tZW50ID0gcmVzLmNvbW1lbnQ7CiAgICAgICAgb2JqLmxhc3RNb2RpZmllZEJ5ID0gIiIuY29uY2F0KHJlcy51cGRhdGVkQnlFbXBsb3llZUZ1bGxOYW1lID8gcmVzLnVwZGF0ZWRCeUVtcGxveWVlRnVsbE5hbWUgKyAnICcgKyAocmVzLnVwZGF0ZWRCeURpcmVjdG9yeVBvc2l0aW9uTmFtZVV6ID8gJygnICsgcmVzLnVwZGF0ZWRCeURpcmVjdG9yeVBvc2l0aW9uTmFtZVV6ICsgJywgJyArIF90aGlzNi4kdCgnYXV0aC51c2VybmFtZScpICsgJyAtICcgKyByZXMudXBkYXRlZEJ5VXNlck5hbWUgKyAnKScgOiAnJykgOiBfdGhpczYuJHQoJ2F1dGgudXNlcm5hbWUnKSArICcgLSAnICsgcmVzLnVwZGF0ZWRCeVVzZXJOYW1lICsgJyAnICsgKHJlcy51cGRhdGVkQnlEYXRlID8gcmVzLnVwZGF0ZWRCeURhdGUgOiAnJykpOwogICAgICAgIG9iai5hcHByb3ZlZEJ5ID0gIiIuY29uY2F0KHJlcy5jb25maXJtZWRCeUVtcGxveWVlRnVsbE5hbWUgPyByZXMuY29uZmlybWVkQnlFbXBsb3llZUZ1bGxOYW1lICsgJyAnICsgKHJlcy5jb25maXJtZWRCeURpcmVjdG9yeVBvc2l0aW9uTmFtZVV6ID8gJygnICsgcmVzLmNvbmZpcm1lZEJ5RGlyZWN0b3J5UG9zaXRpb25OYW1lVXogKyAnLCAnICsgX3RoaXM2LiR0KCdhdXRoLnVzZXJuYW1lJykgKyAnIC0gJyArIHJlcy5jb25maXJtZWRCeVVzZXJOYW1lICsgJyknIDogJycpIDogX3RoaXM2LiR0KCdhdXRoLnVzZXJuYW1lJykgKyAnIC0gJyArIHJlcy5jb25maXJtZWRCeVVzZXJOYW1lICsgJyAnICsgKHJlcy5jb25maXJtZWRCeURhdGUgPyByZXMuY29uZmlybWVkQnlEYXRlIDogJycpKTsKICAgICAgICBvYmouZm91bmRlcnNQZXJjZW50YWdlID0gJyc7CiAgICAgICAgcmVzLmNvbnRyYWN0b3JEdG8uZm91bmRlcnNEdG9zLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICBvYmouZm91bmRlcnNQZXJjZW50YWdlICs9ICIiLmNvbmNhdChlbC5mb3VuZGVyTmFtZSwgIiAoIikuY29uY2F0KGVsLnBlcmNlbnRhZ2UsICIpLCAiKTsKICAgICAgICB9KTsKICAgICAgICBvYmoucmVnaW9uID0gJyc7CiAgICAgICAgcmVzLnJlZ2lvbkR0b3MuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIG9iai5yZWdpb24gKz0gIiIuY29uY2F0KF90aGlzNi5nZXROYW1lKHsKICAgICAgICAgICAgbmFtZUx0OiBlbC5uYW1lTHQsCiAgICAgICAgICAgIG5hbWVVejogZWwubmFtZVV6LAogICAgICAgICAgICBuYW1lUnU6IGVsLm5hbWVSdQogICAgICAgICAgfSksICIsICIpOwogICAgICAgIH0pOwogICAgICAgIGlmIChfdGhpczYuaXNEb21pbmFudCB8fCBfdGhpczYuaXNOYXR1cmFsKSB7CiAgICAgICAgICBvYmouZGlzdHJpY3QgPSAnJzsKICAgICAgICAgIHJlcy5kaXN0cmljdER0b3MuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgICAgb2JqLmRpc3RyaWN0ICs9ICIiLmNvbmNhdChfdGhpczYuZ2V0TmFtZSh7CiAgICAgICAgICAgICAgbmFtZUx0OiBlbC5uYW1lTHQsCiAgICAgICAgICAgICAgbmFtZVV6OiBlbC5uYW1lVXosCiAgICAgICAgICAgICAgbmFtZVJ1OiBlbC5uYW1lUnUKICAgICAgICAgICAgfSksICIsICIpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChfdGhpczYuaXNOYXR1cmFsIHx8IF90aGlzNi5pc05hdHVyYWxSZXB1YmxpYykgewogICAgICAgICAgb2JqLnByaWNlQXBwcm92YWxEYXRlID0gcmVzLnByaWNlQXBwcm92YWxEYXRlOwogICAgICAgICAgb2JqLnByaWNlRWZmZWN0aXZlRGF0ZSA9IHJlcy5wcmljZUVmZmVjdGl2ZURhdGU7CiAgICAgICAgICBvYmoucHJpY2VBcHByb3ZhbE51bWJlciA9IHJlcy5wcmljZUFwcHJvdmFsTnVtYmVyOwogICAgICAgICAgb2JqLmN1cnJlbnRQcmljZVdpdGhEdXR5ID0gcmVzLmN1cnJlbnRQcmljZVdpdGhEdXR5OwogICAgICAgICAgb2JqLmN1cnJlbnRQcmljZVdpdGhvdXREdXR5ID0gcmVzLmN1cnJlbnRQcmljZVdpdGhvdXREdXR5OwogICAgICAgICAgb2JqLmFkZGl0aW9uYWxJbmZvcm1hdGlvbiA9IHJlcy5hZGRpdGlvbmFsSW5mb3JtYXRpb247CiAgICAgICAgfQogICAgICAgIF90aGlzNi5qc29uX2RhdGEucHVzaChvYmopOwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3RMaXN0OiBmdW5jdGlvbiBzZWxlY3RMaXN0KCRldmVudCkgewogICAgICBpZiAoJGV2ZW50ID09PSAnYWxsJykgewogICAgICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gdGhpcy50b3RhbEl0ZW1zOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuaXRlbXNQZXJQYWdlID0gJGV2ZW50OwogICAgICB9CiAgICAgIHRoaXMuZmV0Y2hUYWJsZUl0ZW1zKCk7CiAgICB9LAogICAgZmV0Y2hUYWJsZUl0ZW1zOiBmdW5jdGlvbiBmZXRjaFRhYmxlSXRlbXMoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzNy5pc0RvbWluYW50UmVwdWJsaWMgfHwgX3RoaXM3LmlzTmF0dXJhbFJlcHVibGljKSB7CiAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZ1RhYmxlSXRlbXMgPSB0cnVlOwogICAgICAgICAgICAgICAgaGVscGVyU2VydmljZS5zZWFyY2hSZWVzdHJIaXN0b3J5TGlzdEJ5Q29udHJhY3RvcklkKCIiLmNvbmNhdChfdGhpczcuaXNEb21pbmFudFJlcHVibGljID8gQVBQRU5EX0FQSV9VUkxfRE9NSU5BTlQgOiBfdGhpczcuaXNOYXR1cmFsUmVwdWJsaWMgPyBBUFBFTkRfQVBJX1VSTF9OQVRVUkFMIDogJycsICI/Y29udHJhY3RvcklkPSIpLmNvbmNhdChfdGhpczcuJHJvdXRlLnBhcmFtcy5pZCksIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBfdGhpczcudGFibGVJdGVtcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM3LnRhYmxlSXRlbXMgPSBbXTsKICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZ1RhYmxlSXRlbXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczcubG9hZGluZ1RhYmxlSXRlbXMgPSB0cnVlOwogICAgICAgICAgICAgICAgLy8gdGhpcy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZC5rZXl3b3JkID0gdGhpcy5zZWFyY2hLZXl3b3JkCiAgICAgICAgICAgICAgICAvKiB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLnNvcnREZXNjLnB1c2goZmFsc2UpDQogICAgICAgICAgICAgICAgaWYgKHRoaXMuJGkxOG4ubG9jYWxlID09PSAndXonKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQuc29ydEJ5LnB1c2goJ25hbWVMdCcpDQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRpMThuLmxvY2FsZSA9PT0gJ3J1Jykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLnNvcnRCeS5wdXNoKCduYW1lUnUnKQ0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy4kaTE4bi5sb2NhbGUgPT09ICd1ekN5cmlsbGljJykgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLnNvcnRCeS5wdXNoKCduYW1lVXonKQ0KICAgICAgICAgICAgICAgIH0gKi8KICAgICAgICAgICAgICAgIGNydWRBbmRMaXN0c1NlcnZpY2Uuc2VhcmNoTGlzdChNQUlOX0FQSV9VUkwsIF90aGlzNy52YXJfZGVmYXVsdF9zZWFyY2hfcGF5bG9hZCwgIiIuY29uY2F0KF90aGlzNy5pc0RvbWluYW50ID8gQVBQRU5EX0FQSV9VUkxfRE9NSU5BTlQgOiBfdGhpczcuaXNOYXR1cmFsID8gQVBQRU5EX0FQSV9VUkxfTkFUVVJBTCA6ICcnLCAiP2NvbnRyYWN0b3JJZD0iKS5jb25jYXQoX3RoaXM3LiRyb3V0ZS5wYXJhbXMuaWQpLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM3LnRhYmxlSXRlbXMgPSByZXMuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNy50YWJsZUl0ZW1zID0gW107CiAgICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM3LmxvYWRpbmdUYWJsZUl0ZW1zID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGVkaXRJdGVtOiBmdW5jdGlvbiBlZGl0SXRlbShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmRvY3VtZW50VHlwZSA9PT0gJ0tJUklUSVNIJykgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuaXNEb21pbmFudCB8fCB0aGlzLmlzRG9taW5hbnRSZXB1YmxpYyA/IHsKICAgICAgICAgIG5hbWU6ICdVcGRhdGVEb21pbmFudENvbnRyYWN0b3JSZWVzdHInLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGlkOiBpdGVtLmlkCiAgICAgICAgICB9CiAgICAgICAgfSA6IHsKICAgICAgICAgIG5hbWU6ICdVcGRhdGVOYXR1cmFsQ29udHJhY3RvclJlZXN0cicsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgaWQ6IGl0ZW0uaWQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChpdGVtLmRvY3VtZW50VHlwZSA9PT0gJ0NISVFBUklTSCcpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLmlzRG9taW5hbnQgfHwgdGhpcy5pc0RvbWluYW50UmVwdWJsaWMgPyB7CiAgICAgICAgICBuYW1lOiAnVXBkYXRlUmVtb3ZlRG9jRG9taW5hbnRDb250cmFjdG9yUmVlc3RyJywKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBpZDogaXRlbS5pZAogICAgICAgICAgfQogICAgICAgIH0gOiB7CiAgICAgICAgICBuYW1lOiAnVXBkYXRlUmVtb3ZlRG9jTmF0dXJhbENvbnRyYWN0b3JSZWVzdHInLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGlkOiBpdGVtLmlkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIC8qIENSRUFURUQgKi9jcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuaXNEb21pbmFudCB8fCB0aGlzLmlzRG9taW5hbnRSZXB1YmxpYykgewogICAgICB0aGlzLnRhYmxlRmllbGRzLnNwbGljZSgxMiwgMCwgewogICAgICAgIGxhYmVsOiB0aGlzLiR0KCdjb2x1bW4uc2twX2NvZGUnKSwKICAgICAgICBrZXk6ICJza3AiCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLnRudmVkX2NvZGUnKSwKICAgICAgICBrZXk6ICJ0bnZlZCIKICAgICAgfSk7CiAgICB9CiAgICBpZiAodGhpcy5pc0RvbWluYW50IHx8IHRoaXMuaXNOYXR1cmFsKSB7CiAgICAgIHRoaXMudGFibGVGaWVsZHMuc3BsaWNlKDYsIDAsIHsKICAgICAgICBsYWJlbDogdGhpcy4kdCgnY29sdW1uLmRpc3RyaWN0JyksCiAgICAgICAga2V5OiAiZGlzdHJpY3QiCiAgICAgIH0pOwogICAgfQogICAgLyogaWYgKHRoaXMuaXNOYXR1cmFsIHx8IHRoaXMuaXNOYXR1cmFsUmVwdWJsaWMpIHsNCiAgICAgICAgdGhpcy50YWJsZUZpZWxkcy5zcGxpY2UodGhpcy50YWJsZUZpZWxkcy5sZW5ndGggLSAxLCAwLA0KICAgICAgICAgICAgeyBsYWJlbDogYCR7dGhpcy4kdCgnY29sdW1uLnByaWNlX2FwcHJvdmFsX2Jhc2lzJyl9ICR7dGhpcy4kdCgnY29sdW1uLmRhdGUnKX1gLCBrZXk6ICJwcmljZUFwcHJvdmFsRGF0ZSIgfSwNCiAgICAgICAgICAgIHsgbGFiZWw6IGAke3RoaXMuJHQoJ2NvbHVtbi5lZmZlY3RpdmVfZGF0ZV9wcmljZScpfWAsIGtleTogInByaWNlRWZmZWN0aXZlRGF0ZSIgfSwNCiAgICAgICAgICAgIHsgbGFiZWw6IGAke3RoaXMuJHQoJ2NvbHVtbi5wcmljZV9hcHByb3ZhbF9iYXNpcycpfSAke3RoaXMuJHQoJ2NvbHVtbi5udW1iZXInKX1gLCBrZXk6ICJwcmljZUFwcHJvdmFsTnVtYmVyIiB9LA0KICAgICAgICAgICAgeyBsYWJlbDogYCR7dGhpcy4kdCgnY29sdW1uLmN1cnJlbnRfcHJpY2Vfd2l0aF9kdXR5Jyl9YCwga2V5OiAiY3VycmVudFByaWNlV2l0aER1dHkiIH0sDQogICAgICAgICAgICB7IGxhYmVsOiBgJHt0aGlzLiR0KCdjb2x1bW4uY3VycmVudF9wcmljZV93aXRob3V0X2R1dHknKX1gLCBrZXk6ICJjdXJyZW50UHJpY2VXaXRob3V0RHV0eSIgfSwNCiAgICAgICAgICAgIHsgbGFiZWw6IGAke3RoaXMuJHQoJ2NvbHVtbi5hZGRpdGlvbmFsX2luZm8nKX1gLCBrZXk6ICJhZGRpdGlvbmFsSW5mb3JtYXRpb24iIH0sDQogICAgICAgICkNCiAgICB9ICovCiAgICB0aGlzLmZldGNoVGFibGVJdGVtcygpOwogIH0sCiAgLyoNCiAgV0FUQ0ggKi8KICB3YXRjaDogewogICAgLyogJ3Zhcl9kZWZhdWx0X3NlYXJjaF9wYXlsb2FkLnBhZ2UnOiB7DQogICAgICAgIGhhbmRsZXIgKCkgew0KICAgICAgICAgICAgdGhpcy5mZXRjaFRhYmxlSXRlbXMoKQ0KICAgICAgICB9DQogICAgfSAqLwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;AAuqBA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;EACAC;IACA;MACAC;MACA;MACA;MACAC,cACA;QACAC;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;UACAN;QACA,GACA;UACAA;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA;MAEA,GACA;QACAH;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;UACAN;QACA,GACA;UACAA;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA;MAEA,EACA;MACAI,iBACA;QACAP;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;UACAN;QACA,GACA;UAAAG;UAAAH;UAAAQ;YAAA;UAAA;QAAA,GACA;UAAAL;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UACAG;UAAAH;UAAAK;QACA,GACA;UAAAF;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA;QACA;QACA;QACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA;MAEA,GACA;QACAA;QACAC;QACAC,SACA;UACAF;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA;MAEA,GACA;QACAH;QACAC;QACAC,SACA;UACAF;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA;MAEA,GACA;QACAH;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;UACAN;QACA,GACA;UACAA;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA,GACA;UACAH;UACAG;QACA;MAEA,EACA;MACAM,iBACA;QACAT;QACAC;QACAC,SACA;UACAF;UACAG;QACA,GACA;UACAH;UACAG;QACA;MAEA,GACA;QACAH;QACAC;QACAC,SACA;UAAAC;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UACAG;UACAH;QACA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA;MAEA,GACA;QACAA;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;UACAN;QACA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA;MAEA,GACA;QACAA;QACAC;QACAC,SACA;UACAC;UACAC;UACAC;UACAC;UACAN;QACA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA,GACA;UAAAG;UAAAH;QAAA;MAEA,EACA;MACAU;MACAC;MACAC;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACAC;MACAC,YACA,CACA;QACAf;QACAgB;MACA,EACA,CACA;MACAC;MACAC;MACAC,eACA;QAAAH;QAAAI;MAAA,GACA;QAAAJ;QAAAI;MAAA,GACA;QAAAJ;QAAAI;MAAA,GACA;QAAAJ;QAAAI;MAAA,GACA;QAAAJ;QAAAI;MAAA,EACA;MACAC;MACAC;MACAC;MACAC,cACA;QACArB;QACAC;QACAC;QACAC;QACAN;MACA,GACA;QACAG;QACAH;QACAI;QACAC;QACAC;MACA,GACA;QAAAH;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA;MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA;EACA;;EACA;AACA;EACAyB;IACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACAC;QACAC;MACA,GACAC;QACA;UACAC,cACAJ,yBACAG;YACA;UACA,GACAE;YACAC;UACA;QACA;MACA,GACAD;QACA;MAAA,CACA;IACA;IACAE;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MAAA;MAAA;MAAA;MACA;QACA;QACA;UACA;UACA;QACA;UACAL,2DACAD;YACA;UACA,GACAE;YACA;YACAC;UACA,GACAI;YACA;UACA;QACA;UACAN,4DACAD;YACA;UACA,GACAE;YACA;YACAC;UACA,GACAI;YACA;UACA;QACA;UACA;YACA;cACA;YACA;cACA;YACA;YACA;UACA;YACAN,2DACAD;cACA;cACA;gBACA;cACA;gBACA;cACA;YACA,GACAE;cACA;cACA;cACAC;YACA,GACAI;cACA;YACA;UACA;QACA;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;MACA;MACA;MACAC,oBACAC,mMACAZ;QACA;MACA,GACAE;QACA;MACA,GACAK;QACA;MACA;IACA;IACAM;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAAC;cACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACAC;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;UACAC;UACAC;UACAC;QACA;QACAH;UACAC;UACAC;UACAC;QACA;QACAH;UACAC;UACAC;UACAC;QACA;QACAH;UAAAC;UAAAC;UAAAC;QAAA;QACAH;UACAC;UACAC;UACAC;QACA;QACAH;UACAC;UACAC;UACAC;QACA;QACAH;UACAC;UACAC;UACAC;QACA;QACAH;QACAA;QACAA;QACAA;QACAI;UACAJ;QACA;QACAA;QACAI;UACAJ;YAAAC;YAAAC;YAAAC;UAAA;QACA;QACA;UACAH;UACAI;YACAJ;cAAAC;cAAAC;cAAAC;YAAA;UACA;QACA;QACA;UACAH;UACAA;UACAA;UACAA;UACAA;UACAA;QACA;QACA;MACA;IACA;IACAK;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBACA;gBACArB,cACAsB,uNACAvB;kBACA;gBACA,GACAE;kBACA;gBACA,GACAK;kBACA;gBACA;cACA;gBACA;gBACA;gBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;gBACAI,oBACAC,6NACAZ;kBACA;gBACA,GACAE;kBACA;gBACA,GACAK;kBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAiB;MACA;QACA;UACApE;UACAqE;YAAAC;UAAA;QACA;UAAAtE;UAAAqE;YAAAC;UAAA;QAAA;MACA;QACA;UACAtE;UACAqE;YAAAC;UAAA;QACA;UAAAtE;UAAAqE;YAAAC;UAAA;QAAA;MACA;IACA;EACA;EACA,aACAC;IACA;MACA;QAAA/D;QAAAH;MAAA,GACA;QAAAG;QAAAH;MAAA;IACA;IACA;MACA;QAAAG;QAAAH;MAAA;IACA;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACA;EACA;EACA;AACA;EACAmE;IACA;AACA;AACA;AACA;AACA;EAJA;AAMA","names":["name","components","data","publicPath","founderTabs","key","title","fields","label","thClass","tdClass","sortable","contractorTabs","thStyle","tableInnerTabs","regionId","loadingTableItems","regions","json_fields","json_data","json_meta","value","searchKeyword","selected","optionsTable","text","activeDep","tableItems","totalItems","tableFields","computed","numberOfPages","isDominant","isNatural","isDominantRepublic","isNaturalRepublic","jsonFieldsComputed","tmp","canUpdateReestr","canApproveReestr","methods","approveReestrDoc","okTitle","cancelTitle","then","helperService","catch","console","activeInnerTab","activeContractorTab","setRowsInnerTabsData","finally","rowClicked","fetchReestrDocsByTypeId","toggleDetails","crudAndListsService","searchList","regionSelected","dontResetDistrict","downloadExcel","obj","nameLt","nameUz","nameRu","res","selectList","fetchTableItems","searchReestrHistoryListByContractorId","editItem","params","id","created","watch"],"sourceRoot":"src/modules/reestr-contractors/modules/natural","sources":["ReestrHistoryForContractor.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"row mb-2 align-items-center\">\r\n            <div class=\"col-2\">\r\n              <b-btn\r\n                  variant=\"warning\"\r\n                  class=\"text-capitalize\"\r\n                  @click=\"$router.go(-1)\"\r\n              >\r\n                {{ $t('actions.back') }}\r\n              </b-btn>\r\n            </div>\r\n            <div class=\"col-8\">\r\n              <h4\r\n                  class=\"text-center font-weight-bold m-0\"\r\n                  v-if=\"tableItems.length > 0\"\r\n              >{{ tableItems[0].contractorDto.fullName }}</h4>\r\n            </div>\r\n            <div class=\"col-2\">\r\n              <div\r\n                  class=\"text-sm-end\"\r\n                  v-if=\"tableItems.length\"\r\n              >\r\n                <download-excel\r\n                    :data=\"json_data\"\r\n                    :fields=\"jsonFieldsComputed\"\r\n                    :header=\"`${tableItems[0].contractorDto.fullName}`\"\r\n                    worksheet=\"My Worksheet\"\r\n                    :name=\"`${tableItems[0].contractorDto.fullName}.xls`\"\r\n                >\r\n                  <b-btn\r\n                      @click=\"downloadExcel\"\r\n                      type=\"button\"\r\n                      class=\"btn btn-rounded bg-primary mb-2\"\r\n                  >\r\n                    <i class=\"mdi mdi-microsoft-excel me-1\"></i> {{ $t('actions.download') }}\r\n                  </b-btn>\r\n                </download-excel>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- Table data -->\r\n          <b-table\r\n              :items=\"tableItems\"\r\n              :fields=\"tableFields\"\r\n              :busy=\"loadingTableItems\"\r\n              @row-clicked=\"rowClicked\"\r\n              id=\"my-table\"\r\n              class=\"custom-b-table\"\r\n              responsive\r\n              bordered\r\n              small\r\n              show-empty\r\n          >\r\n            <!-- NUMBER OF ITEM -->\r\n            <template #cell(index)=\"data\">\r\n              <strong>{{ data.index + 1 }}</strong>\r\n            </template>\r\n\r\n            <!-- STATUS -->\r\n            <template #cell(status)=\"data\">\r\n              <b-badge\r\n                  :variant=\"data.item.documentStatusCode === 'PENDING' ? 'warning' : data.item.documentStatusCode === 'READY' ? 'success' : ''\">\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.documentStatusNameRu,\r\n                    nameLt: data.item.documentStatusNameLt,\r\n                    nameUz: data.item.documentStatusNameUz,\r\n                  })\r\n                }}\r\n              </b-badge>\r\n            </template>\r\n\r\n            <!-- DOCUMENT_TYPE -->\r\n            <template #cell(documentType)=\"data\">\r\n              <b-badge\r\n                  :variant=\"data.item.documentType === 'KIRITISH' ? 'success' : data.item.documentType === 'CHIQARISH' ? 'danger' : ''\">\r\n                {{\r\n                  data.item.documentType\r\n                }}\r\n              </b-badge>\r\n            </template>\r\n\r\n            <!-- LAST_MODIFIED_BY -->\r\n            <template #cell(lastModifiedBy)=\"data\">\r\n              <template v-if=\"data.item.updatedByUserName\">\r\n                {{\r\n                  data.item.updatedByEmployeeFullName ? (data.item.updatedByEmployeeFullName + ' ' + (data.item.updatedByDirectoryPositionNameUz ? ('(' + data.item.updatedByDirectoryPositionNameUz + ', ' + $t('auth.username') + ' - ' + data.item.updatedByUserName + ')') : '')) : $t('auth.username') + ' - ' + data.item.updatedByUserName\r\n                }}\r\n                <br><i>{{ data.item.updatedByDate ? data.item.updatedByDate : '' }}</i>\r\n              </template>\r\n            </template>\r\n\r\n            <!-- APPROVED_BY -->\r\n            <template #cell(approvedBy)=\"data\">\r\n              <template v-if=\"data.item.confirmedByUserName\">\r\n                {{\r\n                  data.item.confirmedByEmployeeFullName ? (data.item.confirmedByEmployeeFullName + ' ' + (data.item.confirmedByDirectoryPositionNameUz ? ('(' + data.item.confirmedByDirectoryPositionNameUz + ', ' + $t('auth.username') + ' - ' + data.item.confirmedByUserName + ')') : '')) : $t('auth.username') + ' - ' + data.item.confirmedByUserName\r\n                }}\r\n                <br><i>{{ data.item.confirmedByDate ? data.item.confirmedByDate : '' }}</i>\r\n              </template>\r\n\r\n            </template>\r\n\r\n            <template #cell(contractorFullName)=\"data\">\r\n              {{ data.item.contractorDto.fullName }} - {{ data.item.contractorDto.inn }}\r\n            </template>\r\n\r\n            <!-- PRODUCTS_OR_SERVICES -->\r\n            <template #cell(productOrServices)=\"data\">\r\n              {{\r\n                getName({\r\n                  nameRu: data.item.directoryProductOrServiceDto.nameRu,\r\n                  nameLt: data.item.directoryProductOrServiceDto.nameLt,\r\n                  nameUz: data.item.directoryProductOrServiceDto.nameUz,\r\n                })\r\n              }}\r\n            </template>\r\n\r\n            <!-- OKEDS -->\r\n            <template #cell(oked)=\"data\">\r\n              <div v-if=\"data.item.infoOkedDto\">\r\n                <strong>{{ `${data.item.infoOkedDto.code} - ` }}</strong>\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.infoOkedDto.nameRu,\r\n                    nameLt: data.item.infoOkedDto.nameLt,\r\n                    nameUz: data.item.infoOkedDto.nameUz,\r\n                  })\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- SKP -->\r\n            <template #cell(skp)=\"data\">\r\n              <div v-if=\"data.item.infoSKPDto\">\r\n                <strong>{{ `${data.item.infoSKPDto.code} - ` }}</strong>\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.infoSKPDto.nameRu,\r\n                    nameLt: data.item.infoSKPDto.nameLt,\r\n                    nameUz: data.item.infoSKPDto.nameUz,\r\n                  })\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- TNVED -->\r\n            <template #cell(tnved)=\"data\">\r\n              <div v-if=\"data.item.infoTNVEDDto\">\r\n                <strong>{{ `${data.item.infoTNVEDDto.code} - ` }}</strong>\r\n                {{\r\n                  getName({\r\n                    nameRu: data.item.infoTNVEDDto.nameRu,\r\n                    nameLt: data.item.infoTNVEDDto.nameLt,\r\n                    nameUz: data.item.infoTNVEDDto.nameUz,\r\n                  })\r\n                }}\r\n              </div>\r\n            </template>\r\n\r\n            <!-- PRODUCT_OR_SERVICE_TYPE -->\r\n            <template #cell(productOrServiceType)=\"data\">\r\n              <strong v-if=\"data.item.directoryProductOrServiceTypeDto\">{{\r\n                  getName({\r\n                    nameRu: data.item.directoryProductOrServiceTypeDto.nameRu,\r\n                    nameLt: data.item.directoryProductOrServiceTypeDto.nameLt,\r\n                    nameUz: data.item.directoryProductOrServiceTypeDto.nameUz,\r\n                  })\r\n                }}</strong>\r\n            </template>\r\n\r\n            <!-- UNIT -->\r\n            <template #cell(unit)=\"data\">\r\n              <strong v-if=\"data.item.unitId\">{{\r\n                  getName({\r\n                    nameRu: data.item.unitNameRu,\r\n                    nameLt: data.item.unitNameLt,\r\n                    nameUz: data.item.unitNameUz,\r\n                  })\r\n                }}</strong>\r\n            </template>\r\n\r\n            <!-- FOUNDERS_PERCENTAGE -->\r\n            <template #cell(foundersPercentage)=\"data\">\r\n              <div class=\"d-flex align-items-center flex-wrap\">\r\n                <ul>\r\n                  <li\r\n                      v-for=\"(el, index) in data.item.contractorDto.foundersDtos\"\r\n                      :key=\"`founder-${el.id}-${index}`\"\r\n                  >{{\r\n                      el.founderName\r\n                    }} <strong>({{\r\n                        el.percentage\r\n                      }})</strong>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- REGION -->\r\n            <template #cell(region)=\"data\">\r\n              <div class=\"d-flex align-items-center flex-wrap\">\r\n                <ul>\r\n                  <li\r\n                      v-for=\"(el, index) in data.item.regionDtos\"\r\n                      :key=\"`region-${index}`\"\r\n                  ><strong>{{\r\n                      getName({\r\n                        nameRu: el.nameRu,\r\n                        nameLt: el.nameLt,\r\n                        nameUz: el.nameUz,\r\n                      })\r\n                    }}</strong>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- DISTRICT -->\r\n            <template #cell(district)=\"data\">\r\n              <div\r\n                  v-if=\"data.item.districtDtos\"\r\n                  class=\"d-flex align-items-center flex-wrap\"\r\n              >\r\n                <ul>\r\n                  <li\r\n                      v-for=\"(el, index) in data.item.districtDtos\"\r\n                      :key=\"`district-${index}`\"\r\n                  ><strong>{{\r\n                      getName({\r\n                        nameRu: el.nameRu,\r\n                        nameLt: el.nameLt,\r\n                        nameUz: el.nameUz,\r\n                      })\r\n                    }}</strong>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </template>\r\n            <!-- INNER TABLE FOR REESTR -->\r\n            <template #row-details=\"row\">\r\n              <b-row>\r\n                <b-col cols=\"12\">\r\n                  <b-tabs\r\n                      v-model=\"row.item.activeTabIdxOfInnerTabs\"\r\n                      @input=\"setRowsInnerTabsData(row.item, row.index, $event)\"\r\n                      card\r\n                  >\r\n                    <b-tab\r\n                        v-for=\"(t, index) in tableInnerTabs\"\r\n                        :key=\"`tableInnerTab-${index}`\"\r\n                        :title=\"t.title.toUpperCase()\"\r\n                    >\r\n                      <b-tabs\r\n                          v-if=\"t.key === 'contractor'\"\r\n                          v-model=\"row.item.activeTabIdxForContractor\"\r\n                          @input=\"setRowsInnerTabsData(row.item, row.index, $event, true)\"\r\n                      >\r\n                        <b-tab\r\n                            v-for=\"(tc, indexTc) in contractorTabs\"\r\n                            :key=\"`contractorTab-${indexTc}`\"\r\n                            :title=\"tc.title\"\r\n                        >\r\n                          <b-tabs\r\n                              card\r\n                              v-if=\"tc.key === 'founders'\"\r\n                              v-model=\"row.item.activeTabIdxForContractorFounder\"\r\n                              @input=\"setRowsInnerTabsData(row.item, row.index, indexTc, true, true, $event)\"\r\n                          >\r\n                            <b-tab\r\n                                v-for=\"(tcf, indexTcf) in founderTabs\"\r\n                                :key=\"`contractorFoundersTab-${indexTcf}`\"\r\n                                :title=\"tcf.title\"\r\n                            >\r\n                              <template #title>\r\n                                {{ tcf.title }}\r\n                                <b-badge\r\n                                    v-if=\"(tcf.key === 'legal' || tcf.key === 'individual') && row.item.foundersFullData\"\r\n                                    :variant=\"tcf.key === 'legal' ? 'primary' : 'success'\"\r\n                                    class=\"font-weight-bold\"\r\n                                    style=\"font-size: .7rem;\"\r\n                                >\r\n                                  {{ tcf.key === 'legal' ? row.item.foundersFullData.founderLegalCount : row.item.foundersFullData.founderIndividualCount\r\n                                  }}\r\n                                </b-badge>\r\n                              </template>\r\n                              <b-table\r\n                                  :items=\"row.item.contractorTabItems\"\r\n                                  :fields=\"tcf.fields\"\r\n                                  :busy=\"row.item.loadingInnerData\"\r\n                                  sticky-header=\"400px\"\r\n                                  bordered\r\n                                  small\r\n                                  hover\r\n                                  show-empty\r\n                                  striped\r\n                              >\r\n                                <!-- TABLE_BUSY SLOT -->\r\n                                <template #table-busy>\r\n                                  <div class=\"text-center my-2\">\r\n                                    <b-spinner\r\n                                        variant=\"primary\"\r\n                                        class=\"align-middle\"\r\n                                    ></b-spinner>\r\n\r\n                                  </div>\r\n                                </template>\r\n\r\n                                <template #cell(index)=\"data\">\r\n                                  {{\r\n                                    data.index + 1\r\n                                  }}\r\n                                </template>\r\n\r\n                                <!-- FULL_NAME -->\r\n                                <template #cell(fullName)=\"data\">\r\n                                  {{ data.item.firstName }} {{ data.item.lastName }}\r\n                                  {{ data.item.middleName ? data.item.middleName : '' }}\r\n                                </template>\r\n\r\n                                <!-- FOUNDER_SHARE_SUM -->\r\n                                <template #cell(founderShareSum)=\"data\">\r\n                                  {{ data.item.founderShareSum | toCurrency }}\r\n                                </template>\r\n\r\n                                <!-- FOUNDER_TYPE -->\r\n                                <template #cell(founderType)=\"\">\r\n                                  <b-badge\r\n                                      v-if=\"tcf.key === 'legal' || tcf.key === 'individual'\"\r\n                                      :variant=\"tcf.key === 'legal' ? 'primary' : 'success'\"\r\n                                      class=\"font-weight-bold\"\r\n                                      style=\"font-size: .7rem;\"\r\n                                  >{{ tcf.key === 'legal' ? $t('column.legal_entity') : $t('column.individual') }}\r\n                                  </b-badge>\r\n                                </template>\r\n\r\n                                <template #empty=\"\">\r\n                                  <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                                </template>\r\n\r\n                              </b-table>\r\n                            </b-tab>\r\n                          </b-tabs>\r\n                          <b-table\r\n                              v-else\r\n                              :items=\"row.item.contractorTabItems\"\r\n                              :fields=\"tc.fields\"\r\n                              :busy=\"row.item.loadingInnerData\"\r\n                              sticky-header=\"400px\"\r\n                              bordered\r\n                              small\r\n                              hover\r\n                              show-empty\r\n                              striped\r\n                          >\r\n                            <!-- TABLE_BUSY SLOT -->\r\n                            <template #table-busy>\r\n                              <div class=\"text-center my-2\">\r\n                                <b-spinner\r\n                                    variant=\"primary\"\r\n                                    class=\"align-middle\"\r\n                                ></b-spinner>\r\n\r\n                              </div>\r\n                            </template>\r\n\r\n                            <template #cell(index)=\"data\">\r\n                              {{\r\n                                data.index + 1\r\n                              }}\r\n                            </template>\r\n                            <!-- NAME -->\r\n                            <template #cell(name)=\"data\">\r\n                              <div class=\"d-flex justify-content-between\">\r\n                                <p\r\n                                    class=\"mb-0 d-flex align-items-center\"\r\n                                    style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                                ><span class=\"badge bg-primary\"></span> : <span> {{ data.item.nameUz }}</span></p>\r\n                                <p\r\n                                    class=\"mb-0 d-flex align-items-center\"\r\n                                    style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                                ><span class=\"badge bg-primary\">O'Z</span> : <span> {{ data.item.nameLt }}</span></p>\r\n                                <p\r\n                                    class=\"mb-0 d-flex align-items-center\"\r\n                                    style=\"flex-basis: 0; flex-grow: 1; gap: .3rem;\"\r\n                                ><span class=\"badge bg-primary\"></span> : <span> {{ data.item.nameRu }}</span></p>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- FULL_NAME -->\r\n                            <template #cell(directorOrAccounterFullName)=\"data\">\r\n                              {{ data.item.firstName }} {{ data.item.lastName }}\r\n                              {{ data.item.middleName ? data.item.middleName : '' }}\r\n                            </template>\r\n\r\n                            <!-- STATUS -->\r\n                            <template #cell(status)=\"data\">\r\n                              <div class=\"d-flex justify-content-between\">\r\n                                <p>\r\n                                  {{\r\n                                    getName({\r\n                                      nameRu: data.item.statusNameRu,\r\n                                      nameLt: data.item.statusNameLt,\r\n                                      nameUz: data.item.statusNameUz,\r\n                                    })\r\n                                  }}\r\n                                </p>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- PARENT -->\r\n                            <template #cell(parent)=\"data\">\r\n                                                            <span v-if=\"data.item.parent\">\r\n                                                                {{ data.item.parent.fullName }}\r\n                                                            </span>\r\n                            </template>\r\n\r\n                            <!-- STATUS -->\r\n                            <template #cell(formOfOwnership)=\"data\">\r\n                              <div class=\"d-flex justify-content-between\">\r\n                                <p>\r\n                                  {{\r\n                                    getName({\r\n                                      nameRu: data.item.formOfOwnershipNameRu,\r\n                                      nameLt: data.item.formOfOwnershipNameLt,\r\n                                      nameUz: data.item.formOfOwnershipNameUz,\r\n                                    })\r\n                                  }}\r\n                                </p>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- REGION NAME -->\r\n                            <template #cell(regionName)=\"data\">\r\n                              <p v-if=\"data.item.addressDto\">\r\n                                {{\r\n                                  getName({\r\n                                    nameRu: data.item.addressDto.regionNameRu,\r\n                                    nameLt: data.item.addressDto.regionNameLt,\r\n                                    nameUz: data.item.addressDto.regionNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                            </template>\r\n\r\n                            <!-- DISTRICT NAME -->\r\n                            <template #cell(districtName)=\"data\">\r\n                              <p v-if=\"data.item.addressDto\">\r\n                                {{\r\n                                  getName({\r\n                                    nameRu: data.item.addressDto.districtNameRu,\r\n                                    nameLt: data.item.addressDto.districtNameLt,\r\n                                    nameUz: data.item.addressDto.districtNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                            </template>\r\n\r\n                            <!-- CAN REGISTER -->\r\n                            <template\r\n                                v-if=\"tc.key === 'generalInfo'\"\r\n                                #cell(canRegister)=\"data\"\r\n                            >\r\n                              <div class=\"d-flex justify-content-center\">\r\n                                                                <span\r\n                                                                    class=\"badge bg-success\"\r\n                                                                    v-if=\"data.item.canRegister === true\"\r\n                                                                >HA</span>\r\n                                <span\r\n                                    class=\"badge bg-warning\"\r\n                                    v-if=\"data.item.canRegister === false\"\r\n                                >YO'Q</span>\r\n                              </div>\r\n                            </template>\r\n\r\n                            <!-- FOUNDER_SHARE_SUM -->\r\n                            <template #cell(founderShareSum)=\"data\">\r\n                              {{ data.item.founderShareSum | toCurrency }}\r\n                            </template>\r\n\r\n                            <!-- FOUNDER_TYPE -->\r\n                            <template #cell(founderType)=\"data\">\r\n                              <b-badge\r\n                                  :variant=\"data.item.isLegal ? 'primary' : 'success'\"\r\n                                  class=\"font-weight-bold\"\r\n                                  style=\"font-size: .7rem;\"\r\n                              >{{ data.item.isLegal ? $t('column.legal_entity') : $t('column.individual') }}\r\n                              </b-badge>\r\n                            </template>\r\n\r\n                            <template #empty=\"\">\r\n                              <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                            </template>\r\n\r\n                          </b-table>\r\n                        </b-tab>\r\n                      </b-tabs>\r\n                      <b-table\r\n                          v-else\r\n                          :items=\"row.item.innerTabItems\"\r\n                          :fields=\"t.fields\"\r\n                          :busy=\"row.item.loadingInnerData\"\r\n                          sticky-header=\"400px\"\r\n                          bordered\r\n                          small\r\n                          hover\r\n                          show-empty\r\n                          striped\r\n                      >\r\n                        <!-- TABLE_BUSY SLOT -->\r\n                        <template #table-busy>\r\n                          <div class=\"text-center my-2\">\r\n                            <b-spinner\r\n                                variant=\"primary\"\r\n                                class=\"align-middle\"\r\n                            ></b-spinner>\r\n\r\n                          </div>\r\n                        </template>\r\n\r\n                        <template #cell(index)=\"innerData\">\r\n                          {{\r\n                            innerData.index + 1\r\n                          }}\r\n                        </template>\r\n\r\n                        <!-- PRICE_APPROVAL_CURRENT_PRICE_WITH_DUTY -->\r\n                        <template #cell(currentPriceWithDuty)=\"data\">\r\n                          {{ data.item.currentPriceWithDuty | toCurrency }}\r\n                        </template>\r\n                        <!-- PRICE_APPROVAL_CURRENT_PRICE_WITHOUT_DUTY -->\r\n                        <template #cell(currentPriceWithoutDuty)=\"data\">\r\n                          {{ data.item.currentPriceWithoutDuty | toCurrency }}\r\n                        </template>\r\n\r\n                        <!-- COMISSION_SHOWCASE_AMOUNT -->\r\n                        <template #cell(instructionAmount)=\"data\">\r\n                          {{ data.item.instructionAmount | toCurrency }}\r\n                        </template>\r\n                        <!-- COMISSION_REMAINDER_AMOUNT -->\r\n                        <template #cell(residueAmount)=\"data\">\r\n                          {{ data.item.residueAmount | toCurrency }}\r\n                        </template>\r\n\r\n                        <template #empty=\"\">\r\n                          <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                        </template>\r\n\r\n                      </b-table>\r\n                    </b-tab>\r\n                  </b-tabs>\r\n                </b-col>\r\n                <!-- <b-col\r\n                    v-if=\"isNatural || isNaturalRepublic\"\r\n                    sm=\"5\"\r\n                >\r\n                    <h4 class=\"text-center\">{{$t('column.announced_media')}}</h4>\r\n                    <b-table\r\n                        :items=\"row.item.announcedMediaDtos ? row.item.announcedMediaDtos : []\"\r\n                        :fields=\"mediaTableFields\"\r\n                        :busy=\"row.item.loadingInnerData\"\r\n                        bordered\r\n                        small\r\n                        hover\r\n                        show-empty\r\n                        striped\r\n                        table-variant=\"info\"\r\n                    >\r\n\r\n\r\n                        <template #cell(index)=\"innerData\">\r\n                            {{\r\n                        innerData.index + 1\r\n                    }}\r\n                        </template>\r\n\r\n                        <template #empty=\"\">\r\n                            <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                        </template>\r\n\r\n                    </b-table>\r\n                </b-col>\r\n                <b-col :sm=\"isNatural || isNaturalRepublic ? '7' : '12'\">\r\n                    <h4 class=\"text-center\">{{$t('column.commission_applications')}}</h4>\r\n                    <b-table\r\n                        :items=\"row.item.commissionApplicationDtos ? row.item.commissionApplicationDtos : []\"\r\n                        :fields=\"comissionTableFields\"\r\n                        :busy=\"row.item.loadingInnerData\"\r\n                        bordered\r\n                        small\r\n                        hover\r\n                        show-empty\r\n                        striped\r\n                        table-variant=\"warning\"\r\n                    >\r\n\r\n\r\n                        <template #cell(index)=\"innerData\">\r\n                            {{\r\n                        innerData.index + 1\r\n                    }}\r\n                        </template>\r\n\r\n                        <template #empty=\"\">\r\n                            <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n                        </template>\r\n\r\n                    </b-table>\r\n                </b-col> -->\r\n              </b-row>\r\n            </template>\r\n            <!-- ACTIONS -->\r\n            <template #cell(actions)=\"data\">\r\n              <div class=\"general-table__actions d-flex justify-content-center\">\r\n                <b-btn\r\n                    v-if=\"canUpdateReestr && data.item.documentStatusCode === 'PENDING' && data.item.documentType === 'KIRITISH'\"\r\n                    variant=\"link\"\r\n                    v-b-popover.hover.bottom=\"{variant: 'dark', content: $t('actions.edit')}\"\r\n                    class=\"text-decoration-none p-0\"\r\n                    style=\"font-size: 1.2rem; margin-right: 1rem;\"\r\n                    @click=\"editItem(data.item)\"\r\n                >\r\n                  <i class=\"mdi mdi-circle-edit-outline edit\" />\r\n                </b-btn>\r\n<!--                <a v-b-popover.hover.bottom=\"{variant: 'dark', content: $t('actions.download')}\"-->\r\n<!--                   style=\"font-size: 1.2rem; margin-right: 1rem;\" :href=\"`${publicPath}${data.item.fileUrl}`\" target=\"_blank\" >-->\r\n<!--                  <i class=\"mdi mdi-file-download\" />-->\r\n<!--                </a>-->\r\n                <b-btn\r\n                    v-if=\"canApproveReestr && data.item.documentStatusCode === 'PENDING'\"\r\n                    v-b-popover.hover.bottom=\"{variant: 'dark', content: $t('actions.confirm')}\"\r\n                    variant=\"link\"\r\n                    class=\"text-decoration-none p-0\"\r\n                    style=\"font-size: 1.2rem; color: green;\"\r\n                >\r\n                  <i @click=\"approveReestrDoc(data.item)\" class=\"mdi mdi-check-circle-outline edit\" />\r\n                </b-btn>\r\n              </div>\r\n            </template>\r\n\r\n            <!-- EMPTY SLOT -->\r\n            <template #empty=\"\">\r\n              <h4 class=\"text-center\">{{ $t('messages.data_not_found') }}</h4>\r\n            </template>\r\n\r\n            <!-- TABLE_BUSY SLOT -->\r\n            <template #table-busy>\r\n              <div class=\"text-center my-2\">\r\n                <b-spinner\r\n                    variant=\"primary\"\r\n                    class=\"align-middle\"\r\n                ></b-spinner>\r\n              </div>\r\n            </template>\r\n          </b-table>\r\n\r\n          <!-- end table -->\r\n          <!-- <b-pagination\r\n              v-model=\"var_default_search_payload.page\"\r\n              :total-rows=\"totalItems\"\r\n              :per-page=\"var_default_search_payload.itemsPerPage\"\r\n              aria-controls=\"my-table\"\r\n              class=\"justify-content-end\"\r\n          ></b-pagination> -->\r\n        </div>\r\n        <!-- end card-body -->\r\n      </div>\r\n      <!-- end card -->\r\n    </div>\r\n    <!-- end col -->\r\n  </div>\r\n  <!-- end row -->\r\n</template>\r\n\r\n<script>\r\nconst MAIN_API_URL = 'reestr/contractor-reestr-documents'\r\nconst APPEND_API_URL_NATURAL = 'for-contractor/estestveniy'\r\nconst APPEND_API_URL_DOMINANT = 'for-contractor/daminiriushiy'\r\nimport crudAndListsService from '@/shared/services/crud_and_list.service'\r\nimport helperService from '@/shared/services/helper.service'\r\n\r\nexport default {\r\n  name: 'ReestrHistoryForContractorNatural',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      // activeTabIdxForContractor: 0,\r\n      // activeTabIdxOfInnerTabs: 0,\r\n      founderTabs: [\r\n        {\r\n          key: \"legal\",\r\n          title: this.$t('column.legal_entity'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            {\r\n              key: 'name',\r\n              label: this.$t('column.name'),\r\n            },\r\n            {\r\n              key: 'tin',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'founderType',\r\n              label: this.$t('column.type'),\r\n            },\r\n            {\r\n              key: 'founderSharePercent',\r\n              label: this.$t('column.share_percentage'),\r\n            },\r\n            {\r\n              key: 'founderShareSum',\r\n              label: this.$t('column.share_sum'),\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          key: \"individual\",\r\n          title: this.$t('column.individual'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            {\r\n              key: 'fullName',\r\n              label: this.$t('column.name'),\r\n            },\r\n            {\r\n              key: 'tin',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pinfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n            {\r\n              key: 'founderType',\r\n              label: this.$t('column.type'),\r\n            },\r\n            {\r\n              key: 'founderSharePercent',\r\n              label: this.$t('column.share_percentage'),\r\n            },\r\n            {\r\n              key: 'founderShareSum',\r\n              label: this.$t('column.share_sum'),\r\n            },\r\n          ]\r\n        }\r\n      ],\r\n      contractorTabs: [\r\n        {\r\n          key: \"generalInfo\",\r\n          title: this.$t('column.general_info'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            { label: this.$t('column.full_name'), key: \"fullName\", thStyle: { 'min-width': '17rem' } },\r\n            { label: this.$t('column.superior_parent'), key: \"parent\" },\r\n            { label: this.$t('column.status'), key: \"status\" },\r\n            { label: this.$t('submodules.form_of_ownership.title'), key: \"formOfOwnership\" },\r\n            {\r\n              label: this.$t('column.can_login'), key: \"canRegister\", tdClass: \"text-center\",\r\n            },\r\n            { label: this.$t('column.inn'), key: \"inn\" },\r\n            { label: this.$t('column.oked'), key: \"oked\" },\r\n            // { label: this.$t('column.director'), key: \"director\" },\r\n            // { label: this.$t('column.accounter'), key: \"accounter\" },\r\n            { label: this.$t('column.mobile_number'), key: \"mobileNumber\" },\r\n            { label: this.$t('column.region'), key: \"regionName\" },\r\n            { label: this.$t('column.district'), key: \"districtName\" },\r\n            { label: this.$t('column.address'), key: \"address\" },\r\n            { label: this.$t('column.phone_number'), key: \"phoneNumber\" },\r\n            { label: this.$t('column.mail'), key: \"email\" },\r\n            { label: this.$t('column.fax_number'), key: \"faxNumber\" }\r\n          ]\r\n        },\r\n        {\r\n          key: \"director\",\r\n          title: this.$t('column.director'),\r\n          fields: [\r\n            {\r\n              key: 'index',\r\n              label: '#'\r\n            },\r\n            {\r\n              key: 'directorOrAccounterFullName',\r\n              label: this.$t('column.name')\r\n            },\r\n            {\r\n              key: 'inn',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pnfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          key: \"accounter\",\r\n          title: this.$t('column.accounter'),\r\n          fields: [\r\n            {\r\n              key: 'index',\r\n              label: '#'\r\n            },\r\n            {\r\n              key: 'directorOrAccounterFullName',\r\n              label: this.$t('column.name')\r\n            },\r\n            {\r\n              key: 'inn',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pnfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n          ]\r\n        },\r\n        {\r\n          key: \"founders\",\r\n          title: this.$t('column.founders'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            {\r\n              key: 'fullName',\r\n              label: this.$t('column.name'),\r\n            },\r\n            {\r\n              key: 'inn',\r\n              label: this.$t('column.inn'),\r\n            },\r\n            {\r\n              key: 'pnfl',\r\n              label: this.$t('column.personal_number'),\r\n            },\r\n            {\r\n              key: 'founderType',\r\n              label: this.$t('column.type'),\r\n            },\r\n            {\r\n              key: 'founderSharePercent',\r\n              label: this.$t('column.share_percentage'),\r\n            },\r\n            {\r\n              key: 'founderShareSum',\r\n              label: this.$t('column.share_sum'),\r\n            },\r\n          ]\r\n        }\r\n      ],\r\n      tableInnerTabs: [\r\n        {\r\n          key: \"contractor\",\r\n          title: this.$t('column.business_entity'),\r\n          fields: [\r\n            {\r\n              key: 'index',\r\n              label: '#'\r\n            },\r\n            {\r\n              key: 'name',\r\n              label: this.$t('column.name')\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          key: \"prices\",\r\n          title: this.$t('column.prices'),\r\n          fields: [\r\n            { label: `${this.$t('column.price_approval_basis')} ${this.$t('column.date')}`, key: \"priceApprovalDate\" },\r\n            { label: `${this.$t('column.effective_date_price')}`, key: \"priceEffectiveDate\" },\r\n            {\r\n              label: `${this.$t('column.price_approval_basis')} ${this.$t('column.number')}`,\r\n              key: \"priceApprovalNumber\"\r\n            },\r\n            { label: `${this.$t('column.current_price_with_duty')}`, key: \"currentPriceWithDuty\" },\r\n            { label: `${this.$t('column.current_price_without_duty')}`, key: \"currentPriceWithoutDuty\" },\r\n            { label: `${this.$t('column.additional_info')}`, key: \"additionalInformation\" },\r\n          ]\r\n        },\r\n        {\r\n          key: \"announcedMedia\",\r\n          title: this.$t('column.announced_media'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            { label: this.$t('column.name'), key: \"announcedMediaName\" },\r\n            { label: this.$t('column.link'), key: \"announcedMediaLink\" },\r\n            { label: this.$t('column.date'), key: \"announcedMediaDate\" }\r\n          ]\r\n        },\r\n        {\r\n          key: \"comission\",\r\n          title: this.$t('column.commission_applications'),\r\n          fields: [\r\n            {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n            },\r\n            { label: this.$t('column.number'), key: \"commencementNumber\" },\r\n            { label: this.$t('column.date'), key: \"commencementDate\" },\r\n            { label: this.$t('column.initiator'), key: \"initiatorName\" },\r\n            { label: this.$t('column.finishing_type'), key: \"completionWorkType\" },\r\n            { label: this.$t('column.finishing_date'), key: \"completionWorkDate\" },\r\n            { label: this.$t('column.showcase_amount'), key: \"instructionAmount\" },\r\n            { label: this.$t('column.remainder_amount'), key: \"residueAmount\" }\r\n          ]\r\n        },\r\n      ],\r\n      regionId: null,\r\n      loadingTableItems: false,\r\n      regions: [],\r\n      json_fields: {\r\n        \"Order Number\": \"orderNumber\",\r\n        \"Reestr Accepted Date\": \"reestrAcceptedDate\",\r\n        \"Reestr Closed Date\": \"reestrClosedDate\",\r\n        \"Contractor FullName\": \"contractorFullName\",\r\n        \"Government Percentage\": \"governmentPercentage\",\r\n        \"Status\": \"status\",\r\n        \"Product or Service Type\": \"productOrServiceType\",\r\n        \"Product or Services\": \"productOrServices\",\r\n        \"Unit\": \"unit\",\r\n        \"Oked\": \"oked\",\r\n        \"Skp\": \"skp\",\r\n        \"Tnved\": \"tnved\",\r\n        \"Comment\": \"comment\",\r\n      },\r\n      json_data: [],\r\n      json_meta: [\r\n        [\r\n          {\r\n            key: \"charset\",\r\n            value: \"utf-8\",\r\n          },\r\n        ],\r\n      ],\r\n      searchKeyword: '',\r\n      selected: 20,\r\n      optionsTable: [\r\n        { value: 20, text: 20 },\r\n        { value: 50, text: 50 },\r\n        { value: 100, text: 100 },\r\n        { value: 150, text: 150 },\r\n        { value: 200, text: 200 },\r\n      ],\r\n      activeDep: {},\r\n      tableItems: [],\r\n      totalItems: 0,\r\n      tableFields: [\r\n        {\r\n          label: \"#\",\r\n          thClass: \"text-center\",\r\n          tdClass: \"text-center\",\r\n          sortable: false,\r\n          key: \"index\",\r\n        },\r\n        {\r\n          label: this.$t('column.actions'),\r\n          key: \"actions\",\r\n          thClass: \"text-center\",\r\n          tdClass: \"text-center\",\r\n          sortable: false\r\n        },\r\n        { label: this.$t('column.order_number'), key: \"orderNumber\" },\r\n        { label: this.$t('column.added_date_to_reestr'), key: \"reestrAcceptedDate\" },\r\n        { label: this.$t('column.removed_date_from_reestr'), key: \"reestrClosedDate\" },\r\n        { label: this.$t('column.business_entity'), key: \"contractorFullName\" },\r\n        { label: this.$t('column.region'), key: \"region\" },\r\n        { label: this.$t('column.government_percentage'), key: \"governmentPercentage\" },\r\n        { label: this.$t('column.founders_percentage'), key: \"foundersPercentage\" },\r\n        { label: this.$t('column.document_type'), key: \"documentType\" },\r\n        { label: this.$t('column.status'), key: \"status\" },\r\n        { label: this.$t('column.product_or_service_type'), key: \"productOrServiceType\" },\r\n        { label: this.$t('submodules.product_or_services.title'), key: \"productOrServices\" },\r\n        { label: this.$t('column.unit'), key: \"unit\" },\r\n        { label: this.$t('column.oked'), key: \"oked\" },\r\n        { label: this.$t('column.comment'), key: \"comment\" },\r\n        { label: this.$t('column.last_modified_by'), key: \"lastModifiedBy\" },\r\n        { label: this.$t('column.approved_by'), key: \"approvedBy\" },\r\n      ],\r\n      /* mediaTableFields: [\r\n          {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n          },\r\n          { label: this.$t('column.name'), key: \"announcedMediaName\" },\r\n          { label: this.$t('column.link'), key: \"announcedMediaLink\" },\r\n          { label: this.$t('column.date'), key: \"announcedMediaDate\" }\r\n      ],\r\n      comissionTableFields: [\r\n          {\r\n              label: \"#\",\r\n              thClass: \"text-center\",\r\n              tdClass: \"text-center\",\r\n              sortable: false,\r\n              key: \"index\",\r\n          },\r\n          { label: this.$t('column.number'), key: \"commencementNumber\" },\r\n          { label: this.$t('column.date'), key: \"commencementDate\" },\r\n          { label: this.$t('column.initiator'), key: \"initiatorName\" },\r\n          { label: this.$t('column.finishing_type'), key: \"completionWorkType\" },\r\n          { label: this.$t('column.finishing_date'), key: \"completionWorkDate\" },\r\n          { label: this.$t('column.showcase_amount'), key: \"instructionAmount\" },\r\n          { label: this.$t('column.remainder_amount'), key: \"residueAmount\" }\r\n      ] */\r\n    };\r\n  },\r\n  /*\r\n  COMPUTED */\r\n  computed: {\r\n    /* activeInnerTab () {\r\n        return this.tableInnerTabs[this.activeTabIdxOfInnerTabs].key\r\n    },\r\n    activeContractorTab () {\r\n        return this.contractorTabs[this.activeTabIdxForContractor].key\r\n    }, */\r\n    numberOfPages() {\r\n      return (!this.totalItems || this.totalItems <= 0 || this.totalItems < this.var_default_search_payload.itemsPerPage) ? 1 : this.totalItems / this.var_default_search_payload.itemsPerPage\r\n    },\r\n    isDominant() {\r\n      return this.$route.name === 'ReestrHistoryForContractorDominant'\r\n    },\r\n    isNatural() {\r\n      return this.$route.name === 'ReestrHistoryForContractorNatural'\r\n    },\r\n    isDominantRepublic() {\r\n      return this.$route.name === 'ReestrHistoryForRepublicContractorDominant'\r\n    },\r\n    isNaturalRepublic() {\r\n      return this.$route.name === 'ReestrHistoryForRepublicContractorNatural'\r\n    },\r\n    jsonFieldsComputed() {\r\n      let tmp = {}\r\n      this.tableFields.forEach((field, index) => {\r\n        if (index != 0 && index != this.tableFields.length - 1) {\r\n          tmp[field.label] = field.key\r\n        }\r\n      })\r\n      return tmp\r\n    },\r\n    canUpdateReestr() {\r\n      if (this.isDominant || this.isDominantRepublic) {\r\n        return this.$can('update', 'contractor reestr document for acceptance daminiriushiy')\r\n      } else if (this.isNatural || this.isNaturalRepublic) {\r\n        return this.$can('update', 'contractor reestr document for acceptance estestveniy')\r\n      }\r\n      return false\r\n    },\r\n    canApproveReestr() {\r\n      return this.$can('contractor', 'reestr document confirmation')\r\n    }\r\n  },\r\n  methods: {\r\n    approveReestrDoc(doc) {\r\n      this.$bvModal.msgBoxConfirm(this.$t('messages.you_sure_title'), {\r\n        okTitle: this.$t('actions.confirm'),\r\n        cancelTitle: this.$t('actions.cancel')\r\n      })\r\n          .then(value => {\r\n            if (value) {\r\n              helperService\r\n                  .approveReestrDoc(doc.id)\r\n                  .then((res) => {\r\n                    this.fetchTableItems()\r\n                  })\r\n                  .catch(e => {\r\n                    console.log(e)\r\n                  })\r\n            }\r\n          })\r\n          .catch(err => {\r\n            // An error occurred\r\n          })\r\n    },\r\n    activeInnerTab(activeTabIdxOfInnerTabs) {\r\n      return this.tableInnerTabs[activeTabIdxOfInnerTabs].key\r\n    },\r\n    activeContractorTab(activeTabIdxForContractor) {\r\n      return this.contractorTabs[activeTabIdxForContractor].key\r\n    },\r\n    setRowsInnerTabsData(item, index, selectedTabIndex, isForContractor = false, isForFounders = false, founderTabIndex = 0) {\r\n      if (this.tableInnerTabs[selectedTabIndex].key === 'contractor' || isForContractor) {\r\n        this.$set(item, 'loadingInnerData', true)\r\n        if (this.contractorTabs[selectedTabIndex].key === 'generalInfo') {\r\n          this.$set(item, 'contractorTabItems', [item.contractorDto])\r\n          this.$set(item, 'loadingInnerData', false)\r\n        } else if (this.contractorTabs[selectedTabIndex].key === 'director') {\r\n          helperService.getContractorDirector(item.contractorDto.id)\r\n              .then(res => {\r\n                this.$set(item, 'contractorTabItems', [res.data])\r\n              })\r\n              .catch(e => {\r\n                this.$set(item, 'contractorTabItems', [])\r\n                console.log(e)\r\n              })\r\n              .finally(() => {\r\n                this.$set(item, 'loadingInnerData', false)\r\n              })\r\n        } else if (this.contractorTabs[selectedTabIndex].key === 'accounter') {\r\n          helperService.getContractorAccounter(item.contractorDto.id)\r\n              .then(res => {\r\n                this.$set(item, 'contractorTabItems', [res.data])\r\n              })\r\n              .catch(e => {\r\n                this.$set(item, 'contractorTabItems', [])\r\n                console.log(e)\r\n              })\r\n              .finally(() => {\r\n                this.$set(item, 'loadingInnerData', false)\r\n              })\r\n        } else if (this.contractorTabs[selectedTabIndex].key === 'founders') {\r\n          if (isForFounders && item.foundersFullData) {\r\n            if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'legal') {\r\n              this.$set(item, 'contractorTabItems', item.foundersFullData.founderLegalDto)\r\n            } else if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'individual') {\r\n              this.$set(item, 'contractorTabItems', item.foundersFullData.founderIndividualDto)\r\n            }\r\n            this.$set(item, 'loadingInnerData', false)\r\n          } else {\r\n            helperService.getContractorFounders(item.contractorDto.id)\r\n                .then(res => {\r\n                  this.$set(item, 'foundersFullData', res.data)\r\n                  if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'legal') {\r\n                    this.$set(item, 'contractorTabItems', res.data.founderLegalDto)\r\n                  } else if (this.founderTabs[item.activeTabIdxForContractorFounder].key === 'individual') {\r\n                    this.$set(item, 'contractorTabItems', res.data.founderIndividualDto)\r\n                  }\r\n                })\r\n                .catch(e => {\r\n                  this.$set(item, 'foundersFullData', null)\r\n                  this.$set(item, 'contractorTabItems', [])\r\n                  console.log(e)\r\n                })\r\n                .finally(() => {\r\n                  this.$set(item, 'loadingInnerData', false)\r\n                })\r\n          }\r\n        }\r\n      } else if (this.tableInnerTabs[selectedTabIndex].key === 'prices') {\r\n        this.$set(item, 'innerTabItems', item.priceApprovalDtos)\r\n      } else if (this.tableInnerTabs[selectedTabIndex].key === 'announcedMedia') {\r\n        this.$set(item, 'innerTabItems', item.announcedMediaDtos)\r\n      } else if (this.tableInnerTabs[selectedTabIndex].key === 'comission') {\r\n        this.$set(item, 'innerTabItems', item.commissionApplicationDtos)\r\n      }\r\n    },\r\n    rowClicked(item, index) {\r\n      this.$set(item, '_showDetails', !item._showDetails)\r\n      if (!item.activeTabIdxOfInnerTabs) {\r\n        this.$set(item, 'activeTabIdxOfInnerTabs', 0)\r\n      }\r\n      if (!item.activeTabIdxForContractor) {\r\n        this.$set(item, 'activeTabIdxForContractor', 0)\r\n      }\r\n      if (!item.activeTabIdxForContractorFounder) {\r\n        this.$set(item, 'activeTabIdxForContractorFounder', 0)\r\n      }\r\n      this.setRowsInnerTabsData(item, index, 0, true)\r\n      // this.fetchReestrDocsByTypeId(null, item.typeId, index)\r\n    },\r\n    fetchReestrDocsByTypeId(toggleDetails, typeId, index) {\r\n      if (toggleDetails) {\r\n        toggleDetails()\r\n      }\r\n      this.$set(this.tableItems[index], 'loadingInnerData', true)\r\n      crudAndListsService\r\n          .searchList(MAIN_API_URL, null, `${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?regionId=${this.regionId}&typeId=${typeId}`)\r\n          .then((res) => {\r\n            this.$set(this.tableItems[index], 'reestr', res.data)\r\n          })\r\n          .catch(e => {\r\n            this.$set(this.tableItems[index], 'reestr', [])\r\n          })\r\n          .finally(() => {\r\n            this.$set(this.tableItems[index], 'loadingInnerData', false)\r\n          })\r\n    },\r\n    async regionSelected($event, dontResetDistrict = false) {\r\n      if ($event) {\r\n        this.fetchTableItems()\r\n      }\r\n    },\r\n    downloadExcel() {\r\n      this.json_data = []\r\n      this.tableItems.forEach(res => {\r\n        let obj = {}\r\n        obj.orderNumber = res.orderNumber\r\n        obj.reestrAcceptedDate = res.reestrAcceptedDate\r\n        obj.reestrClosedDate = res.reestrClosedDate\r\n        obj.contractorFullName = res.contractorDto.fullName + '-' + res.contractorDto.inn\r\n        obj.governmentPercentage = res.governmentPercentage\r\n        obj.documentType = res.documentType\r\n        obj.status = this.getName({\r\n          nameLt: res.documentStatusNameLt,\r\n          nameUz: res.documentStatusNameUz,\r\n          nameRu: res.documentStatusNameRu\r\n        })\r\n        obj.productOrServiceType = this.getName({\r\n          nameLt: res.directoryProductOrServiceTypeDto.nameLt,\r\n          nameUz: res.directoryProductOrServiceTypeDto.nameUz,\r\n          nameRu: res.directoryProductOrServiceTypeDto.nameRu\r\n        })\r\n        obj.productOrServices = this.getName({\r\n          nameLt: res.directoryProductOrServiceDto.nameLt,\r\n          nameUz: res.directoryProductOrServiceDto.nameUz,\r\n          nameRu: res.directoryProductOrServiceDto.nameRu\r\n        })\r\n        obj.unit = this.getName({ nameLt: res.unitNameLt, nameUz: res.unitNameUz, nameRu: res.unitNameRu })\r\n        obj.skp = res.infoSKPDto ? res.infoSKPDto.code + '-' + this.getName({\r\n          nameLt: res.infoSKPDto.nameLt,\r\n          nameUz: res.infoSKPDto.nameUz,\r\n          nameRu: res.infoSKPDto.nameRu\r\n        }) : ''\r\n        obj.oked = res.infoOkedDto ? res.infoOkedDto.code + '-' + this.getName({\r\n          nameLt: res.infoOkedDto.nameLt,\r\n          nameUz: res.infoOkedDto.nameUz,\r\n          nameRu: res.infoOkedDto.nameRu\r\n        }) : ''\r\n        obj.tnved = res.infoTNVEDDto ? res.infoTNVEDDto.code + '-' + this.getName({\r\n          nameLt: res.infoTNVEDDto.nameLt,\r\n          nameUz: res.infoTNVEDDto.nameUz,\r\n          nameRu: res.infoTNVEDDto.nameRu\r\n        }) : ''\r\n        obj.comment = res.comment\r\n        obj.lastModifiedBy = `${res.updatedByEmployeeFullName ? (res.updatedByEmployeeFullName + ' ' + (res.updatedByDirectoryPositionNameUz ? ('(' + res.updatedByDirectoryPositionNameUz + ', ' + this.$t('auth.username') + ' - ' + res.updatedByUserName + ')') : '')) : this.$t('auth.username') + ' - ' + res.updatedByUserName + ' ' + (res.updatedByDate ? res.updatedByDate : '')}`\r\n        obj.approvedBy = `${res.confirmedByEmployeeFullName ? (res.confirmedByEmployeeFullName + ' ' + (res.confirmedByDirectoryPositionNameUz ? ('(' + res.confirmedByDirectoryPositionNameUz + ', ' + this.$t('auth.username') + ' - ' + res.confirmedByUserName + ')') : '')) : this.$t('auth.username') + ' - ' + res.confirmedByUserName + ' ' + (res.confirmedByDate ? res.confirmedByDate : '')}`\r\n        obj.foundersPercentage = ''\r\n        res.contractorDto.foundersDtos.forEach(el => {\r\n          obj.foundersPercentage += `${el.founderName} (${el.percentage}), `\r\n        })\r\n        obj.region = ''\r\n        res.regionDtos.forEach(el => {\r\n          obj.region += `${this.getName({ nameLt: el.nameLt, nameUz: el.nameUz, nameRu: el.nameRu })}, `\r\n        })\r\n        if (this.isDominant || this.isNatural) {\r\n          obj.district = ''\r\n          res.districtDtos.forEach(el => {\r\n            obj.district += `${this.getName({ nameLt: el.nameLt, nameUz: el.nameUz, nameRu: el.nameRu })}, `\r\n          })\r\n        }\r\n        if (this.isNatural || this.isNaturalRepublic) {\r\n          obj.priceApprovalDate = res.priceApprovalDate\r\n          obj.priceEffectiveDate = res.priceEffectiveDate\r\n          obj.priceApprovalNumber = res.priceApprovalNumber\r\n          obj.currentPriceWithDuty = res.currentPriceWithDuty\r\n          obj.currentPriceWithoutDuty = res.currentPriceWithoutDuty\r\n          obj.additionalInformation = res.additionalInformation\r\n        }\r\n        this.json_data.push(obj)\r\n      })\r\n    },\r\n    selectList($event) {\r\n      if ($event === 'all') {\r\n        this.var_default_search_payload.itemsPerPage = this.totalItems\r\n      } else {\r\n        this.var_default_search_payload.itemsPerPage = $event\r\n      }\r\n      this.fetchTableItems();\r\n    },\r\n    async fetchTableItems() {\r\n      if (this.isDominantRepublic || this.isNaturalRepublic) {\r\n        this.loadingTableItems = true\r\n        helperService\r\n            .searchReestrHistoryListByContractorId(`${this.isDominantRepublic ? APPEND_API_URL_DOMINANT : this.isNaturalRepublic ? APPEND_API_URL_NATURAL : ''}?contractorId=${this.$route.params.id}`, true)\r\n            .then((res) => {\r\n              this.tableItems = res.data;\r\n            })\r\n            .catch(e => {\r\n              this.tableItems = [];\r\n            })\r\n            .finally(() => {\r\n              this.loadingTableItems = false\r\n            })\r\n      } else {\r\n        this.loadingTableItems = true\r\n        // this.var_default_search_payload.keyword = this.searchKeyword\r\n        /* this.var_default_search_payload.sortDesc.push(false)\r\n        if (this.$i18n.locale === 'uz') {\r\n            this.var_default_search_payload.sortBy.push('nameLt')\r\n        } else if (this.$i18n.locale === 'ru') {\r\n            this.var_default_search_payload.sortBy.push('nameRu')\r\n        } else if (this.$i18n.locale === 'uzCyrillic') {\r\n            this.var_default_search_payload.sortBy.push('nameUz')\r\n        } */\r\n        crudAndListsService\r\n            .searchList(MAIN_API_URL, this.var_default_search_payload, `${this.isDominant ? APPEND_API_URL_DOMINANT : this.isNatural ? APPEND_API_URL_NATURAL : ''}?contractorId=${this.$route.params.id}`, true)\r\n            .then((res) => {\r\n              this.tableItems = res.data;\r\n            })\r\n            .catch(e => {\r\n              this.tableItems = [];\r\n            })\r\n            .finally(() => {\r\n              this.loadingTableItems = false\r\n            })\r\n      }\r\n    },\r\n    editItem(item) {\r\n      if (item.documentType === 'KIRITISH') {\r\n        this.$router.push(this.isDominant || this.isDominantRepublic ? {\r\n          name: 'UpdateDominantContractorReestr',\r\n          params: { id: item.id }\r\n        } : { name: 'UpdateNaturalContractorReestr', params: { id: item.id } })\r\n      } else if (item.documentType === 'CHIQARISH') {\r\n        this.$router.push(this.isDominant || this.isDominantRepublic ? {\r\n          name: 'UpdateRemoveDocDominantContractorReestr',\r\n          params: { id: item.id }\r\n        } : { name: 'UpdateRemoveDocNaturalContractorReestr', params: { id: item.id } })\r\n      }\r\n    }\r\n  },\r\n  /* CREATED */\r\n  created() {\r\n    if (this.isDominant || this.isDominantRepublic) {\r\n      this.tableFields.splice(12, 0, { label: this.$t('column.skp_code'), key: \"skp\" },\r\n          { label: this.$t('column.tnved_code'), key: \"tnved\" })\r\n    }\r\n    if (this.isDominant || this.isNatural) {\r\n      this.tableFields.splice(6, 0, { label: this.$t('column.district'), key: \"district\" })\r\n    }\r\n    /* if (this.isNatural || this.isNaturalRepublic) {\r\n        this.tableFields.splice(this.tableFields.length - 1, 0,\r\n            { label: `${this.$t('column.price_approval_basis')} ${this.$t('column.date')}`, key: \"priceApprovalDate\" },\r\n            { label: `${this.$t('column.effective_date_price')}`, key: \"priceEffectiveDate\" },\r\n            { label: `${this.$t('column.price_approval_basis')} ${this.$t('column.number')}`, key: \"priceApprovalNumber\" },\r\n            { label: `${this.$t('column.current_price_with_duty')}`, key: \"currentPriceWithDuty\" },\r\n            { label: `${this.$t('column.current_price_without_duty')}`, key: \"currentPriceWithoutDuty\" },\r\n            { label: `${this.$t('column.additional_info')}`, key: \"additionalInformation\" },\r\n        )\r\n    } */\r\n    this.fetchTableItems()\r\n  },\r\n  /*\r\n  WATCH */\r\n  watch: {\r\n    /* 'var_default_search_payload.page': {\r\n        handler () {\r\n            this.fetchTableItems()\r\n        }\r\n    } */\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.a-tag-underline-hover {\r\n  :hover {\r\n    text-decoration: underline !important;\r\n  }\r\n}\r\n\r\nul {\r\n  padding-left: 20px;\r\n}\r\n</style>"]}]}