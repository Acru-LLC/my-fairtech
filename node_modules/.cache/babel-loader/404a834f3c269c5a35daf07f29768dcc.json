{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\letter\\visa\\visa.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\letter\\visa\\visa.vue","mtime":1675396198112},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwovLyBpbXBvcnQgTGF5b3V0IGZyb20gIkAvcm91dGVyL2xheW91dHMvbWFpbiI7Ci8vIGltcG9ydCBQYWdlSGVhZGVyIGZyb20gIkAvY29tcG9uZW50cy9wYWdlLWhlYWRlciI7CmltcG9ydCBTZXJ2aWNlIGZyb20gIi4uL2xldHRlclNlcnZpY2UiOwovLyBpbXBvcnQgY3J1ZEFuZExpc3RzU2VydmljZSBmcm9tICdAL3NoYXJlZC9zZXJ2aWNlcy9jcnVkX2FuZF9saXN0LnNlcnZpY2UnCi8qKg0KICogUHJvZHVjdHMtb3JkZXIgY29tcG9uZW50DQogKi8KaW1wb3J0IHsgY25mRG9jLCBzaG93TXNnU3VjY2VzcyB9IGZyb20gIkAvaGVscGVyIjsKaW1wb3J0IFNpZ25LZXlzIGZyb20gIi4uL1NpZ25LZXlzLnZ1ZSI7Ci8vIGltcG9ydCBSZWNlaXZlcnMgZnJvbSAiLi9yZWNlaXZlcnMudnVlIjsKaW1wb3J0IEVkaXRvciBmcm9tICIuLi9jcmVhdGUvZnJvYWwuZWRpdG9yLnZ1ZSI7CmltcG9ydCBNb2RhbCBmcm9tICIuLi9jcmVhdGUvbW9kYWwudnVlIjsKaW1wb3J0IERYQUFwcGxpY2F0aW9uQWxsSW5mbyBmcm9tICIuLi9tb25pdG9yL0RYQSBpbmZvL2luZGV4IjsKaW1wb3J0IGNydWRBbmRMaXN0c1NlcnZpY2UgZnJvbSAnQC9zaGFyZWQvc2VydmljZXMvY3J1ZF9hbmRfbGlzdC5zZXJ2aWNlJzsKaW1wb3J0IExldHRlclNlcnZpY2UgZnJvbSAnLi4vLi4vbGV0dGVyL2xldHRlclNlcnZpY2UnOwppbXBvcnQgVmVyaWZ5RG9jdW1lbnRTZXJ2aWNlIGZyb20gIi4uLy4uL2xldHRlci92ZXJpZnlEb2N1bWVudC5zZXJ2aWNlIjsKaW1wb3J0IGxldHRlclNlcnZpY2UgZnJvbSAiQC9tb2R1bGVzL2xldHRlci9sZXR0ZXJTZXJ2aWNlIjsKaW1wb3J0IHBkZiBmcm9tICd2dWUtcGRmJzsKIiI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBwZGY6IHBkZiwKICAgIFNpZ25LZXlzOiBTaWduS2V5cywKICAgIERYQUFwcGxpY2F0aW9uQWxsSW5mbzogRFhBQXBwbGljYXRpb25BbGxJbmZvLAogICAgLy8gUmVjZWl2ZXJzLAogICAgRWRpdG9yOiBFZGl0b3IsCiAgICBNb2RhbDogTW9kYWwKICB9LAogIHdhdGNoOiB7CiAgICBwYWdlOiBmdW5jdGlvbiBwYWdlKCkgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICBzZWFyY2hWYWx1ZTogZnVuY3Rpb24gc2VhcmNoVmFsdWUodikgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWlnaHQ6IG51bGwsCiAgICAgIG1vZGFsRG9jMTogZmFsc2UsCiAgICAgIGZpbGVFeWU6IGZhbHNlLAogICAgICBmaWxlVXJsOiAnJywKICAgICAgaXNTaWRlYmFyOiBmYWxzZSwKICAgICAgY29tbWlzc2lvblR5cGVJZDogbnVsbCwKICAgICAgY29tbWVudDogbnVsbCwKICAgICAgZ2l2ZVZpc2FEYXRlOiBudWxsLAogICAgICBjb21taXNzaW9uQ29tbWVudDogJycsCiAgICAgIGNvbW1pc3Npb25Nb2RhbExvYWRlcjogZmFsc2UsCiAgICAgIGNvbW1pc3Npb25UeXBlczogW10sCiAgICAgIGNvbW1pc3Npb25zTW9kYWw6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgc3JjOiBudWxsLAogICAgICBsb2FkaW5nQnlJZDogZmFsc2UsCiAgICAgIG51bVBhZ2VzOiB1bmRlZmluZWQsCiAgICAgIHJlYXNvblJlamVjdGVkOiAiIiwKICAgICAgc2VsZWN0ZWRUckl0ZW06IHt9LAogICAgICB2aXNhSW5mbzoge30sCiAgICAgIGFjdGl2ZTogIiIsCiAgICAgIHRpdGxlOiB0aGlzLiR0KCJyZWNlaXZlZCIpLAogICAgICBpdGVtczogW3sKICAgICAgICB0ZXh0OiB0aGlzLiR0KCJtZW51IiksCiAgICAgICAgaHJlZjogIi8iCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCJyZWNlaXZlZCIpLAogICAgICAgIGFjdGl2ZTogdHJ1ZQogICAgICB9XSwKICAgICAgbGlzdDogW10sCiAgICAgIHNlYXJjaFZhbHVlOiAiIiwKICAgICAgcGFnZTogMSwKICAgICAgbGltaXQ6IDIwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdG90YWw6IDEsCiAgICAgIGlzTW9kYWw6IGZhbHNlLAogICAgICBjdXJyZW50SXRlbToge30sCiAgICAgIHNpZ25hdHVyZU1vZGFsOiBmYWxzZSwKICAgICAgbG9hZGVyQnV0dG9uOiBmYWxzZSwKICAgICAgdmlzYUZpbGVWaWV3OiB7CiAgICAgICAgbW9kYWw6IGZhbHNlLAogICAgICAgIHNyYzogbnVsbAogICAgICB9LAogICAgICBpc01vZGFsS2V5czogZmFsc2UsCiAgICAgIGFncmVlbWVudENvdW50OiAwLAogICAgICBzaWduYXR1cmVDb3VudDogMCwKICAgICAgcmV2aWV3Q291bnQ6IDAsCiAgICAgIGxvYWRlclJlY2VpdmVyOiBmYWxzZSwKICAgICAgaW5mb0RhdGE6IHt9LAogICAgICByZWplY3RlZExvYWRlcjogZmFsc2UsCiAgICAgIGlzUmVqZWN0ZWRNb2RhbDogZmFsc2UsCiAgICAgIHZpZXdNb2RhbDogZmFsc2UsCiAgICAgIGZpbGVzTGlzdDogW10sCiAgICAgIHZpZXdNb2RhbEJlZm9yZVNpZ25lZDogZmFsc2UsCiAgICAgIGxvYWRlclBkZjogZmFsc2UsCiAgICAgIGlsb3ZhVXBsb2FkUGF0aDogbnVsbCwKICAgICAgdmlld0lsb3ZhTW9kYWw6IGZhbHNlLAogICAgICBiYXNlNjQ6IG51bGwsCiAgICAgIGVkaXRNb2RhbDogZmFsc2UsCiAgICAgIGxvYWRlcjogZmFsc2UsCiAgICAgIGNvbnRleHRUZXh0OiAiIgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYXJhbXM6IGZ1bmN0aW9uIHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5saW1pdCwKICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZSAtIDEKICAgICAgICB9LAogICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2hWYWx1ZQogICAgICB9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgY2FuY2VsRVlFOiBmdW5jdGlvbiBjYW5jZWxFWUUoKSB7CiAgICAgIHRoaXMuZmlsZUV5ZSA9IGZhbHNlOwogICAgICB0aGlzLm1vZGFsRG9jMSA9IHRydWU7CiAgICB9LAogICAgb2tFWUU6IGZ1bmN0aW9uIG9rRVlFKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzMi5maWxlRXllID0gZmFsc2U7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsb3NlRG9jOiBmdW5jdGlvbiBjbG9zZURvYygpIHsKICAgICAgdGhpcy5maWxlRXllID0gZmFsc2U7CiAgICAgIHRoaXMubW9kYWxEb2MxID0gdHJ1ZTsKICAgIH0sCiAgICBvcGVuRXllRmlsZTogZnVuY3Rpb24gb3BlbkV5ZUZpbGUoaXRlbSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gVmVyaWZ5RG9jdW1lbnRTZXJ2aWNlLnZlcmlmeURvY3VtZW50QnlJZChfdGhpczMuc2VsZWN0ZWRUckl0ZW0uYXBwbGljYXRpb25JZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuY29tbWlzc2lvblR5cGVzID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgaWYgKGl0ZW0udXBsb2FkUGF0aCkgewogICAgICAgICAgICAgICAgX3RoaXMzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5tb2RhbERvYzEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXMzLmZpbGVFeWUgPSB0cnVlOwogICAgICAgICAgICAgICAgICBfdGhpczMuZmlsZVVybCA9IGl0ZW0udXBsb2FkUGF0aDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgVklTQUJ0bjogZnVuY3Rpb24gVklTQUJ0bigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIShPYmplY3Qua2V5cyhfdGhpczQuc2VsZWN0ZWRUckl0ZW0pLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpczQuJHRvYXN0KF90aGlzNC4kdCgnc3VibW9kdWxlcy5kb2Muc2VsZWN0ZWRfZG9jJyksIHsKICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gY3J1ZEFuZExpc3RzU2VydmljZS5nZXRMaXN0KCdlbXBsb3llZS9nZXQtYWxsLWVtcGxveWVlL2luLW1vbm9wb2x5LWRlcGFydG1lbnQnLCBfdGhpczQudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsIG51bGwsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXM0LmNvbW1pc3Npb25UeXBlcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF90aGlzNC5jb21taXNzaW9uc01vZGFsID0gdHJ1ZTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2hvd1Zpc2FGaWxlVmlldzogZnVuY3Rpb24gc2hvd1Zpc2FGaWxlVmlldyhhcHBsaWNhdGlvbklkKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB0aGlzLmxvYWRpbmdCeUlkID0gdHJ1ZTsKICAgICAgbGV0dGVyU2VydmljZS5keGFWaXNhRGF0YUdldEZpbGUoYXBwbGljYXRpb25JZCkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIF90aGlzNS52aXNhRmlsZVZpZXcuc3JjID0gJ2RhdGE6YXBwbGljYXRpb24vcGRmO2Jhc2U2NCwnICsgZGF0YTsKICAgICAgICBfdGhpczUudmlzYUZpbGVWaWV3Lm1vZGFsID0gdHJ1ZTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM1LmxvYWRpbmdCeUlkID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHZpc2FfYnRuOiBmdW5jdGlvbiB2aXNhX2J0bigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoX3RoaXM2LmNvbW1pc3Npb25UeXBlSWQgJiYgX3RoaXM2LmdpdmVWaXNhRGF0ZSkgewogICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pc3Npb25Nb2RhbExvYWRlciA9IHRydWU7CiAgICAgICAgICAgICAgICBMZXR0ZXJTZXJ2aWNlLlNpZ25hdHVyZUdpdmVWaXNhRm9yRFhBKHsKICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25JZDogX3RoaXM2LnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uSWQsCiAgICAgICAgICAgICAgICAgIGVtcGxveWVlSWQ6IF90aGlzNi5jb21taXNzaW9uVHlwZUlkLAogICAgICAgICAgICAgICAgICBsZXR0ZXJJZDogX3RoaXM2LnNlbGVjdGVkVHJJdGVtLmlkCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGNvbW1lbnQ6IF90aGlzNi5jb21tZW50LAogICAgICAgICAgICAgICAgICBnaXZlVmlzYURhdGU6IF90aGlzNi5naXZlVmlzYURhdGUKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBfdGhpczYuJHRvYXN0KF90aGlzNi4kdCgnc3VjY2VzLnRpdGxlJyksIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21taXNzaW9uVHlwZUlkID0gbnVsbDsKICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pc3Npb25Db21tZW50ID0gJyc7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5jb21tZW50ID0gJyc7CiAgICAgICAgICAgICAgICAgIF90aGlzNi5naXZlVmlzYURhdGUgPSBudWxsOwogICAgICAgICAgICAgICAgICBfdGhpczYuY29tbWlzc2lvbnNNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgICBfdGhpczYuaXNDb21taXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgICAgIH0pLmZpbmFsbHkoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LmNvbW1pc3Npb25Nb2RhbExvYWRlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZ2V0TGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZ2V0VmlzYUluZm8oKTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM2LnNlbGVjdGVkVHJJdGVtID0ge307CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRWaXNhSW5mbzogZnVuY3Rpb24gZ2V0VmlzYUluZm8oKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMgIT09ICJDUkVBVEVEIiAmJiB0aGlzLnNlbGVjdGVkVHJJdGVtLnN0YXR1cyAhPT0gIlNFTkRfRk9SX1RBS0VfVklTQSIpIHsKICAgICAgICBTZXJ2aWNlLmdldFZpc2FJbmZvKHRoaXMuc2VsZWN0ZWRUckl0ZW0uYXBwbGljYXRpb25JZCkudGhlbihmdW5jdGlvbiAoX3JlZjMpIHsKICAgICAgICAgIHZhciBkYXRhID0gX3JlZjMuZGF0YTsKICAgICAgICAgIF90aGlzNy52aXNhSW5mbyA9IGRhdGE7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge30pOwogICAgICB9CiAgICB9LAogICAgRFhBSW5mb0J0bjogZnVuY3Rpb24gRFhBSW5mb0J0bigpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczguaXNTaWRlYmFyID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC4kcmVmcy5pc1NpZGViYXJfcmVmLmdldEFwcGxpY2F0aW9uSW5mb0J5SWQoKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LiRyZWZzLmlzU2lkZWJhcl9yZWYuZ2V0VmlzYUluZm9CeUlkKCk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsb3NlU2lkZWJhcjogZnVuY3Rpb24gY2xvc2VTaWRlYmFyKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzOS5pc1NpZGViYXIgPSBmYWxzZTsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb3BlblNpZ25hdHVyZU1vZGFsRm9yQ29tbWlzc2lvbjogZnVuY3Rpb24gb3BlblNpZ25hdHVyZU1vZGFsRm9yQ29tbWlzc2lvbigpIHsKICAgICAgaWYgKHRoaXMuY29tbWlzc2lvblR5cGVJZCkgewogICAgICAgIHRoaXMuc2lnbmF0dXJlTW9kYWwgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGN1c3RvbUxhYmVsQ29tbWlzc2lvblR5cGVzOiBmdW5jdGlvbiBjdXN0b21MYWJlbENvbW1pc3Npb25UeXBlcyhvcHQpIHsKICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5jb21taXNzaW9uVHlwZXMuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkID09IG9wdDsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQoc2VsZWN0ZWQuZnVsbE5hbWUsICIgLVxuICAgICAgICAiKS5jb25jYXQodGhpcy5nZXROYW1lKHsKICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQuZGlyZWN0b3J5UG9zaXRpb25OYW1lUnUsCiAgICAgICAgICBuYW1lTHQ6IHNlbGVjdGVkLmRpcmVjdG9yeVBvc2l0aW9uTmFtZUx0LAogICAgICAgICAgbmFtZVV6OiBzZWxlY3RlZC5kaXJlY3RvcnlQb3NpdGlvbk5hbWVVegogICAgICAgIH0pLCAiICIpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0sCiAgICBjaGFuZ2VUZXh0OiBmdW5jdGlvbiBjaGFuZ2VUZXh0KHRleHQpIHsKICAgICAgdGhpcy5jb250ZXh0VGV4dCA9IHRleHQ7CiAgICB9LAogICAgb2tNb2RhbDogZnVuY3Rpb24gb2tNb2RhbCgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgICB2YXIgdGV4dCA9IHRoaXMuJHJlZnMuZWRpdG9yUmVmLnRleHQ7CiAgICAgIHRoaXMuJHJlZnMuZWRpdE1vZGFsUmVmLmxvYWRpbmcodHJ1ZSk7CiAgICAgIFNlcnZpY2Uuc2F2ZUxldHRlckJvZHkodGhpcy5zZWxlY3RlZFRySXRlbS5sZXR0ZXJJZCwgdGV4dCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxMC5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgX3RoaXMxMC5zdWNjZXNzRWRpdGVkKCk7CiAgICAgICAgX3RoaXMxMC5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICBfdGhpczEwLmVkaXRNb2RhbCA9IGZhbHNlOwogICAgICAgIC8qIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIGxldCBuZXdkYXRhID0gdGhpcy5saXN0LmZpbmQoKGUpID0+IGUuaWQgPT0gdGVtcERhdGEuaWQpOw0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUckl0ZW0gPSBuZXdkYXRhOw0KICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7DQogICAgICAgICAgdGhpcy5nZXRSZWNlaXZlcnModGhpcy5zZWxlY3RlZFRySXRlbSk7DQogICAgICAgIH0sIDUwMCk7ICovCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7fSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMC4kcmVmcy5lZGl0TW9kYWxSZWYubG9hZGluZyhmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHZpZXdNb2RhbENsaWNrOiBmdW5jdGlvbiB2aWV3TW9kYWxDbGljaygpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzLmVkaXRNb2RhbFJlZi5sb2FkaW5nUGRmKHRydWUpOwogICAgICB0aGlzLnZpZXdNb2RhbEJlZm9yZVNpZ25lZCA9IHRydWU7CiAgICAgIHRoaXMubG9hZGVyUGRmID0gdHJ1ZTsKICAgICAgdGhpcy5iYXNlNjQgPSBudWxsOwogICAgICBTZXJ2aWNlLmNvbnZlcnQodGhpcy5jb250ZXh0VGV4dCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczExLmJhc2U2NCA9IHJlcy5kYXRhOwogICAgICAgIH0sIDQwMCk7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTEubG9hZGVyUGRmID0gZmFsc2U7CiAgICAgICAgX3RoaXMxMS4kcmVmcy5lZGl0TW9kYWxSZWYubG9hZGluZ1BkZihmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXRMZXR0ZXI6IGZ1bmN0aW9uIGVkaXRMZXR0ZXIoaXRlbSkgewogICAgICAvKiB0aGlzLmVkaXRNb2RhbCA9IHRydWU7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgU2VydmljZS5nZXRCb2R5KGl0ZW0ubGV0dGVySWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGxldCBlZGl0b3IgPSB0aGlzLiRyZWZzLmVkaXRvclJlZjsNCiAgICAgICAgICBpZiAoZWRpdG9yKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMuX2VtcHR5KHJlcy5kYXRhKSkgew0KICAgICAgICAgICAgICBlZGl0b3Iuc2V0VGV4dENvbnRlbnQocmVzLmRhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9LCA0MDApOyAqLwogICAgfSwKICAgIHZpZXdQcm9qZWN0OiBmdW5jdGlvbiB2aWV3UHJvamVjdChzZWxlY3RlZExldHRlcikgewogICAgICAvKiB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgbmFtZTogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdFR5cGUgPT09ICdDT01NSVNTSU9OJyA/ICdDb21taXNzaW9uUHJvamVjdHMnIDogJ1Byb2plY3RzTWFpbicsDQogICAgICAgICAgcXVlcnk6IHsgcGFnZTogIm92ZXJ2aWV3IiwgaWQ6IHNlbGVjdGVkTGV0dGVyLnByb2plY3RJZCB9LA0KICAgICAgfSk7ICovCiAgICAgIHZhciByb3V0ZURhdGEgPSB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh7CiAgICAgICAgbmFtZTogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdFR5cGUgPT09ICdDT01NSVNTSU9OJyA/ICdDb21taXNzaW9uUHJvamVjdHMnIDogJ1Byb2plY3RzTWFpbicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHBhZ2U6ICJvdmVydmlldyIsCiAgICAgICAgICBpZDogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdElkCiAgICAgICAgfQogICAgICB9KTsKICAgICAgd2luZG93Lm9wZW4ocm91dGVEYXRhLmhyZWYsICdfYmxhbmsnKTsKICAgIH0sCiAgICB2aWV3SWxvdmE6IGZ1bmN0aW9uIHZpZXdJbG92YShpdGVtKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKICAgICAgaWYgKHRoaXMuZ2V0RXh0KGl0ZW0udXBsb2FkUGF0aCA/IGl0ZW0udXBsb2FkUGF0aCA6IGl0ZW0udXJsKSA9PT0gInBkZiIpIHsKICAgICAgICB0aGlzLmlsb3ZhVXBsb2FkUGF0aCA9IGl0ZW0udXBsb2FkUGF0aCA/IGl0ZW0udXBsb2FkUGF0aCA6IGl0ZW0udXJsOwogICAgICAgIHRoaXMudmlld0lsb3ZhTW9kYWwgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY29udmVydFRvUGRmKGl0ZW0pLnRoZW4oZnVuY3Rpb24gKHVwbG9hZFBhdGgpIHsKICAgICAgICAgIGlmICh1cGxvYWRQYXRoKSB7CiAgICAgICAgICAgIF90aGlzMTIuaWxvdmFVcGxvYWRQYXRoID0gdXBsb2FkUGF0aDsKICAgICAgICAgICAgX3RoaXMxMi52aWV3SWxvdmFNb2RhbCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjb252ZXJ0VG9QZGY6IGZ1bmN0aW9uIGNvbnZlcnRUb1BkZihzZWxlY3RlZEl0ZW0pIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwogICAgICB2YXIgZm9yU2lnbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzLCByZWopIHsKICAgICAgICB2YXIgY29uZmlnID0gewogICAgICAgICAgdXJsOiAiIi5jb25jYXQoc2VsZWN0ZWRJdGVtLnVybCksCiAgICAgICAgICBvdXRwdXR0eXBlOiAiLnBkZiIsCiAgICAgICAgICBmb3JTaWduOiBmb3JTaWduLAogICAgICAgICAga2V5OiBzZWxlY3RlZEl0ZW0ua2V5CiAgICAgICAgfTsKICAgICAgICBTZXJ2aWNlLmNvbnZlcnRUb1BkZkJ5QXBpKGNvbmZpZykudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIGlmIChycy5kYXRhLnVwbG9hZFBhdGgpIHsKICAgICAgICAgICAgX3RoaXMxMy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzMTMuc3JjID0gIiIuY29uY2F0KF90aGlzMTMuYmFzZVVybCwgIi8iKS5jb25jYXQocnMuZGF0YS51cGxvYWRQYXRoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlcyhycy5kYXRhLnVwbG9hZFBhdGgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVzKGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlKTsKICAgICAgICAgIHJlaihlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0QnlJZExldHRlcjogZnVuY3Rpb24gZ2V0QnlJZExldHRlcigpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwogICAgICBTZXJ2aWNlLmdldEJ5SWRMZXR0ZXIodGhpcy5zZWxlY3RlZFRySXRlbS5sZXR0ZXJJZCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBfdGhpczE0LmN1cnJlbnREb2MgPSBycy5kYXRhOwogICAgICAgIF90aGlzMTQubG9hZGVyUGRmID0gdHJ1ZTsKICAgICAgICBfdGhpczE0LmNvbnZlcnRUb1BkZihycy5kYXRhKS50aGVuKGZ1bmN0aW9uICh1cGxvYWRQYXRoKSB7CiAgICAgICAgICBpZiAoIXVwbG9hZFBhdGgpIHsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMxNC5jb252ZXJ0VG9QZGYocnMuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczE0LmxvYWRlclBkZiA9IGZhbHNlOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBfdGhpczE0LmxvYWRlclBkZiA9IGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LCA0MDAwKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMTQubG9hZGVyUGRmID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7fSk7CiAgICB9LAogICAgdmlld0xldHRlcjogZnVuY3Rpb24gdmlld0xldHRlcigpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwogICAgICB0aGlzLnZpZXdNb2RhbEJlZm9yZVNpZ25lZCA9IHRydWU7CiAgICAgIHRoaXMubG9hZGVyUGRmID0gdHJ1ZTsKICAgICAgdGhpcy5iYXNlNjQgPSBudWxsOwogICAgICBTZXJ2aWNlLnZpZXdQZGZCeUxldHRlcklkKHRoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMxNS5iYXNlNjQgPSByZXMuZGF0YTsKICAgICAgICB9LCAzMDApOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE1LmxvYWRlclBkZiA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB2aWV3RG9jQmVmb3JlU2lnbmVkOiBmdW5jdGlvbiB2aWV3RG9jQmVmb3JlU2lnbmVkKCkgewogICAgICAvLyB0aGlzLnZpZXdNb2RhbEJlZm9yZVNpZ25lZCA9IHRydWU7CiAgICAgIC8vIHRoaXMuZ2V0QnlJZExldHRlcigpOwogICAgICB0aGlzLnZpZXdMZXR0ZXIoKTsKICAgIH0sCiAgICBzZXRDdXJyZW50UGFnZTogZnVuY3Rpb24gc2V0Q3VycmVudFBhZ2UocGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsKICAgIH0sCiAgICBnZXRBdHRhY2hlZEZpbGVzQnlJZDogZnVuY3Rpb24gZ2V0QXR0YWNoZWRGaWxlc0J5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwogICAgICBTZXJ2aWNlLmdldEF0dGFjaGVkRmlsZXNCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczE2LmZpbGVzTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlUmVqZWN0ZWQ6IGZ1bmN0aW9uIHNhdmVSZWplY3RlZChwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKICAgICAgdGhpcy5jb252ZXJ0VG9QZGYodGhpcy5zZWxlY3RlZFRySXRlbSkudGhlbihmdW5jdGlvbiAocjEpIHsKICAgICAgICBfdGhpczE3LnJlamVjdGVkTG9hZGVyID0gdHJ1ZTsKICAgICAgICBTZXJ2aWNlLnNhdmVSZWplY3RlZChfdGhpczE3LnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCBfdGhpczE3LnNlbGVjdGVkVHJJdGVtLmlkLCBfdGhpczE3LnJlYXNvblJlamVjdGVkLCBwYXlsb2FkKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICAgIHZhciB0ZW1wRGF0YTsKICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczE3LmlzUmVqZWN0ZWRNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczE3LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE3LnN1Y2Nlc3NTYXZlZCgpOwogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE3LmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU5KTsKICAgICAgICB9KSkpLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMxNy5yZWplY3RlZExvYWRlciA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzaG93UmVqZWN0ZWRNb2RhbDogZnVuY3Rpb24gc2hvd1JlamVjdGVkTW9kYWwoKSB7CiAgICAgIHRoaXMuaXNSZWplY3RlZE1vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICB2aWV3RG9jU2lnbmVkOiBmdW5jdGlvbiB2aWV3RG9jU2lnbmVkKCkgewogICAgICB0aGlzLnZpZXdNb2RhbCA9IHRydWU7CiAgICB9LAogICAgc2lnblN1Y2Nlc3M6IGZ1bmN0aW9uIHNpZ25TdWNjZXNzKGRhdGEpIHsKICAgICAgdmFyIF90aGlzMTggPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTMoKSB7CiAgICAgICAgdmFyIHBheWxvYWQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgc2lnbmVkQ29udGVudDogZGF0YS5jb250ZW50LAogICAgICAgICAgICAgICAgaW5uOiBkYXRhLmlubiwKICAgICAgICAgICAgICAgIHBuZmw6IGRhdGEucG5mbAogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgaWYgKCFfdGhpczE4LmlzUmVqZWN0ZWRNb2RhbCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpczE4LmlzTW9kYWxLZXlzID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXMxOC5zaWduYXR1cmVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzMTguc2F2ZVJlamVjdGVkKHBheWxvYWQpOwogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgaWYgKCEoX3RoaXMxOC5zZWxlY3RlZFRySXRlbS5zdGF0dXMgPT09ICdDT01NSVNTSU9OX1NFTkQnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgU2VydmljZS5vbmx5RG9jU2lnbihwYXlsb2FkLCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtLmlkKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguaXNNb2RhbEtleXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dNc2dTdWNjZXNzKF90aGlzMTguJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDE3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGlmICghKF90aGlzMTguc2VsZWN0ZWRUckl0ZW0uc3RhdHVzID09PSAnTk9UX0JFTE9ORycpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxNDsKICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5vbmx5RG9jU2lnbihwYXlsb2FkLCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtLmlkKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IFNlcnZpY2Uub25seURvY1NpZ25Ob3RCZWxvbmcocGF5bG9hZCwgdGhpcy5zZWxlY3RlZFRySXRlbS5pZCkKICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOC5pc01vZGFsS2V5cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOC5zaWduYXR1cmVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvd01zZ1N1Y2Nlc3MoX3RoaXMxOC4kdCgic3VjY2Vzc0RvY1NpZ25lZCIpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTguZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgICAgICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgU2VydmljZS5zaWduRG9jKHBheWxvYWQsIF90aGlzMTguc2VsZWN0ZWRUckl0ZW0uaWQsIF90aGlzMTguY29tbWlzc2lvblR5cGVJZCwgX3RoaXMxOC5jb21taXNzaW9uQ29tbWVudCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEyKCkgewogICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE4LmlzTW9kYWxLZXlzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE4LnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE4LmNvbW1pc3Npb25zTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dNc2dTdWNjZXNzKF90aGlzMTguJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTIpOwogICAgICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRSZWNlaXZlcnM6IGZ1bmN0aW9uIGdldFJlY2VpdmVycyhpdGVtKSB7CiAgICAgIHZhciBfdGhpczE5ID0gdGhpczsKICAgICAgdGhpcy5sb2FkZXJSZWNlaXZlciA9IHRydWU7CiAgICAgIFNlcnZpY2UuZ2V0UmVjZWl2ZXJzKGl0ZW0ubGV0dGVySWQpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgX3RoaXMxOS5pbmZvRGF0YSA9IHJzLmRhdGE7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTkubG9hZGVyUmVjZWl2ZXIgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgY2xpY2tUckl0ZW06IGZ1bmN0aW9uIGNsaWNrVHJJdGVtKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMjAgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNCQoX2NvbnRleHQxNCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczIwLmxvYWRpbmdCeUlkID0gdHJ1ZTsKICAgICAgICAgICAgICBpZiAoIShfdGhpczIwLnNlbGVjdGVkVHJJdGVtLmlkID09IGl0ZW0uaWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMjAuc2VsZWN0ZWRUckl0ZW0gPSB7fTsKICAgICAgICAgICAgICBfdGhpczIwLmluZm9EYXRhID0ge307CiAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF90aGlzMjAuc2VsZWN0ZWRUckl0ZW0gPSBpdGVtOwogICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDk7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjAuZ2V0VmlzYUluZm8oKTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF90aGlzMjAubG9hZGluZ0J5SWQgPSBmYWxzZTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbmF0dXJlSXRlbTogZnVuY3Rpb24gc2lnbmF0dXJlSXRlbSgpIHsKICAgICAgdGhpcy5pc01vZGFsS2V5cyA9IHRydWU7CiAgICB9LAogICAgbWFrZUFncmVlOiBmdW5jdGlvbiBtYWtlQWdyZWUoaXRlbSkgewogICAgICB2YXIgX3RoaXMyMSA9IHRoaXM7CiAgICAgIHRoaXMuY25mKCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIFNlcnZpY2UubWFrZUFncmVlKGl0ZW0ubGV0dGVySWQpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE1JChfY29udGV4dDE1KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxNS5wcmV2ID0gX2NvbnRleHQxNS5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMyMS5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIxLnN1Y2Nlc3NTYXZlZCgpOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyMS5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgICAgICB9KSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbWFrZVJldmlld0ZvckNvbW1pc3Npb246IGZ1bmN0aW9uIG1ha2VSZXZpZXdGb3JDb21taXNzaW9uKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMjIgPSB0aGlzOwogICAgICB0aGlzLmNuZigpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgaWYgKHJzLnZhbHVlKSB7CiAgICAgICAgICBTZXJ2aWNlLm1ha2VSZXZpZXdGb3JDb21taXNzaW9uKGl0ZW0uaWQsIGl0ZW0uY29tbWVudCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE2KCkgewogICAgICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTYkKF9jb250ZXh0MTYpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczIyLnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjIuc3VjY2Vzc1NhdmVkKCk7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIyLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE2KTsKICAgICAgICAgIH0pKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtYWtlUmV2aWV3OiBmdW5jdGlvbiBtYWtlUmV2aWV3KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMjMgPSB0aGlzOwogICAgICB0aGlzLmNuZigpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgaWYgKHJzLnZhbHVlKSB7CiAgICAgICAgICBTZXJ2aWNlLm1ha2VSZXZpZXcoaXRlbS5sZXR0ZXJJZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KCkgewogICAgICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTckKF9jb250ZXh0MTcpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgLy8gbGV0IHRlbXBEYXRhID0gdGhpcy5zZWxlY3RlZFRySXRlbTsKICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczIzLnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjMuc3VjY2Vzc1NhdmVkKCk7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIzLmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgICAgIH0pKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZWplY3RDb25maXJtOiBmdW5jdGlvbiByZWplY3RDb25maXJtKCkgewogICAgICB2YXIgX3RoaXMyNCA9IHRoaXM7CiAgICAgIGNuZkRvYyh0aGlzLiR0KCJtZXNzYWdlcy5yZWplY3RfdGl0bGUiKSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIF90aGlzMjQuc2lnbmF0dXJlTW9kYWwgPSB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2lnbkl0ZW06IGZ1bmN0aW9uIHNpZ25JdGVtKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMjUgPSB0aGlzOwogICAgICBpZiAoaXRlbS5hY3Rpb24gPT09ICJTSUdOQVRVUkUiKSB7CiAgICAgICAgLyogaWYgKGl0ZW0uc3RhdHVzID09PSAnQ09NTUlTU0lPTl9TRU5EJykgew0KICAgICAgICAgICAgdGhpcy5zaWduYXR1cmVNb2RhbCA9IHRydWU7DQogICAgICAgIH0gZWxzZSB7ICovCiAgICAgICAgdGhpcy5jdXJyZW50SXRlbSA9IGl0ZW07CiAgICAgICAgLy8gdGhpcy5zaWduYXR1cmVNb2RhbCA9IHRydWU7CgogICAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gIlNFTkRfU0lHTiIgfHwgaXRlbS5zdGF0dXMgPT09ICJTRU5EIiB8fCBpdGVtLnN0YXR1cyA9PT0gJ0NPTU1JU1NJT05fU0VORCcpIHsKICAgICAgICAgIC8vIEdFVCBDT01NSVNTSU9OX1RZUEVTCiAgICAgICAgICAvKiBjcnVkQW5kTGlzdHNTZXJ2aWNlLnNlYXJjaExpc3QoJ2RpcmVjdG9yeS9jb21taXNzaW9uL2NvbW1pc3Npb24tdHlwZScsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsIG51bGwsIHRydWUpDQogICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgICB0aGlzLmNvbW1pc3Npb25UeXBlcyA9IHJlcy5kYXRhLmxpc3QNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSkNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLmNvbW1pc3Npb25zTW9kYWwgPSB0cnVlOyAqLwoKICAgICAgICAgIC8vIHRoaXMuc2lnbmF0dXJlTW9kYWwgPSB0cnVlOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sZXR0ZXIvaW5jb21lLyIuY29uY2F0KGl0ZW0ubGV0dGVySWQsICIvIikuY29uY2F0KGl0ZW0uaWQpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY25mRG9jKHRoaXMuJHQoImRvY0NvbmZpcm0iKSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgaWYgKHJzLnZhbHVlKSB7CiAgICAgICAgICAgICAgX3RoaXMyNS5zaWduYXR1cmVNb2RhbCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAvLyB9CiAgICAgIH0gZWxzZSBpZiAoaXRlbS5hY3Rpb24gPT09ICJBR1JFRU1FTlQiKSB7CiAgICAgICAgdGhpcy5tYWtlQWdyZWUoaXRlbSk7CiAgICAgIH0gZWxzZSBpZiAoaXRlbS5hY3Rpb24gPT09ICJSRVZJRVciKSB7CiAgICAgICAgaWYgKGl0ZW0uc3RhdHVzID09PSAnU0VORF9GT1JfQ09NTUlTU0lPTicpIHsKICAgICAgICAgIHRoaXMubWFrZVJldmlld0ZvckNvbW1pc3Npb24oaXRlbSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubWFrZVJldmlldyhpdGVtKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMyNiA9IHRoaXM7CiAgICAgIGlmICghdGhpcy4kcmVmcy5hZGRSZWYuY2hlY2tWYWxpZGl0eSgpKSB7CiAgICAgICAgU2VydmljZS51cGxvYWQodGhpcy4kcmVmcy5hZGRSZWYuZm9ybSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIGlmIChycy5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzMjYuZ2V0TGlzdCgpOwogICAgICAgICAgICB2YXIgcm91dGVEYXRhID0gX3RoaXMyNi4kcm91dGVyLnJlc29sdmUoewogICAgICAgICAgICAgIG5hbWU6ICJPZmZpY2UtRE9DVU1FTlQtY29tbWlzc2lvbiIsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHBhZ2U6ICJHRVQiLAogICAgICAgICAgICAgICAgaWQ6IHJzLmRhdGEuaWQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB3aW5kb3cub3Blbihyb3V0ZURhdGEuaHJlZiwgIl9ibGFuayIpOwogICAgICAgICAgICBfdGhpczI2LmlzTW9kYWwgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVudGVySW5mbygpOwogICAgICB9CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHRoaXMuaXNNb2RhbCA9IHRydWU7CiAgICB9LAogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMjcgPSB0aGlzOwogICAgICB2YXIgcmVzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogICAgICB2YXIgcmVzZXRJZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBTZXJ2aWNlLmdldExpc3RMZXR0ZXJWaXNhKHRoaXMucGFyYW1zLCB0aGlzLmFjdGl2ZSkudGhlbihmdW5jdGlvbiAoX3JlZjExKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmMTEuZGF0YTsKICAgICAgICBfdGhpczI3Lmxpc3QgPSBkYXRhLmxpc3Q7CiAgICAgICAgX3RoaXMyNy50b3RhbCA9IGRhdGEudG90YWw7CiAgICAgICAgaWYgKHJlc2V0KSB7CiAgICAgICAgICB2YXIgbmV3ZGF0YSA9IF90aGlzMjcubGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBlLmlkID09IHJlc2V0SWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMjcuc2VsZWN0ZWRUckl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdkYXRhKTsKICAgICAgICAgIC8vIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICBfdGhpczI3LmdldFJlY2VpdmVycyhfdGhpczI3LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMjcubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;EACAA;IACAC;IACAC;IACAC;IACA;IACAC;IAAAC;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC,QACA;QACAC;QACAC;MACA,GACA;QACAD;QACAH;MACA,EACA;MACAK;MACA1B;MACAD;MACA4B;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACApB;MACA;MACAqB;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAC;MACA;QACAA;UACAC;UACA1D;QACA;QACA2D;MACA;IACA;EACA;EAEAC;IACAC;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OAEAC,8EACAC;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;cAEA;gBACA;kBACA;kBACA;kBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MAEAC;gBAAA;gBAAA;cAAA;cACA;gBAAAC;cAAA;cAAA;cAAA;YAAA;cAAA;cAAA,OAEAC,+HACAN;gBACA;cACA,GACAC;gBACAC;cACA;YAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAGA;IACAK;MAAA;MACA;MACAC;QAAA;QACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;gBACA;gBACAC;kBACAC;kBACAC;kBACAC;gBACA;kBACAtE;kBACAC;gBACA,GACAwD;kBACA;oBAAAK;kBAAA;kBACA;kBACA;kBACA;kBACA;kBAEA;gBACA,GACAJ;kBACA;kBACAC;gBACA,GACAY;kBAAA;oBAAA;sBAAA;wBACA;wBAAA;wBAAA,OACA;sBAAA;wBAAA;wBAAA,OACA;sBAAA;wBACA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MACA;QACAC,uDACAhB;UAAA;UACA;QACA,GACAC;UACA;QAAA,CACA,EACAa,qBACA;MACA;IACA;IACAG;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;QACA;MACA;QACA;UAAAd;QAAA;MACA;IACA;IACAe;MACA;QAAA;MAAA;MACA;QACA,2DACA;UACAC;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;MACAT,2DACAhB;QACA;QACA;QACA;QACA;QACA;AACA;AACA;AACA;AACA;AACA;MACA,GACAC,oBACA,GACAa;QACA;MACA;IACA;IACAY;MAAA;MACA;MACA;MACA;MACA;MAEAV,kCACAhB;QACA2B;UACA;QACA;MACA,GACAb;QACA;QACA;MACA;IACA;IACAc;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAVA,CAYA;IACAC;MACA;AACA;AACA;AACA;MACA;QACAC;QACAC;UAAAjG;UAAAkG;QAAA;MACA;MACAC;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;QACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IAEAC;MAAA;MAAA;MACA;QACA;UACAC;UACAC;UACAC;UACAC;QACA;QACAvB,kCACAhB;UACA;YACA;cACA;YACA;YACAwC;UACA;YACAA;UACA;QACA,GACAvC;UACA;UACAwC;QACA;MACA;IACA;IACAC;MAAA;MACA1B,oDACAhB;QACA;QACA;QACA;UACA;YACA2B;cACA,8BACA3B;gBACA;cACA,GACAC;gBACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA,GACAA,oBACA;IACA;IACA0C;MAAA;MACA;MACA;MACA;MACA3B,wDACAhB;QACA2B;UACA;QACA;MACA,GACAb;QACA;MACA;IACA;IACA8B;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA9B;QACA;MACA;IACA;IACA+B;MAAA;MACA;QACA;QACA/B,qBACA,iCACA,2BACA,wBACAgC,QACA,CACAhD;UAAA;UAAA;YAAA;cAAA;gBACA;gBACAiD;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA,CAOA,IACAnC;UACA;QACA;MACA;IACA;IACAoC;MACA;IACA;IACAC;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAJ;gBACAK;gBACAC;gBACAC;cACA;cAAA,KACA;gBAAA;gBAAA;cAAA;cACA;cACA;cACA;cAAA;cAAA;YAAA;cAAA,MAEA;gBAAA;gBAAA;cAAA;cACAvC,wDACAhB;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACAiD;sBAAA;sBAAA,OACAO;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CAOA,IACAvD;gBACA;cAAA,CACA;cAAA;cAAA;YAAA;cAAA,MACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACAe,wDACAhB;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACA;sBACA;sBACA;sBACA;sBACA;sBACA;;sBAEA;sBACA;sBACAiD;sBAAA;sBAAA,OACAO;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CAQA,IACAvD;gBACA;cAAA,CACA;YAAA;cAAA;cAAA;YAAA;cAEAe,yGACAhB;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACA;sBACAiD;sBAAA;sBAAA,OACAO;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CAOA,IACAvD;gBACA;cAAA,CACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAGA;IACAwD;MAAA;MACA;MACAzC,oCACAhB;QACA;MACA,GACAc;QACA;MACA;IACA;IACA4C;MAAA;MAAA;QAAA;UAAA;YAAA;cACA;cAAA,MAEA;gBAAA;gBAAA;cAAA;cACA;cACA;cAAA;cAAA;YAAA;cAEA;cAAA;cAAA,OACA;YAAA;cAIA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA5C;YAAA;YAAA;cAAA;gBAAA;kBACAiC;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CAOA;QACA;MACA;IACA;IAEAY;MAAA;MACA;QACA;UACA7C;YAAA;YAAA;cAAA;gBAAA;kBACAiC;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CAOA;QACA;MACA;IACA;IACAa;MAAA;MACA;QACA;UACA9C;YAAA;YAAA;cAAA;gBAAA;kBACA;kBACAiC;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CAOA;QACA;MACA;IACA;IACAc;MAAA;MACAC;QACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;AACA;AACA;QACA;QACA;;QAEA;UAEA;UACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;UAEA;UACA,2CACAC,oCACA;QACA;UACAF;YACA;cACA;YACA;UACA;QACA;QACA;MACA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAG;MAAA;MACA;QACAnD;UACA;YACA;YACA;cACAc;cACAC;gBAAAjG;gBAAAkG;cAAA;YACA;YACAC;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAmC;MACA;IACA;IACAC;MAAA;MAAA;MAAA;MACA;MACArD,oDACAhB;QAAA;QACA;QACA;QACA;UACA;YAAA;UAAA;UACA;UACA;UACA;QACA;MACA,GACAC;QACA;MAAA,CACA,EACAa;QACA;MACA;IACA;EACA;AAEA","names":["components","pdf","SignKeys","DXAApplicationAllInfo","Editor","Modal","watch","page","searchValue","data","height","modalDoc1","fileEye","fileUrl","isSidebar","commissionTypeId","comment","giveVisaDate","commissionComment","commissionModalLoader","commissionTypes","commissionsModal","currentPage","src","loadingById","numPages","reasonRejected","selectedTrItem","visaInfo","active","title","items","text","href","list","limit","loading","total","isModal","currentItem","signatureModal","loaderButton","visaFileView","modal","isModalKeys","agreementCount","signatureCount","reviewCount","loaderReceiver","infoData","rejectedLoader","isRejectedModal","viewModal","filesList","viewModalBeforeSigned","loaderPdf","ilovaUploadPath","viewIlovaModal","base64","editModal","loader","contextText","created","computed","params","itemsPerPage","search","methods","cancelEYE","okEYE","closeDoc","openEyeFile","VerifyDocumentService","then","catch","console","VISABtn","Object","type","crudAndListsService","showVisaFileView","letterService","visa_btn","LetterService","applicationId","employeeId","letterId","finally","getVisaInfo","Service","DXAInfoBtn","closeSidebar","openSignatureModalForCommission","customLabelCommissionTypes","nameRu","nameLt","nameUz","changeText","okModal","viewModalClick","setTimeout","editLetter","viewProject","name","query","id","window","viewIlova","convertToPdf","url","outputtype","forSign","key","res","rej","getByIdLetter","viewLetter","viewDocBeforeSigned","setCurrentPage","getAttachedFilesById","saveRejected","payload","tempData","showRejectedModal","viewDocSigned","signSuccess","signedContent","inn","pnfl","showMsgSuccess","getReceivers","clickTrItem","signatureItem","makeAgree","makeReviewForCommission","makeReview","rejectConfirm","cnfDoc","signItem","item","save","add","getList"],"sourceRoot":"src/modules/letter/visa","sources":["visa.vue"],"sourcesContent":["<script>\r\n// import Layout from \"@/router/layouts/main\";\r\n// import PageHeader from \"@/components/page-header\";\r\nimport Service from \"../letterService\";\r\n// import crudAndListsService from '@/shared/services/crud_and_list.service'\r\n/**\r\n * Products-order component\r\n */\r\nimport { cnfDoc, showMsgSuccess } from \"@/helper\";\r\nimport SignKeys from \"../SignKeys.vue\";\r\n// import Receivers from \"./receivers.vue\";\r\nimport Editor from \"../create/froal.editor.vue\";\r\nimport Modal from \"../create/modal.vue\";\r\nimport DXAApplicationAllInfo from \"../monitor/DXA info/index\";\r\nimport crudAndListsService from '@/shared/services/crud_and_list.service'\r\nimport LetterService from '../../letter/letterService'\r\nimport VerifyDocumentService from \"../../letter/verifyDocument.service\";\r\nimport letterService from \"@/modules/letter/letterService\";\r\nimport pdf from 'vue-pdf'\r\n\r\n``\r\nexport default {\r\n  components: {\r\n    pdf,\r\n    SignKeys,\r\n    DXAApplicationAllInfo,\r\n    // Receivers,\r\n    Editor, Modal\r\n  },\r\n  watch: {\r\n    page() {\r\n      this.getList();\r\n    },\r\n    searchValue(v) {\r\n      this.getList();\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      height: null,\r\n      modalDoc1: false,\r\n      fileEye: false,\r\n      fileUrl: '',\r\n      isSidebar: false,\r\n      commissionTypeId: null,\r\n      comment: null,\r\n      giveVisaDate: null,\r\n      commissionComment: '',\r\n      commissionModalLoader: false,\r\n      commissionTypes: [],\r\n      commissionsModal: false,\r\n      currentPage: 1,\r\n      src: null,\r\n      loadingById: false,\r\n      numPages: undefined,\r\n      reasonRejected: \"\",\r\n      selectedTrItem: {},\r\n      visaInfo: {},\r\n      active: \"\",\r\n\r\n      title: this.$t(\"received\"),\r\n      items: [\r\n        {\r\n          text: this.$t(\"menu\"),\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: this.$t(\"received\"),\r\n          active: true,\r\n        },\r\n      ],\r\n      list: [],\r\n      searchValue: \"\",\r\n      page: 1,\r\n      limit: 20,\r\n      loading: false,\r\n      total: 1,\r\n      isModal: false,\r\n      currentItem: {},\r\n      signatureModal: false,\r\n      loaderButton: false,\r\n      visaFileView: {\r\n        modal: false,\r\n        src: null,\r\n      },\r\n      isModalKeys: false,\r\n      agreementCount: 0,\r\n      signatureCount: 0,\r\n      reviewCount: 0,\r\n      loaderReceiver: false,\r\n      infoData: {},\r\n      rejectedLoader: false,\r\n      isRejectedModal: false,\r\n      viewModal: false,\r\n      filesList: [],\r\n      viewModalBeforeSigned: false,\r\n      loaderPdf: false,\r\n      ilovaUploadPath: null,\r\n      viewIlovaModal: false,\r\n      base64: null,\r\n      editModal: false,\r\n      loader: false,\r\n      contextText: \"\",\r\n    };\r\n  },\r\n  async created() {\r\n    await this.getList();\r\n  },\r\n  computed: {\r\n    params() {\r\n      return {\r\n        params: {\r\n          itemsPerPage: this.limit,\r\n          page: this.page - 1,\r\n        },\r\n        search: this.searchValue,\r\n      };\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    cancelEYE() {\r\n      this.fileEye = false\r\n      this.modalDoc1 = true\r\n    },\r\n    async okEYE() {\r\n      this.fileEye = false\r\n    },\r\n    closeDoc() {\r\n      this.fileEye = false\r\n      this.modalDoc1 = true\r\n    },\r\n    async openEyeFile(item) {\r\n\r\n      await VerifyDocumentService.verifyDocumentById(this.selectedTrItem.applicationId)\r\n          .then(res => {\r\n            this.commissionTypes = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n\r\n      if (item.uploadPath) {\r\n        this.$nextTick(() => {\r\n          this.modalDoc1 = false\r\n          this.fileEye = true\r\n          this.fileUrl = item.uploadPath\r\n        })\r\n      }\r\n    },\r\n    async VISABtn() {\r\n\r\n      if (Object.keys(this.selectedTrItem).length === 0) {\r\n        this.$toast(this.$t('submodules.doc.selected_doc'), { type: 'warning' });\r\n      } else {\r\n        await crudAndListsService.getList('employee/get-all-employee/in-monopoly-department', this.var_default_search_payload, null, true)\r\n            .then(res => {\r\n              this.commissionTypes = res.data\r\n            })\r\n            .catch(e => {\r\n              console.log(e)\r\n            })\r\n        this.commissionsModal = true;\r\n      }\r\n\r\n    },\r\n    showVisaFileView(applicationId) {\r\n      this.loadingById = true;\r\n      letterService.dxaVisaDataGetFile(applicationId).then(({ data }) => {\r\n        this.visaFileView.src = 'data:application/pdf;base64,' + data;\r\n        this.visaFileView.modal = true;\r\n      }).finally(() => {\r\n        this.loadingById = false;\r\n      })\r\n    },\r\n    async visa_btn() {\r\n      if (this.commissionTypeId && this.giveVisaDate) {\r\n        this.commissionModalLoader = true\r\n        LetterService.SignatureGiveVisaForDXA({\r\n          applicationId: this.selectedTrItem.applicationId,\r\n          employeeId: this.commissionTypeId,\r\n          letterId: this.selectedTrItem.id\r\n        }, {\r\n          comment: this.comment,\r\n          giveVisaDate: this.giveVisaDate\r\n        })\r\n            .then((res) => {\r\n              this.$toast(this.$t('succes.title'), { type: 'success' });\r\n              this.commissionTypeId = null\r\n              this.commissionComment = ''\r\n              this.comment = ''\r\n              this.giveVisaDate = null\r\n\r\n              this.commissionsModal = false\r\n            })\r\n            .catch((err) => {\r\n              this.isCommit = false\r\n              console.log(err);\r\n            })\r\n            .finally(async () => {\r\n              this.commissionModalLoader = false\r\n              await this.getList();\r\n              await this.getVisaInfo();\r\n              this.selectedTrItem = {}\r\n            });\r\n      }\r\n    },\r\n    getVisaInfo() {\r\n      if (this.selectedTrItem.status !== \"CREATED\" && this.selectedTrItem.status !== \"SEND_FOR_TAKE_VISA\") {\r\n        Service.getVisaInfo(this.selectedTrItem.applicationId)\r\n            .then(({ data }) => {\r\n              this.visaInfo = data\r\n            })\r\n            .catch((err) => {\r\n              // this.catchErr(err);\r\n            })\r\n            .finally(() => {\r\n            });\r\n      }\r\n    },\r\n    async DXAInfoBtn() {\r\n      this.isSidebar = true\r\n      await this.$refs.isSidebar_ref.getApplicationInfoById()\r\n      await this.$refs.isSidebar_ref.getVisaInfoById()\r\n    },\r\n    async closeSidebar() {\r\n      this.isSidebar = false\r\n    },\r\n    openSignatureModalForCommission() {\r\n      if (this.commissionTypeId) {\r\n        this.signatureModal = true\r\n      } else {\r\n        this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n      }\r\n    },\r\n    customLabelCommissionTypes(opt) {\r\n      let selected = this.commissionTypes.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${selected.fullName} -\r\n        ${this.getName({\r\n          nameRu: selected.directoryPositionNameRu,\r\n          nameLt: selected.directoryPositionNameLt,\r\n          nameUz: selected.directoryPositionNameUz,\r\n        })\r\n        } `\r\n      }\r\n      return ``;\r\n    },\r\n    changeText(text) {\r\n      this.contextText = text;\r\n    },\r\n    okModal() {\r\n      let text = this.$refs.editorRef.text;\r\n      this.$refs.editModalRef.loading(true);\r\n      Service.saveLetterBody(this.selectedTrItem.letterId, text)\r\n          .then(() => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            this.successEdited();\r\n            this.getList(true, tempData.id);\r\n            this.editModal = false;\r\n            /* setTimeout(() => {\r\n              let newdata = this.list.find((e) => e.id == tempData.id);\r\n              this.selectedTrItem = newdata;\r\n              this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }, 500); */\r\n          })\r\n          .catch((e) => {\r\n          })\r\n          .finally(() => {\r\n            this.$refs.editModalRef.loading(false);\r\n          });\r\n    },\r\n    viewModalClick() {\r\n      this.$refs.editModalRef.loadingPdf(true);\r\n      this.viewModalBeforeSigned = true;\r\n      this.loaderPdf = true;\r\n      this.base64 = null;\r\n\r\n      Service.convert(this.contextText)\r\n          .then((res) => {\r\n            setTimeout(() => {\r\n              this.base64 = res.data;\r\n            }, 400);\r\n          })\r\n          .finally(() => {\r\n            this.loaderPdf = false;\r\n            this.$refs.editModalRef.loadingPdf(false);\r\n          });\r\n    },\r\n    editLetter(item) {\r\n      /* this.editModal = true;\r\n      setTimeout(() => {\r\n        Service.getBody(item.letterId).then((res) => {\r\n          let editor = this.$refs.editorRef;\r\n          if (editor) {\r\n            if (!this._empty(res.data)) {\r\n              editor.setTextContent(res.data);\r\n            }\r\n          }\r\n        });\r\n      }, 400); */\r\n\r\n    },\r\n    viewProject(selectedLetter) {\r\n      /* this.$router.push({\r\n          name: selectedLetter.projectType === 'COMMISSION' ? 'CommissionProjects' : 'ProjectsMain',\r\n          query: { page: \"overview\", id: selectedLetter.projectId },\r\n      }); */\r\n      let routeData = this.$router.resolve({\r\n        name: selectedLetter.projectType === 'COMMISSION' ? 'CommissionProjects' : 'ProjectsMain',\r\n        query: { page: \"overview\", id: selectedLetter.projectId },\r\n      });\r\n      window.open(routeData.href, '_blank');\r\n    },\r\n    viewIlova(item) {\r\n      if (this.getExt(item.uploadPath ? item.uploadPath : item.url) === \"pdf\") {\r\n        this.ilovaUploadPath = item.uploadPath ? item.uploadPath : item.url;\r\n        this.viewIlovaModal = true;\r\n      } else {\r\n        this.convertToPdf(item).then((uploadPath) => {\r\n          if (uploadPath) {\r\n            this.ilovaUploadPath = uploadPath;\r\n            this.viewIlovaModal = true;\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    convertToPdf(selectedItem, forSign = false) {\r\n      return new Promise((res, rej) => {\r\n        let config = {\r\n          url: `${selectedItem.url}`,\r\n          outputtype: \".pdf\",\r\n          forSign: forSign,\r\n          key: selectedItem.key,\r\n        };\r\n        Service.convertToPdfByApi(config)\r\n            .then((rs) => {\r\n              if (rs.data.uploadPath) {\r\n                this.$nextTick(() => {\r\n                  this.src = `${this.baseUrl}/${rs.data.uploadPath}`;\r\n                });\r\n                res(rs.data.uploadPath);\r\n              } else {\r\n                res(false);\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              // this.catchErr(e);\r\n              rej(e);\r\n            });\r\n      });\r\n    },\r\n    getByIdLetter() {\r\n      Service.getByIdLetter(this.selectedTrItem.letterId)\r\n          .then((rs) => {\r\n            this.currentDoc = rs.data;\r\n            this.loaderPdf = true;\r\n            this.convertToPdf(rs.data).then((uploadPath) => {\r\n              if (!uploadPath) {\r\n                setTimeout(() => {\r\n                  this.convertToPdf(rs.data)\r\n                      .then(() => {\r\n                        this.loaderPdf = false;\r\n                      })\r\n                      .catch((e) => {\r\n                        this.loaderPdf = false;\r\n                      });\r\n                }, 4000);\r\n              } else {\r\n                this.loaderPdf = false;\r\n              }\r\n            });\r\n          })\r\n          .catch((e) => {\r\n          });\r\n    },\r\n    viewLetter() {\r\n      this.viewModalBeforeSigned = true;\r\n      this.loaderPdf = true;\r\n      this.base64 = null;\r\n      Service.viewPdfByLetterId(this.selectedTrItem.letterId)\r\n          .then((res) => {\r\n            setTimeout(() => {\r\n              this.base64 = res.data;\r\n            }, 300);\r\n          })\r\n          .finally(() => {\r\n            this.loaderPdf = false;\r\n          });\r\n    },\r\n    viewDocBeforeSigned() {\r\n      // this.viewModalBeforeSigned = true;\r\n      // this.getByIdLetter();\r\n      this.viewLetter();\r\n    },\r\n    setCurrentPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n    getAttachedFilesById(id) {\r\n      Service.getAttachedFilesById(id).then((res) => {\r\n        this.filesList = res.data;\r\n      });\r\n    },\r\n    saveRejected(payload) {\r\n      this.convertToPdf(this.selectedTrItem).then(r1 => {\r\n        this.rejectedLoader = true;\r\n        Service.saveRejected(\r\n            this.selectedTrItem.letterId,\r\n            this.selectedTrItem.id,\r\n            this.reasonRejected,\r\n            payload\r\n        )\r\n            .then(async () => {\r\n              this.isRejectedModal = false;\r\n              let tempData = Object.assign({}, this.selectedTrItem);\r\n              await this.successSaved();\r\n              await this.getList(true, tempData.id);\r\n              /* setTimeout(() => {\r\n                let newdata = this.list.find((e) => e.id == tempData.id);\r\n                this.selectedTrItem = newdata;\r\n                this.$forceUpdate();\r\n                this.getReceivers(this.selectedTrItem);\r\n              }, 500); */\r\n            })\r\n            .finally(() => {\r\n              this.rejectedLoader = false;\r\n            });\r\n      })\r\n    },\r\n    showRejectedModal() {\r\n      this.isRejectedModal = true;\r\n    },\r\n    viewDocSigned() {\r\n      this.viewModal = true;\r\n    },\r\n\r\n    async signSuccess(data) {\r\n      let payload = {\r\n        signedContent: data.content,\r\n        inn: data.inn,\r\n        pnfl: data.pnfl\r\n      };\r\n      if (this.isRejectedModal) {\r\n        this.isModalKeys = false;\r\n        this.signatureModal = false;\r\n        this.saveRejected(payload)\r\n      } else {\r\n        if (this.selectedTrItem.status === 'COMMISSION_SEND') {\r\n          Service.onlyDocSign(payload, this.selectedTrItem.id)\r\n              .then(async () => {\r\n                this.isModalKeys = false;\r\n                this.signatureModal = false;\r\n                let tempData = Object.assign({}, this.selectedTrItem);\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                await this.getList(true, tempData.id);\r\n                // setTimeout(() => {\r\n                //   let newdata = this.list.find((e) => e.id == tempData.id);\r\n                //   this.selectedTrItem = Object.assign({}, newdata);\r\n                //   this.$forceUpdate();\r\n                //   this.getReceivers(this.selectedTrItem);\r\n                // }, 1000);\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              });\r\n        } else if (this.selectedTrItem.status === 'NOT_BELONG') {\r\n          await Service.onlyDocSign(payload, this.selectedTrItem.id)\r\n              .then(async () => {\r\n                // await Service.onlyDocSignNotBelong(payload, this.selectedTrItem.id)\r\n                //     .then(async () => {\r\n                //\r\n                //\r\n                //     })\r\n                //     .catch((err) => {\r\n                //       this.catchErr(err);\r\n                //     });\r\n\r\n                this.isModalKeys = false;\r\n                this.signatureModal = false;\r\n                let tempData = Object.assign({}, this.selectedTrItem);\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                await this.getList(true, tempData.id);\r\n\r\n                // setTimeout(() => {\r\n                //   let newdata = this.list.find((e) => e.id == tempData.id);\r\n                //   this.selectedTrItem = Object.assign({}, newdata);\r\n                //   this.$forceUpdate();\r\n                //   this.getReceivers(this.selectedTrItem);\r\n                // }, 1000);\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              });\r\n        } else {\r\n          Service.signDoc(payload, this.selectedTrItem.id, this.commissionTypeId, this.commissionComment)\r\n              .then(async () => {\r\n                this.isModalKeys = false;\r\n                this.signatureModal = false;\r\n                this.commissionsModal = false;\r\n                let tempData = Object.assign({}, this.selectedTrItem);\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                await this.getList(true, tempData.id);\r\n                /* setTimeout(() => {\r\n                  let newdata = this.list.find((e) => e.id == tempData.id);\r\n                  this.selectedTrItem = Object.assign({}, newdata);\r\n                  this.$forceUpdate();\r\n                  this.getReceivers(this.selectedTrItem);\r\n                }, 1000); */\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              });\r\n        }\r\n      }\r\n    },\r\n    getReceivers(item) {\r\n      this.loaderReceiver = true;\r\n      Service.getReceivers(item.letterId)\r\n          .then((rs) => {\r\n            this.infoData = rs.data;\r\n          })\r\n          .finally(() => {\r\n            this.loaderReceiver = false;\r\n          });\r\n    },\r\n    async clickTrItem(item) {\r\n      this.loadingById = true;\r\n\r\n      if (this.selectedTrItem.id == item.id) {\r\n        this.selectedTrItem = {};\r\n        this.infoData = {};\r\n      } else {\r\n        this.selectedTrItem = item;\r\n        await this.getVisaInfo()\r\n        // this.getAttachedFilesById(item.letterId);\r\n        // this.getReceivers(item);\r\n      }\r\n      this.loadingById = false;\r\n    },\r\n    signatureItem() {\r\n      this.isModalKeys = true;\r\n    },\r\n    makeAgree(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeAgree(item.letterId).then(async () => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            // setTimeout(() => {\r\n            //   let newdata = this.list.find((e) => e.id == tempData.id);\r\n            //   this.selectedTrItem = Object.assign({}, newdata);\r\n            //   this.$forceUpdate();\r\n            //   this.getReceivers(this.selectedTrItem);\r\n            // }, 500);\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    makeReviewForCommission(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeReviewForCommission(item.id, item.comment).then(async () => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            /* setTimeout(() => {\r\n              let newdata = this.list.find((e) => e.id == tempData.id);\r\n              this.selectedTrItem = newdata;\r\n              this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }, 500); */\r\n          });\r\n        }\r\n      });\r\n    },\r\n    makeReview(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeReview(item.letterId).then(async () => {\r\n            // let tempData = this.selectedTrItem;\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            /* setTimeout(() => {\r\n              let newdata = this.list.find((e) => e.id == tempData.id);\r\n              this.selectedTrItem = newdata;\r\n              this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }, 500); */\r\n          });\r\n        }\r\n      });\r\n    },\r\n    rejectConfirm() {\r\n      cnfDoc(this.$t(\"messages.reject_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureModal = true;\r\n        }\r\n      });\r\n    },\r\n    signItem(item) {\r\n      if (item.action === \"SIGNATURE\") {\r\n        /* if (item.status === 'COMMISSION_SEND') {\r\n            this.signatureModal = true;\r\n        } else { */\r\n        this.currentItem = item;\r\n        // this.signatureModal = true;\r\n\r\n        if (item.status === \"SEND_SIGN\" || item.status === \"SEND\" || item.status === 'COMMISSION_SEND') {\r\n\r\n          // GET COMMISSION_TYPES\r\n          /* crudAndListsService.searchList('directory/commission/commission-type', this.var_default_search_payload, null, true)\r\n              .then(res => {\r\n                  this.commissionTypes = res.data.list\r\n              })\r\n              .catch(e => {\r\n                  console.log(e)\r\n              })\r\n          this.commissionsModal = true; */\r\n\r\n          // this.signatureModal = true;\r\n          this.$router.push(\r\n              `/letter/income/${item.letterId}/${item.id}`\r\n          );\r\n        } else {\r\n          cnfDoc(this.$t(\"docConfirm\")).then((rs) => {\r\n            if (rs.value) {\r\n              this.signatureModal = true;\r\n            }\r\n          });\r\n        }\r\n        // }\r\n      } else if (item.action === \"AGREEMENT\") {\r\n        this.makeAgree(item);\r\n      } else if (item.action === \"REVIEW\") {\r\n        if (item.status === 'SEND_FOR_COMMISSION') {\r\n          this.makeReviewForCommission(item);\r\n        } else {\r\n          this.makeReview(item);\r\n        }\r\n      }\r\n    },\r\n    save() {\r\n      if (!this.$refs.addRef.checkValidity()) {\r\n        Service.upload(this.$refs.addRef.form).then((rs) => {\r\n          if (rs.data) {\r\n            this.getList();\r\n            let routeData = this.$router.resolve({\r\n              name: \"Office-DOCUMENT-commission\",\r\n              query: { page: \"GET\", id: rs.data.id },\r\n            });\r\n            window.open(routeData.href, \"_blank\");\r\n            this.isModal = false;\r\n          }\r\n        });\r\n      } else {\r\n        this.enterInfo();\r\n      }\r\n    },\r\n    add() {\r\n      this.isModal = true;\r\n    },\r\n    getList(reset = false, resetId) {\r\n      this.loading = true;\r\n      Service.getListLetterVisa(this.params, this.active)\r\n          .then(({ data }) => {\r\n            this.list = data.list;\r\n            this.total = data.total;\r\n            if (reset) {\r\n              let newdata = this.list.find((e) => e.id == resetId);\r\n              this.selectedTrItem = Object.assign({}, newdata);\r\n              // this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            // this.catchErr(err);\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n  }\r\n  ,\r\n}\r\n;\r\n</script>\r\n\r\n<template>\r\n  <!-- <Layout> -->\r\n  <div>\r\n    <div class=\"col-md-12 text-center\">\r\n      <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.dxa.visa') }}</div>\r\n    </div>\r\n    <Modal\r\n        :scroll=\"true\"\r\n        :variantOk=\"'success'\"\r\n        :value=\"editModal\"\r\n        @okModal=\"okModal\"\r\n        @closeModal=\"editModal = false\"\r\n        :title=\"selectedTrItem.fileName\"\r\n        :cancelText=\"'actions.cancel'\"\r\n        @viewModalClick=\"viewModalClick\"\r\n        :okText=\"'actions.save'\"\r\n        :signerHide=\"false\"\r\n        ref=\"editModalRef\"\r\n        :size=\"'xl'\"\r\n    >\r\n      <template v-slot:body>\r\n        <div>\r\n          <Editor\r\n              ref=\"editorRef\"\r\n              @changeText=\"changeText\"\r\n          />\r\n        </div>\r\n      </template>\r\n    </Modal>\r\n\r\n    <!-- <PageHeader :title=\"title\" :items=\"items\" /> -->\r\n    <!-- for view ilova -->\r\n    <b-modal\r\n        scrollable\r\n        v-model=\"viewIlovaModal\"\r\n        size=\"xl\"\r\n        :title=\"$t('actions.view')\"\r\n    >\r\n      <div\r\n          style=\"height: 700px\"\r\n          v-if=\"ilovaUploadPath\"\r\n      >\r\n        <embed\r\n            width=\"100%\"\r\n            height=\"800\"\r\n            :src=\"`${baseUrl}/${ilovaUploadPath}`\"\r\n            type=\"application/pdf\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button\r\n            variant=\"secondary\"\r\n            @click=\"viewIlovaModal = false\"\r\n        >{{\r\n            $t(\"actions.close\")\r\n          }}\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <!-- sign keys modal -->\r\n    <b-modal\r\n        scrollable\r\n        v-model=\"signatureModal\"\r\n        hide-footer\r\n        size=\"lg\"\r\n        :title=\"`${$t('submodules.reports.make_sign')}`\"\r\n    >\r\n      <SignKeys\r\n          @sign=\"signSuccess\"\r\n          :dataToSign=\"selectedTrItem\"\r\n      />\r\n    </b-modal>\r\n\r\n    <!-- for view document -->\r\n    <b-modal\r\n        scrollable\r\n        v-model=\"viewModal\"\r\n        size=\"xl\"\r\n        :title=\"selectedTrItem.id ? selectedTrItem.fileName : ''\"\r\n    >\r\n      <div\r\n          style=\"height: 700px\"\r\n          v-if=\"selectedTrItem.url\"\r\n      >\r\n        <embed\r\n            width=\"100%\"\r\n            height=\"800\"\r\n            :src=\"`${baseUrl}/${selectedTrItem.url}`\"\r\n            type=\"application/pdf\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button\r\n            variant=\"secondary\"\r\n            @click=\"viewModal = false\"\r\n        >{{\r\n            $t(\"actions.close\")\r\n          }}\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <!-- modal view before modal -->\r\n    <b-modal\r\n        scrollable\r\n        v-model=\"viewModalBeforeSigned\"\r\n        size=\"xl\"\r\n        body-bg-variant=\"light\"\r\n        :title=\"selectedTrItem.id ? selectedTrItem.fileName : ''\"\r\n    >\r\n      <b-overlay\r\n          variant=\"white\"\r\n          :opacity=\"1\"\r\n          :show=\"loaderPdf\"\r\n          rounded=\"lg\"\r\n      >\r\n        <div style=\"min-height: 700px\">\r\n          <embed\r\n              style=\"width: 100%;\"\r\n              :style=\"`min-height:${heightWindow-250}px`\"\r\n              v-if=\"base64\"\r\n              :src=\"`data:application/pdf;base64, ${base64}`\"\r\n          />\r\n        </div>\r\n      </b-overlay>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button\r\n            variant=\"secondary\"\r\n            @click=\"viewModalBeforeSigned = false\"\r\n        >{{ $t(\"actions.close\") }}\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <!-- rejected modal -->\r\n    <b-modal\r\n        scrollable\r\n        v-model=\"isRejectedModal\"\r\n        size=\"md\"\r\n        :title=\"`${$t('submodules.reports.reasonRejected')}`\"\r\n    >\r\n      <b-form-textarea\r\n          v-model=\"reasonRejected\"\r\n          rows=\"5\"\r\n      ></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button\r\n            variant=\"danger\"\r\n            @click=\"rejectConfirm\"\r\n        >\r\n          <b-overlay\r\n              :opacity=\"0.1\"\r\n              :show=\"rejectedLoader\"\r\n              rounded=\"sm\"\r\n          >\r\n            {{ $t(\"submodules.reports.rejected\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body p-2\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-4\">\r\n                <div class=\"d-inline-block mt-1 ml-2\">\r\n                  <div class=\"search-box\">\r\n                    <div class=\"position-relative\">\r\n                      <input\r\n                          style=\"width: 300px\"\r\n                          type=\"text\"\r\n                          v-model=\"searchValue\"\r\n                          class=\"form-control rounded bg-light border-light\"\r\n                          :placeholder=\"$t('actions.search')\"\r\n                      />\r\n                      <i class=\"mdi mdi-magnify search-icon\"></i>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-8\">\r\n                <div class=\"text-sm-right\">\r\n                  <div class=\"mr-3 float-right\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                    </div>\r\n                  </div>\r\n                  <!-- <b-button\r\n    @click.prevent=\"add\"\r\n    type=\"button\"\r\n    variant=\"primary\"\r\n  >\r\n    <i class=\"mdi mdi-plus mr-1\"></i>\r\n    {{ $t(\"actions.createNewDoc\") }}\r\n  </b-button> -->\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-7\">\r\n            <div class=\"card card-body\">\r\n              <div class=\"table-responsive\">\r\n                <b-overlay :opacity=\"0.1\" :show=\"loading\" rounded=\"sm\">\r\n                  <table class=\" table table-centered table-striped table-nowrap table-hover bordered \">\r\n                    <thead class=\"thead-light\">\r\n                    <tr>\r\n                      <th\r\n                          scope=\"col\"\r\n                          class=\"text-center\"\r\n                          style=\"width: 10%\"\r\n                      > \r\n                      </th>\r\n                      <th\r\n                          scope=\"col\"\r\n                      >\r\n                        <span class=\"ml-5\"> {{ $t(\"column.status\") }}</span>\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"submodules.dxa.dxa_application_number\") }}\r\n                      </th>\r\n\r\n                      <th\r\n                          class=\"text-center\"\r\n                          scope=\"col\"\r\n                      >\r\n                        {{ $t(\"submodules.doc.senderFIO\") }}\r\n                      </th>\r\n                      <!--                      <th-->\r\n                      <!--                          class=\"text-center\"-->\r\n                      <!--                          scope=\"col\"-->\r\n                      <!--                      >-->\r\n                      <!--                        {{ $t(\"submodules.doc.sender\") }}-->\r\n                      <!--                      </th>-->\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr class=\"text-center\" v-if=\"list.length == 0\"\r\n                    >\r\n                      <td\r\n                          colspan=\"9\"\r\n                          :style=\"loading ? 'height:50px' : ''\"\r\n                          style=\"vertical-align: middle\"\r\n                      >\r\n                        <h5>\r\n                          {{ $t(\"messages.data_not_found\") }}\r\n                        </h5>\r\n                      </td>\r\n                    </tr>\r\n                    <tr\r\n                        @click.prevent=\"clickTrItem(item)\"\r\n                        v-for=\"(item, index) in list\"\r\n                        :key=\"index + 'CREATE_DOC'\"\r\n                        class=\"p_cursor\"\r\n                        :class=\" selectedTrItem.id == item.id ? 'bg-color bg-soft-primary text-primary' : '' \"\r\n                    >\r\n\r\n                      <td class=\"text-center\">\r\n                        {{\r\n                          util_paginate(index, var_default_search_payload.page, var_default_search_payload.itemsPerPage)\r\n                        }}\r\n                      </td>\r\n                      <td class=\"text-center\">\r\n                        <b-badge\r\n                            variant=\"secondary\"\r\n                            class=\"p-1\"\r\n                            v-if=\"item.status === 'CREATED' || item.applicationStatus === 'RECEIVED'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.doc_created') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"warning\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'BEING_SEEN'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.doc_seen') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"info\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'SEEN'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.seen') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"primary\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'SENT'\"\r\n                        >\r\n                          {{ $t('submodules.reports.report_sended') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"danger\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'CANCELLED'\"\r\n                        >\r\n                          {{ $t('docs_r.CANCELED') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"info\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'SEND_FOR_COMMISSION'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.send_for_commission') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"warning\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'COMMISSION_BEING_SEEN'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.commission_being_seen') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"info\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'COMMISSION_SEEN'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.commission_seen') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"primary\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'COMMISSION_SENT'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.commission_sent') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"success\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'COMMISSION_SIGNED'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.commission_signed') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"danger\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'COMMISSION_CANCELLED'\"\r\n                        >\r\n                          {{ $t('submodules.commission.doc_status.commission_canceled') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"warning\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'SEND_FOR_TAKE_VISA'\"\r\n                        >\r\n                          {{ $t('submodules.dxa.send_for_visa') }}\r\n                        </b-badge>\r\n                        <b-badge\r\n                            variant=\"success\"\r\n                            class=\"p-1\"\r\n                            v-else-if=\"item.status === 'VISA_APPROVED'\"\r\n                        >\r\n                          {{ $t('submodules.dxa.VISA_APPROVED') }}\r\n                        </b-badge>\r\n\r\n                      </td>\r\n                      <td class=\"text-center\">\r\n                        {{ item.applicationRegNumber }}\r\n                      </td>\r\n                      <td class=\"text-center\">\r\n                        {{ item.ownerLastName }} {{ item.ownerFirstName }} {{ item.ownerParentName }}\r\n                      </td>\r\n                    </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </b-overlay>\r\n              </div>\r\n              <div class=\"row\" v-if=\"total > 0\">\r\n                <div class=\"col-lg-12\">\r\n                  <b-pagination size=\"sm\" class=\"m-0\" :total-rows=\"total\" :per-page=\"limit\" v-model=\"page\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-5\">\r\n            <div class=\"card card-body\">\r\n              <!-- FROM_DXA -->\r\n              <b-overlay :opacity=\"0.1\" :show=\"loadingById\" rounded=\"sm\">\r\n                <table v-if=\"selectedTrItem\" class=\"table m-0\">\r\n                  <tr>\r\n                    <td class=\"text-left\">\r\n                      <b> {{ $t('column.business_entity') }}</b> <br>\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      <span style=\"font-size: 12px\" class=\"text-right\" >\r\n                        {{ selectedTrItem.contractorNameFromDXA }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td class=\"text-left\">\r\n                      <b> {{ $t('column.inn') }}</b> <br>\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      <span style=\"font-size: 12px\" class=\"text-right\" >\r\n                        {{ selectedTrItem.companyTinFromDXA }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td class=\"text-left\">\r\n                      <b> {{ $t('submodules.doc.create_entered_date_legal') }}</b> <br>\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      <span style=\"font-size: 12px\" class=\"text-right\">\r\n                          {{ selectedTrItem.created }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"selectedTrItem.ownerFirstName\">\r\n                    <td class=\"text-left\">\r\n                      <b> {{ $t('whoSent') }}</b> <br>\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      <span style=\"font-size: 12px\" class=\"text-right\">\r\n                        {{ selectedTrItem.ownerFirstName }}\r\n                        {{ selectedTrItem.ownerLastName }}\r\n                        {{ selectedTrItem.ownerParentName }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"selectedTrItem.positionNameUz\">\r\n                    <td class=\"text-left\">\r\n                      <b> {{ $t('column.position') }}</b> <br>\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      <span style=\"font-size: 12px\" class=\"text-right\">\r\n                        {{\r\n                          getName({\r\n                            nameUz: selectedTrItem.positionNameUz,\r\n                            nameRu: selectedTrItem.positionNameRu,\r\n                            nameLt: selectedTrItem.positionNameLt,\r\n                          })\r\n                        }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"selectedTrItem.visaReason\">\r\n                    <td class=\"text-left\">\r\n                      <b> {{ $t('column.comment') }}</b> <br>\r\n                    </td>\r\n                    <td class=\"text-right\">\r\n                      <span style=\"font-size: 12px\" class=\"text-right\">\r\n                          {{ selectedTrItem.visaReason }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                </table>\r\n              </b-overlay>\r\n              <div class=\"mt-4 text-center\">\r\n                <b-button\r\n                    v-show=\"selectedTrItem.status === 'SEND_FOR_TAKE_VISA'\"\r\n                    variant=\"primary\"\r\n                    class=\"card-tabs-button\"\r\n                    @click=\"VISABtn\"\r\n                >\r\n                  <img :src=\"require('@/assets/doc/img.png')\" alt=\"DOC\" height=\"20\"/>\r\n                  <!--                  <i class=\"fa fa-credit-card\"></i>-->\r\n                  {{ $t('submodules.reports.make_sign') }}\r\n                </b-button>\r\n                <b-button\r\n                    v-if=\"!(Object.keys(selectedTrItem).length === 0)\"\r\n                    variant=\"warning\"\r\n                    class=\"ml-2  card-tabs-button\"\r\n                    @click=\"DXAInfoBtn\"\r\n                >\r\n                  <i class=\"fa fa-eye\"></i>\r\n                  {{ $t('submodules.dxa.view_dxa') }}\r\n                </b-button>\r\n              </div>\r\n\r\n              <!-- VISA -->\r\n              <div class=\"card\"\r\n                   v-show=\"Object.keys(selectedTrItem).length !== 0 && selectedTrItem.visaIsGiven\"\r\n              >\r\n                <div class=\"card-header bg-white d-flex align-items-center\">\r\n                  <div class=\"font-size-16 flex-grow-1\">\r\n                    <img :src=\"require('@/assets/doc/1.png')\" alt=\"DOC\" height=\"45\"/>\r\n                    <strong class=\"ml-3\">{{ $t(\"submodules.dxa.VISA_APPROVED\") }}</strong>\r\n                  </div>\r\n                  <div class=\"btn btn-info\" @click=\"showVisaFileView(selectedTrItem.applicationId)\">\r\n                    {{ $t('actions.view_document') }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"pl-4\">\r\n                  <div class=\"table-responsive\">\r\n                    <table class=\"table table-centered m-0\">\r\n                      <tbody>\r\n                      <tr>\r\n                        <td style=\"width: 50px\">\r\n                          <div class=\"avatar-sm\">\r\n                            <span class=\"avatar-title rounded-circle bg-soft-primary font-size-20 font-weight-bold\">\r\n                              {{ selectedTrItem.visaFromWhoName ? selectedTrItem.visaFromWhoName.charAt(0) : '' }}\r\n                            </span>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"d-flex align-items-center\">\r\n                            <div>\r\n                              <h5 class=\"font-size-14 m-0 font-weight-bold\">\r\n                                <p class=\"text-dark m-0\">\r\n                                  {{ $t(\"submodules.dxa.visa_issuer\") }}\r\n                                </p>\r\n                              </h5>\r\n                              <h5 class=\"font-size-14 m-0\">\r\n                                <p class=\"text-dark m-0\">\r\n                                  {{ selectedTrItem.visaFromWhoName || '' }}\r\n                                </p>\r\n                              </h5>\r\n                              <p class=\"m-0 text-muted\">\r\n                                {{\r\n                                  getName({\r\n                                    nameLt: selectedTrItem.visaFromWhoYurDepartmentNameLtLt,\r\n                                    nameRu: selectedTrItem.visaFromWhoYurDepartmentNameLtRu,\r\n                                    nameUz: selectedTrItem.visaFromWhoYurDepartmentNameLtUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                              <p class=\"m-0 text-muted\">\r\n                                {{\r\n                                  getName({\r\n                                    nameUz: selectedTrItem.visaFromWhoDepartmentNameUz,\r\n                                    nameLt: selectedTrItem.visaFromWhoDepartmentNameLt,\r\n                                    nameRu: selectedTrItem.visaFromWhoDepartmentNameRu,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                              <p class=\"m-0 text-muted\">\r\n                                {{\r\n                                  getName({\r\n                                    nameLt: selectedTrItem.visaFromWhoPositionNameLt,\r\n                                    nameRu: selectedTrItem.visaFromWhoPositionNameRu,\r\n                                    nameUz: selectedTrItem.visaFromWhoPositionNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td style=\"width: 50px\">\r\n                          <div class=\"avatar-sm\">\r\n                            <span class=\"avatar-title rounded-circle bg-soft-primary font-size-20 font-weight-bold\">\r\n                            {{ selectedTrItem.visaToWhoName ? selectedTrItem.visaToWhoName.charAt(0) : '' }}\r\n                            </span>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"d-flex align-items-center\">\r\n                            <div>\r\n                              <h5 class=\"font-size-14 m-0 font-weight-bold\">\r\n                                <p class=\"text-dark m-0\">\r\n                                  {{ $t(\"submodules.dxa.performer\") }}\r\n                                </p>\r\n                              </h5>\r\n                              <h5 class=\"font-size-14 m-0\">\r\n                                <p class=\"text-dark m-0\">\r\n                                  {{ selectedTrItem.visaToWhoName || '' }}\r\n                                </p>\r\n                              </h5>\r\n                              <p class=\"m-0 text-muted\">\r\n                                {{\r\n                                  getName({\r\n                                    nameLt: selectedTrItem.visaToWhoYurDepartmentNameLt,\r\n                                    nameRu: selectedTrItem.visaToWhoYurDepartmentNameRu,\r\n                                    nameUz: selectedTrItem.visaToWhoYurDepartmentNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                              <p class=\"m-0 text-muted\">\r\n                                {{\r\n                                  getName({\r\n                                    nameUz: selectedTrItem.visaToWhoDepartmentNameUz,\r\n                                    nameLt: selectedTrItem.visaToWhoDepartmentNameLt,\r\n                                    nameRu: selectedTrItem.visaToWhoDepartmentNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                              <p class=\"m-0 text-muted\">\r\n                                {{\r\n                                  getName({\r\n                                    nameLt: selectedTrItem.visaToWhoPositionNameLt,\r\n                                    nameRu: selectedTrItem.visaToWhoPositionNameRu,\r\n                                    nameUz: selectedTrItem.visaToWhoPositionNameUz,\r\n                                  })\r\n                                }}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td colspan=\"2\">\r\n                          {{ selectedTrItem.visaComment }}\r\n                        </td>\r\n                      </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <b-sidebar\r\n        width=\"85%\"\r\n        class=\"sidebar-part\"\r\n        shadow\r\n        sidebar-class=\"p-0\"\r\n        right\r\n        :no-header=\"true\"\r\n        v-model=\"isSidebar\"\r\n    >\r\n\r\n      <DXAApplicationAllInfo\r\n          ref=\"isSidebar_ref\"\r\n          @close=\"closeSidebar\"\r\n          :applicationId=\"selectedTrItem.applicationDXAId\"\r\n          :applicationStatus=\"selectedTrItem.applicationStatus\"\r\n      />\r\n\r\n    </b-sidebar>\r\n\r\n    <b-modal v-model=\"visaFileView.modal\" :title=\"`${$t('actions.view_document')}`\" scrollable size=\"lg\">\r\n      <pdf :src=\"visaFileView.src\"></pdf>\r\n      <template v-slot:modal-footer>\r\n        <a :href=\"visaFileView.src\" class=\"btn btn-info\" :download=\"`${selectedTrItem.applicationRegNumber}-visa.pdf`\"\r\n           target=\"_blank\">{{ $t('actions.download') }}</a>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <!-- COMMISSIONS MODAL -->\r\n    <ValidationObserver v-slot=\"{ handleSubmit }\">\r\n      <b-modal\r\n          scrollable\r\n          v-model=\"commissionsModal\"\r\n          size=\"md\"\r\n          :title=\"`${$t('submodules.dxa.for_perform')}`\"\r\n      >\r\n        <div>\r\n          <BaseMultiselectWithValidation\r\n              rules=\"required\"\r\n              class=\"required\"\r\n              v-model=\"commissionTypeId\"\r\n              :options=\"commissionTypes.map(e => e.id)\"\r\n              :label=\"$t('column.employee')\"\r\n              label-on-top\r\n              placeholder=\"\"\r\n              :custom-label=\"customLabelCommissionTypes\"\r\n              open-direction=\"bottom\"\r\n              :max-height=\"600\"\r\n              :show-labels=\"false\"\r\n          />\r\n\r\n        </div>\r\n        <div class=\"mt-3\">\r\n          <b-form-textarea\r\n              v-model=\"comment\"\r\n              :placeholder=\"$t('submodules.doc.summary')\"\r\n              rows=\"5\"\r\n          ></b-form-textarea>\r\n        </div>\r\n        <div class=\"mt-3\">\r\n          <BaseDatePickerWithValidation\r\n              required\r\n              disable-before\r\n              format=\"DD-MM-YYYY\"\r\n              :disabled-date=\"true\"\r\n              :disabled-before=\"true\"\r\n              custom-styles=\"grid-template-columns: 0% 100%\"\r\n              v-model=\"giveVisaDate\"\r\n              :placeholder=\"$t('submodules.doc.completionTime')\"\r\n              lang=\"ru\"\r\n          />\r\n        </div>\r\n        <template v-slot:modal-footer>\r\n          <b-button variant=\"success\" @click=\"handleSubmit(visa_btn)\">\r\n            <b-overlay\r\n                :opacity=\"0.1\"\r\n                :show=\"commissionModalLoader\"\r\n                rounded=\"sm\"\r\n            >\r\n              {{ $t(\"actions.send\") }}\r\n            </b-overlay>\r\n          </b-button>\r\n        </template>\r\n      </b-modal>\r\n    </ValidationObserver>\r\n\r\n    <b-sidebar\r\n        id=\"sidebar-right\"\r\n        no-header\r\n        v-model=\"fileEye\"\r\n        right\r\n        backdrop\r\n        shadow\r\n    >\r\n      <template #default>\r\n        <div class=\"p-4\">\r\n          <b-row class=\"pl-4 pr-4\">\r\n            <b-col cols=\"2\">\r\n              <b-button\r\n                  @click=\"closeDoc\"\r\n                  block\r\n                  class=\"float-right ml-10\"\r\n                  size=\"sm\"\r\n                  variant=\"primary\"\r\n              >\r\n                <i class=\"fa fa-times\"></i>\r\n                {{ $t(\"actions.close\") }}\r\n              </b-button>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n        <div class=\"px-8 py-2\">\r\n          <b-row :style=\"`min-height:${height}px`\">\r\n            <b-col>\r\n              <div class=\"bg-white p-3\">\r\n                <embed\r\n                    :height=\"height\"\r\n                    width=\"100%\"\r\n                    v-if=\"fileUrl\"\r\n                    :src=\"`${getBaseUrl}/${fileUrl}`\"\r\n                />\r\n              </div>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n      </template>\r\n    </b-sidebar>\r\n  </div>\r\n  <!-- </Layout> -->\r\n</template>\r\n\r\n<style>\r\n.bg-class {\r\n  background-color: #fbfbfb !important;\r\n}\r\n</style>"]}]}