{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\letter\\income\\income.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\src\\modules\\letter\\income\\income.vue","mtime":1677125513251},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\babel.config.js","mtime":1667352074157},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1675061970665},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1675061970715}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovQUNSVSBQUk9KRUNUL0ZhaXIgVGVjaC9hY3J1LWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0IFNlcnZpY2UgZnJvbSAiLi4vbGV0dGVyU2VydmljZSI7CmltcG9ydCB7IGNuZkRvYywgc2hvd01zZ1N1Y2Nlc3MgfSBmcm9tICJAL2hlbHBlciI7CmltcG9ydCBTaWduS2V5cyBmcm9tICIuLi9TaWduS2V5cy52dWUiOwppbXBvcnQgUmVjZWl2ZXJzIGZyb20gIi4vcmVjZWl2ZXJzLnZ1ZSI7CmltcG9ydCBFZGl0b3IgZnJvbSAiLi4vY3JlYXRlL2Zyb2FsLmVkaXRvci52dWUiOwppbXBvcnQgTW9kYWwgZnJvbSAiLi4vY3JlYXRlL21vZGFsLnZ1ZSI7CmltcG9ydCBoZWxwZXJTZXJ2aWNlIGZyb20gJ0Avc2hhcmVkL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFNpZ25LZXlzOiBTaWduS2V5cywKICAgIFJlY2VpdmVyczogUmVjZWl2ZXJzLAogICAgRWRpdG9yOiBFZGl0b3IsCiAgICBNb2RhbDogTW9kYWwKICB9LAogIHdhdGNoOiB7CiAgICBwYWdlOiBmdW5jdGlvbiBwYWdlKCkgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICBzZWFyY2hWYWx1ZTogZnVuY3Rpb24gc2VhcmNoVmFsdWUodikgewogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZWplY3RlZFNlZUxvYWRlcjogZmFsc2UsCiAgICAgIHJlamVjdGVkTGV0dGVyOiBudWxsLAogICAgICB2aWV3RmlsZU1vZGFsOiBmYWxzZSwKICAgICAgZmlsZVVwbG9hZFBhdGg6IG51bGwsCiAgICAgIGlzUmVqZWN0ZWRTZWVNb2RhbDogZmFsc2UsCiAgICAgIHNpZ25hdHVyZVNlZU1vZGFsOiBmYWxzZSwKICAgICAgcmVhc29uUmVqZWN0ZWRTZWU6ICIiLAogICAgICBjb21taXNzaW9uVHlwZUlkOiBudWxsLAogICAgICBjb21taXNzaW9uQ29tbWVudDogJycsCiAgICAgIGNvbW1pc3Npb25Db21wbGV0aW9uRGF0ZTogbnVsbCwKICAgICAgY29tbWlzc2lvbk1vZGFsTG9hZGVyOiBmYWxzZSwKICAgICAgY29tbWlzc2lvblR5cGVzOiBbXSwKICAgICAgY29tbWlzc2lvbnNNb2RhbDogZmFsc2UsCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBzcmM6IG51bGwsCiAgICAgIG51bVBhZ2VzOiB1bmRlZmluZWQsCiAgICAgIHJlYXNvblJlamVjdGVkOiAiIiwKICAgICAgcmVhc29uRm9yUmV2aWV3OiAiIiwKICAgICAgc2VsZWN0ZWRUckl0ZW06IHt9LAogICAgICBhY3RpdmU6ICIiLAogICAgICBzZW5kVHlwZUxpc3Q6IFt7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoImZvclNpZ25hdHVyZSIpLAogICAgICAgIHZhbHVlOiAiU0lHTkFUVVJFIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoImZvckFncmVlbWVudCIpLAogICAgICAgIHZhbHVlOiAiQUdSRUVNRU5UIgogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMuJHQoImZvclJldmlldyIpLAogICAgICAgIHZhbHVlOiAiUkVWSUVXIgogICAgICB9XSwKICAgICAgdGl0bGU6IHRoaXMuJHQoInJlY2VpdmVkIiksCiAgICAgIGl0ZW1zOiBbewogICAgICAgIHRleHQ6IHRoaXMuJHQoIm1lbnUiKSwKICAgICAgICBocmVmOiAiLyIKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMuJHQoInJlY2VpdmVkIiksCiAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgIH1dLAogICAgICBsaXN0OiBbXSwKICAgICAgc2VhcmNoVmFsdWU6ICIiLAogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogMjAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0b3RhbDogMSwKICAgICAgaXNNb2RhbDogZmFsc2UsCiAgICAgIGN1cnJlbnRJdGVtOiB7fSwKICAgICAgc2lnbmF0dXJlTW9kYWw6IGZhbHNlLAogICAgICBsb2FkZXJCdXR0b246IGZhbHNlLAogICAgICBpc01vZGFsS2V5czogZmFsc2UsCiAgICAgIGFncmVlbWVudENvdW50OiAwLAogICAgICBzaWduYXR1cmVDb3VudDogMCwKICAgICAgcmV2aWV3Q291bnQ6IDAsCiAgICAgIGxvYWRlclJlY2VpdmVyOiBmYWxzZSwKICAgICAgaW5mb0RhdGE6IHt9LAogICAgICB2aXNhSW5mb0J5SWQ6IHt9LAogICAgICByZWplY3RlZExvYWRlcjogZmFsc2UsCiAgICAgIGlzUmVqZWN0ZWRNb2RhbDogZmFsc2UsCiAgICAgIGlzRm9yUmV2aWV3TW9kYWw6IGZhbHNlLAogICAgICB2aWV3TW9kYWw6IGZhbHNlLAogICAgICBmaWxlc0xpc3Q6IFtdLAogICAgICBwcm9qZWN0RmlsZXNMaXN0OiBbXSwKICAgICAgdmlld01vZGFsQmVmb3JlU2lnbmVkOiBmYWxzZSwKICAgICAgbG9hZGVyUGRmOiBmYWxzZSwKICAgICAgaWxvdmFVcGxvYWRQYXRoOiBudWxsLAogICAgICB2aWV3SWxvdmFNb2RhbDogZmFsc2UsCiAgICAgIGJhc2U2NDogbnVsbCwKICAgICAgZWRpdE1vZGFsOiBmYWxzZSwKICAgICAgbG9hZGVyOiBmYWxzZSwKICAgICAgY29udGV4dFRleHQ6ICIiLAogICAgICBpY29uOiB7CiAgICAgICAgcGRmOiByZXF1aXJlKCdAL2Fzc2V0cy9wZGYucG5nJykKICAgICAgfSwKICAgICAgc2VuZExldHRlclRvQ2hhaXJtYW46IHsKICAgICAgICBtb2RhbDogZmFsc2UsCiAgICAgICAgY29tbWVudDogIiIsCiAgICAgICAgbG9hZGVyOiBmYWxzZQogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldExpc3QoKTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRJbmNvbWVUb3RhbENvdW50KCk7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYXJhbXM6IGZ1bmN0aW9uIHBhcmFtcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGl0ZW1zUGVyUGFnZTogdGhpcy5saW1pdCwKICAgICAgICAgIHBhZ2U6IHRoaXMucGFnZSAtIDEKICAgICAgICB9LAogICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2hWYWx1ZQogICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkTWFrZVNpZ25lZENvbXByb21pc2VEZWNpc2lvblRvUmVqZWN0OiBmdW5jdGlvbiBjb21wdXRlZE1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub1JlamVjdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRUckl0ZW0uYXBwbGljYXRpb25UeXBlSW5Qcm9qZWN0ICE9PSAnRlJPTV9EWEEnICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0uYXBwbGljYXRpb25UeXBlSW5Qcm9qZWN0ICE9PSAnTk9UX0JFTE9ORycgJiYgWydTRU5UX0ZPUl9SRUpFQ1QnLCAnUkVKRUNURUQnLCAnVE9fSU5WT0tFX1NJR05FRCcsICdUT19TSUdOX0ZJTklTSF9MRVRURVInLCAnRklOSVNIX0xFVFRFUl9TSUdOX0FORF9TRU5EJywgJ1NFTkRfU0lHTl9UT19SRVRVUk4nLCAnU0VORF9TSUdOJ10uaW5kZXhPZih0aGlzLnNlbGVjdGVkVHJJdGVtLnN0YXR1cykgPT09IC0xICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0uaXNGb3JDb21taXNzaW9uICYmICF0aGlzLnNlbGVjdGVkVHJJdGVtLmlzSGVhZE9mRGVwYXJ0bWVudDsKICAgIH0sCiAgICBjb21wdXRlZE1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub0FjY2VwdDogZnVuY3Rpb24gY29tcHV0ZWRNYWtlU2lnbmVkQ29tcHJvbWlzZURlY2lzaW9uVG9BY2NlcHQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCAhPT0gJ0ZST01fRFhBJyAmJiB0aGlzLnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCAhPT0gJ05PVF9CRUxPTkcnICYmIFsnUkVKRUNURUQnXS5pbmRleE9mKHRoaXMuc2VsZWN0ZWRUckl0ZW0uc3RhdHVzKSA9PT0gLTEgJiYgdGhpcy5zZWxlY3RlZFRySXRlbS5pc0ZvckNvbW1pc3Npb24gJiYgIXRoaXMuc2VsZWN0ZWRUckl0ZW0uaXNIZWFkT2ZEZXBhcnRtZW50OwogICAgfSwKICAgIHNpZ25JdGVtQnV0dG9uTGFiZWw6IGZ1bmN0aW9uIHNpZ25JdGVtQnV0dG9uTGFiZWwoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkVHJJdGVtLmFjdGlvbiA9PT0gIlNJR05BVFVSRSIpIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMgPT09ICdTRU5EX1NJR04nKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kdCgic3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19zdGF0dXMuc2VuZF9mb3JfY29tbWlzc2lvbiIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy4kdCgic3VibW9kdWxlcy5yZXBvcnRzLm1ha2Vfc2lnbiIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRUckl0ZW0uYWN0aW9uID09PSAnUkVWSUVXJykgewogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVHJJdGVtLmlzRm9yQ29tbWlzc2lvbiAmJiAhdGhpcy5zZWxlY3RlZFRySXRlbS5pc0hlYWRPZkRlcGFydG1lbnQpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiR0KCJzdWJtb2R1bGVzLmNvbW1pc3Npb24uZG9jX3N0YXR1cy5mb3JfYmVnaW5fY29tbWlzc2lvbiIpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMgPT09ICdTRU5EX1NFRU5fQ0xPU0VEJyAmJiBbIkZPUl9SRVNVTUVfV09SSyIsICJGT1JfREVMQVlfV09SSyIsICJGT1JfU1VTUEVORF9XT1JLIl0uaW5jbHVkZXModGhpcy5zZWxlY3RlZFRySXRlbS5yZXR1cm5UeXBlKSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ3N1Ym1vZHVsZXMuY29tbWlzc2lvbi5kb2Nfc3RhdHVzLmFsbG93X3Byb2plY3RfcmVvcGVuaW5nJyk7CiAgICAgICAgfQogICAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3RlZFRySXRlbS5zdGF0dXMpIHsKICAgICAgICAgIGNhc2UgJ1NFTlRfRk9SX1JFSkVDVCc6CiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZFRySXRlbS5pc1JlamVjdExldHRlckNyZWF0ZWQpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kdCgic3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19idXR0b24uY3JlYXRlX2xldHRlciIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnUkVKRUNURUQnOgogICAgICAgICAgICByZXR1cm4gdGhpcy4kdCgic3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19zdGF0dXMuY29uZmlybWF0aW9uX3RoYXRfbGV0dGVyX2hhc19yZWFjaGVkIik7CiAgICAgICAgICBjYXNlICdGSU5JU0hfTEVUVEVSX1NJR05fQU5EX1NFTkQnOgogICAgICAgICAgICByZXR1cm4gdGhpcy4kdCgic3VibW9kdWxlcy5jb21taXNzaW9uLmRvY19zdGF0dXMuY29uZmlybWF0aW9uX3RoYXRfd29ya19maW5pc2hlZCIpOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHQoImNvbmZpcm0iKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5hY3Rpb24gPT09ICdBR1JFRU1FTlQnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHQoInN1Ym1vZHVsZXMucmVwb3J0cy5tYWtlX2FncmVlbWVudCIpOwogICAgICB9CiAgICAgIHJldHVybiAiIjsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dSZWplY3RlZEJ5UmFpc01vZGFsOiBmdW5jdGlvbiBzaG93UmVqZWN0ZWRCeVJhaXNNb2RhbChpdGVtKSB7CiAgICAgIHRoaXMuY3VycmVudEl0ZW0gPSBpdGVtOwogICAgICB0aGlzLmlzUmVqZWN0ZWRTZWVNb2RhbCA9IHRydWU7CiAgICB9LAogICAgcmVqZWN0U2VlQ29uZmlybTogZnVuY3Rpb24gcmVqZWN0U2VlQ29uZmlybSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGNuZkRvYyh0aGlzLiR0KCJtZXNzYWdlcy5yZWplY3RfdGl0bGUiKSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIF90aGlzMi5zaWduYXR1cmVTZWVNb2RhbCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzaWduU3VjY2Vzc1NlZTogZnVuY3Rpb24gc2lnblN1Y2Nlc3NTZWUoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHBheWxvYWQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHBheWxvYWQgPSB7CiAgICAgICAgICAgICAgICBzaWduZWRDb250ZW50OiBkYXRhLmNvbnRlbnQsCiAgICAgICAgICAgICAgICBpbm46IGRhdGEuaW5uLAogICAgICAgICAgICAgICAgcG5mbDogZGF0YS5wbmZsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfdGhpczMuc2VsZWN0ZWRUckl0ZW0uYWN0aW9uOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gX2NvbnRleHQ0LnQwID09PSAnUkVWSUVXJyA/IDQgOiAxMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0NC50MSA9IF90aGlzMy5zZWxlY3RlZFRySXRlbS5zdGF0dXM7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSBfY29udGV4dDQudDEgPT09ICdTRU5EX1NFRU5fQ0xPU0VEJyA/IDcgOiAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gOTsKICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5sZXR0ZXJDYW5jZWxsZWQocGF5bG9hZCwgX3RoaXMzLnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCBfdGhpczMuc2VsZWN0ZWRUckl0ZW0uaWQsIF90aGlzMy5yZWFzb25SZWplY3RlZFNlZSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmlzUmVqZWN0ZWRTZWVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLnNpZ25hdHVyZVNlZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0UHJvamVjdHMoKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5nZXRUb3RhbENvdW50KCk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoImJyZWFrIiwgMTApOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJicmVhayIsIDE0KTsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEzOwogICAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlLm9ubHlEb2NTaWduRm9yUlJlamVjdGVkQnlSYWlzKHBheWxvYWQsIF90aGlzMy5zZWxlY3RlZFRySXRlbS5sZXR0ZXJJZCwgX3RoaXMzLnNlbGVjdGVkVHJJdGVtLmlkLCBfdGhpczMucmVhc29uUmVqZWN0ZWRTZWUpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5pc1JlamVjdGVkU2VlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5zaWduYXR1cmVTZWVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczMuc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dNc2dTdWNjZXNzKF90aGlzMy4kdCgic3VjY2Vzc0RvY1NpZ25lZCIpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmdldFRvdGFsQ291bnQoKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoImJyZWFrIiwgMTQpOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb3BlblNpZ25hdHVyZU1vZGFsRm9yQ29tbWlzc2lvbjogZnVuY3Rpb24gb3BlblNpZ25hdHVyZU1vZGFsRm9yQ29tbWlzc2lvbigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGlmICh0aGlzLmNvbW1pc3Npb25UeXBlSWQpIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFRySXRlbS5hY3Rpb24gPT09ICdSRVZJRVcnICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0uYXBwbGljYXRpb25UeXBlSW5Qcm9qZWN0ID09PSAnSU5ORVInICYmIHRoaXMuc2VsZWN0ZWRUckl0ZW0uc3RhdHVzID09PSAnU0VOVF9UT19NQU5BR0VNRU5UJyAmJiB0aGlzLnNlbGVjdGVkVHJJdGVtLnByb2plY3RUeXBlID09PSAnQkVGT1JFX0NPTU1JU1NJT04nKSB7CiAgICAgICAgICBpZiAoIXRoaXMuY29tbWlzc2lvbkNvbXBsZXRpb25EYXRlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiR0b2FzdCh0aGlzLiR0KCdtZXNzYWdlcy5maWxsX3JlcXVpcmVkX2ZpZWxkcycpLCB7CiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIFNlcnZpY2UubWFrZVJldmlld0ZvckNvbW1pc3Npb25NYW5hZ2VtZW50KHRoaXMuc2VsZWN0ZWRUckl0ZW0uaWQsIHRoaXMuY29tbWlzc2lvblR5cGVJZCwgdGhpcy5jb21taXNzaW9uQ29tbWVudCwgdGhpcy5jb21taXNzaW9uQ29tcGxldGlvbkRhdGUpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gc2hvd01zZ1N1Y2Nlc3MoX3RoaXM0LiR0KCJzdWNjZXNzRG9jU2lnbmVkIikpOwogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBfdGhpczQuZ2V0UHJvamVjdHMoKTsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmdldFRvdGFsQ291bnQoKTsKICAgICAgICAgICAgICAgICAgX3RoaXM0LnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5jb21taXNzaW9uc01vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM0LnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNC5jb21taXNzaW9uc01vZGFsID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaWduYXR1cmVNb2RhbCA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0KHRoaXMuJHQoJ21lc3NhZ2VzLmZpbGxfcmVxdWlyZWRfZmllbGRzJyksIHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGN1c3RvbUxhYmVsQ29tbWlzc2lvblR5cGVzOiBmdW5jdGlvbiBjdXN0b21MYWJlbENvbW1pc3Npb25UeXBlcyhvcHQpIHsKICAgICAgdmFyIHNlbGVjdGVkID0gdGhpcy5jb21taXNzaW9uVHlwZXMuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLmlkID09IG9wdDsKICAgICAgfSk7CiAgICAgIGlmIChzZWxlY3RlZCkgewogICAgICAgIHJldHVybiAiIi5jb25jYXQodGhpcy5nZXROYW1lKHsKICAgICAgICAgIG5hbWVSdTogc2VsZWN0ZWQubmFtZVJ1LAogICAgICAgICAgbmFtZUx0OiBzZWxlY3RlZC5uYW1lTHQsCiAgICAgICAgICBuYW1lVXo6IHNlbGVjdGVkLm5hbWVVegogICAgICAgIH0pKTsKICAgICAgfQogICAgICByZXR1cm4gIiI7CiAgICB9LAogICAgY2hhbmdlVGV4dDogZnVuY3Rpb24gY2hhbmdlVGV4dCh0ZXh0KSB7CiAgICAgIHRoaXMuY29udGV4dFRleHQgPSB0ZXh0OwogICAgfSwKICAgIG9rTW9kYWw6IGZ1bmN0aW9uIG9rTW9kYWwoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwogICAgICB2YXIgdGV4dCA9IHRoaXMuJHJlZnMuZWRpdG9yUmVmLnRleHQ7CiAgICAgIHRoaXMuJHJlZnMuZWRpdE1vZGFsUmVmLmxvYWRpbmcodHJ1ZSk7CiAgICAgIFNlcnZpY2Uuc2F2ZUxldHRlckJvZHkodGhpcy5zZWxlY3RlZFRySXRlbS5sZXR0ZXJJZCwgdGV4dCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXM1LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICBfdGhpczUuc3VjY2Vzc0VkaXRlZCgpOwogICAgICAgIF90aGlzNS5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICBfdGhpczUuZWRpdE1vZGFsID0gZmFsc2U7CiAgICAgICAgLyogc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgbGV0IG5ld2RhdGEgPSB0aGlzLmxpc3QuZmluZCgoZSkgPT4gZS5pZCA9PSB0ZW1wRGF0YS5pZCk7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZFRySXRlbSA9IG5ld2RhdGE7DQogICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKTsNCiAgICAgICAgICB0aGlzLmdldFJlY2VpdmVycyh0aGlzLnNlbGVjdGVkVHJJdGVtKTsNCiAgICAgICAgfSwgNTAwKTsgKi8KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHt9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczUuJHJlZnMuZWRpdE1vZGFsUmVmLmxvYWRpbmcoZmFsc2UpOwogICAgICB9KTsKICAgIH0sCiAgICB2aWV3TW9kYWxDbGljazogZnVuY3Rpb24gdmlld01vZGFsQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzLmVkaXRNb2RhbFJlZi5sb2FkaW5nUGRmKHRydWUpOwogICAgICB0aGlzLnZpZXdNb2RhbEJlZm9yZVNpZ25lZCA9IHRydWU7CiAgICAgIHRoaXMubG9hZGVyUGRmID0gdHJ1ZTsKICAgICAgdGhpcy5iYXNlNjQgPSBudWxsOwogICAgICBTZXJ2aWNlLmNvbnZlcnQodGhpcy5jb250ZXh0VGV4dCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczYuYmFzZTY0ID0gcmVzLmRhdGE7CiAgICAgICAgfSwgNDAwKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM2LmxvYWRlclBkZiA9IGZhbHNlOwogICAgICAgIF90aGlzNi4kcmVmcy5lZGl0TW9kYWxSZWYubG9hZGluZ1BkZihmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVkaXRMZXR0ZXI6IGZ1bmN0aW9uIGVkaXRMZXR0ZXIoaXRlbSkgewogICAgICAvKiB0aGlzLmVkaXRNb2RhbCA9IHRydWU7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgU2VydmljZS5nZXRCb2R5KGl0ZW0ubGV0dGVySWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGxldCBlZGl0b3IgPSB0aGlzLiRyZWZzLmVkaXRvclJlZjsNCiAgICAgICAgICBpZiAoZWRpdG9yKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMuX2VtcHR5KHJlcy5kYXRhKSkgew0KICAgICAgICAgICAgICBlZGl0b3Iuc2V0VGV4dENvbnRlbnQocmVzLmRhdGEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9LCA0MDApOyAqLwogICAgfSwKICAgIHZpZXdQcm9qZWN0OiBmdW5jdGlvbiB2aWV3UHJvamVjdChzZWxlY3RlZExldHRlcikgewogICAgICAvKiB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgbmFtZTogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdFR5cGUgPT09ICdDT01NSVNTSU9OJyA/ICdDb21taXNzaW9uUHJvamVjdHMnIDogJ1Byb2plY3RzTWFpbicsDQogICAgICAgICAgcXVlcnk6IHsgcGFnZTogIm92ZXJ2aWV3IiwgaWQ6IHNlbGVjdGVkTGV0dGVyLnByb2plY3RJZCB9LA0KICAgICAgfSk7ICovCiAgICAgIHZhciByb3V0ZURhdGEgPSB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh7CiAgICAgICAgbmFtZTogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdFR5cGUgPT09ICdDT01NSVNTSU9OJyA/ICdDb21taXNzaW9uUHJvamVjdHMnIDogJ1Byb2plY3RzTWFpbicsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHBhZ2U6ICJvdmVydmlldyIsCiAgICAgICAgICBpZDogc2VsZWN0ZWRMZXR0ZXIucHJvamVjdElkCiAgICAgICAgfQogICAgICB9KTsKICAgICAgd2luZG93Lm9wZW4ocm91dGVEYXRhLmhyZWYsICdfYmxhbmsnKTsKICAgIH0sCiAgICB2aWV3SWxvdmE6IGZ1bmN0aW9uIHZpZXdJbG92YShpdGVtKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwogICAgICB2YXIgZXh0ID0gdGhpcy5nZXRFeHQoaXRlbS51cGxvYWRQYXRoID8gaXRlbS51cGxvYWRQYXRoIDogaXRlbS51cmwpOwogICAgICBpZiAoZXh0ID09PSAicGRmIikgewogICAgICAgIHRoaXMuaWxvdmFVcGxvYWRQYXRoID0gaXRlbS51cGxvYWRQYXRoID8gaXRlbS51cGxvYWRQYXRoIDogaXRlbS51cmw7CiAgICAgICAgdGhpcy52aWV3SWxvdmFNb2RhbCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb252ZXJ0VG9QZGYoaXRlbSkudGhlbihmdW5jdGlvbiAodXBsb2FkUGF0aCkgewogICAgICAgICAgaWYgKHVwbG9hZFBhdGgpIHsKICAgICAgICAgICAgX3RoaXM3Lmlsb3ZhVXBsb2FkUGF0aCA9IHVwbG9hZFBhdGg7CiAgICAgICAgICAgIF90aGlzNy52aWV3SWxvdmFNb2RhbCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuT25seU9mZmljZTogZnVuY3Rpb24gb3Blbk9ubHlPZmZpY2UobGV0dGVySWQpIHsKICAgICAgdmFyIHJvdXRlRGF0YSA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsKICAgICAgICBuYW1lOiAiT2ZmaWNlLURPQ1VNRU5ULWNvbW1pc3Npb24iLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBpZDogbGV0dGVySWQsCiAgICAgICAgICBwYWdlOiAiR0VUIgogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHdpbmRvdy5vcGVuKHJvdXRlRGF0YS5ocmVmLCAiX2JsYW5rIik7CiAgICB9LAogICAgdmlld0lsb3ZhUHJvamVjdDogZnVuY3Rpb24gdmlld0lsb3ZhUHJvamVjdCh1cGxvYWRQYXRoKSB7CiAgICAgIGlmICh0aGlzLmdldEV4dCh1cGxvYWRQYXRoKSA9PT0gInBkZiIpIHsKICAgICAgICB0aGlzLmlsb3ZhVXBsb2FkUGF0aCA9IHVwbG9hZFBhdGg7CiAgICAgICAgdGhpcy52aWV3SWxvdmFNb2RhbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBjb252ZXJ0VG9QZGY6IGZ1bmN0aW9uIGNvbnZlcnRUb1BkZihzZWxlY3RlZEl0ZW0pIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CiAgICAgIHZhciBmb3JTaWduID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMsIHJlaikgewogICAgICAgIHZhciBjb25maWcgPSB7CiAgICAgICAgICB1cmw6ICIiLmNvbmNhdChzZWxlY3RlZEl0ZW0udXJsKSwKICAgICAgICAgIG91dHB1dHR5cGU6ICIucGRmIiwKICAgICAgICAgIGZvclNpZ246IGZvclNpZ24sCiAgICAgICAgICBrZXk6IHNlbGVjdGVkSXRlbS5rZXkKICAgICAgICB9OwogICAgICAgIFNlcnZpY2UuY29udmVydFRvUGRmQnlBcGkoY29uZmlnKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgaWYgKHJzLmRhdGEudXBsb2FkUGF0aCkgewogICAgICAgICAgICBfdGhpczguJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczguc3JjID0gIiIuY29uY2F0KF90aGlzOC5iYXNlVXJsLCAiLyIpLmNvbmNhdChycy5kYXRhLnVwbG9hZFBhdGgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzKHJzLmRhdGEudXBsb2FkUGF0aCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXMoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGUpOwogICAgICAgICAgcmVqKGUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRCeUlkTGV0dGVyOiBmdW5jdGlvbiBnZXRCeUlkTGV0dGVyKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgU2VydmljZS5nZXRCeUlkTGV0dGVyKHRoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgX3RoaXM5LmN1cnJlbnREb2MgPSBycy5kYXRhOwogICAgICAgIF90aGlzOS5sb2FkZXJQZGYgPSB0cnVlOwogICAgICAgIF90aGlzOS5jb252ZXJ0VG9QZGYocnMuZGF0YSkudGhlbihmdW5jdGlvbiAodXBsb2FkUGF0aCkgewogICAgICAgICAgaWYgKCF1cGxvYWRQYXRoKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzOS5jb252ZXJ0VG9QZGYocnMuZGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczkubG9hZGVyUGRmID0gZmFsc2U7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIF90aGlzOS5sb2FkZXJQZGYgPSBmYWxzZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwgNDAwMCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczkubG9hZGVyUGRmID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7fSk7CiAgICB9LAogICAgdmlld0xldHRlcjogZnVuY3Rpb24gdmlld0xldHRlcigpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwogICAgICB0aGlzLnZpZXdNb2RhbEJlZm9yZVNpZ25lZCA9IHRydWU7CiAgICAgIHRoaXMubG9hZGVyUGRmID0gdHJ1ZTsKICAgICAgdGhpcy5iYXNlNjQgPSBudWxsOwogICAgICBTZXJ2aWNlLnZpZXdQZGZCeUxldHRlcklkKHRoaXMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMxMC5iYXNlNjQgPSByZXMuZGF0YTsKICAgICAgICB9LCAzMDApOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEwLmxvYWRlclBkZiA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB2aWV3RG9jQmVmb3JlU2lnbmVkOiBmdW5jdGlvbiB2aWV3RG9jQmVmb3JlU2lnbmVkKCkgewogICAgICAvLyB0aGlzLnZpZXdNb2RhbEJlZm9yZVNpZ25lZCA9IHRydWU7CiAgICAgIC8vIHRoaXMuZ2V0QnlJZExldHRlcigpOwogICAgICB0aGlzLnZpZXdMZXR0ZXIoKTsKICAgIH0sCiAgICBzZXRDdXJyZW50UGFnZTogZnVuY3Rpb24gc2V0Q3VycmVudFBhZ2UocGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZTsKICAgIH0sCiAgICBnZXRBdHRhY2hlZEZpbGVzQnlJZDogZnVuY3Rpb24gZ2V0QXR0YWNoZWRGaWxlc0J5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwogICAgICBTZXJ2aWNlLmdldEF0dGFjaGVkRmlsZXNCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczExLmZpbGVzTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRQcm9qZWN0TGV0dGVyc0J5TGV0dGVySWQ6IGZ1bmN0aW9uIGdldFByb2plY3RMZXR0ZXJzQnlMZXR0ZXJJZChkYXRhKSB7CiAgICAgIHZhciBfdGhpczEyID0gdGhpczsKICAgICAgU2VydmljZS5wcm9qZWN0TGV0dGVyc0J5TGV0dGVySWQoZGF0YS5sZXR0ZXJJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMxMi5wcm9qZWN0RmlsZXNMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVSZWplY3RlZDogZnVuY3Rpb24gc2F2ZVJlamVjdGVkKHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwogICAgICB0aGlzLmNvbnZlcnRUb1BkZih0aGlzLnNlbGVjdGVkVHJJdGVtKS50aGVuKGZ1bmN0aW9uIChyMSkgewogICAgICAgIF90aGlzMTMucmVqZWN0ZWRMb2FkZXIgPSB0cnVlOwogICAgICAgIFNlcnZpY2Uuc2F2ZVJlamVjdGVkKF90aGlzMTMuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQsIF90aGlzMTMuc2VsZWN0ZWRUckl0ZW0uaWQsIF90aGlzMTMucmVhc29uUmVqZWN0ZWQsIHBheWxvYWQpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMTMuaXNSZWplY3RlZE1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMTMuc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTMuc3VjY2Vzc1NhdmVkKCk7CiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTMuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7CiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTMuZ2V0SW5jb21lVG90YWxDb3VudCgpOwogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgICB9KSkpLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMxMy5yZWplY3RlZExvYWRlciA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVUb1JlamVjdDogZnVuY3Rpb24gaGFuZGxlVG9SZWplY3QoKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKICAgICAgdGhpcy5jbmYoKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIGlmIChycy52YWx1ZSkgewogICAgICAgICAgX3RoaXMxNC4kcm91dGVyLnB1c2goIi9sZXR0ZXIvdG8tcmVqZWN0LyIuY29uY2F0KF90aGlzMTQuc2VsZWN0ZWRUckl0ZW0uaWQsICIvIikuY29uY2F0KF90aGlzMTQuc2VsZWN0ZWRUckl0ZW0ubGV0dGVySWQpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNob3dSZWplY3RlZE1vZGFsOiBmdW5jdGlvbiBzaG93UmVqZWN0ZWRNb2RhbCgpIHsKICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkVHJJdGVtLmFjdGlvbikgewogICAgICAgIGNhc2UgJ1NJR05BVFVSRSc6CiAgICAgICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0ZWRUckl0ZW0uc3RhdHVzKSB7CiAgICAgICAgICAgIGNhc2UgJ1NFTkRfRk9SX0NPTU1JU1NJT04nOgogICAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9SZWplY3QoKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnU0VORF9TSUdOJzoKICAgICAgICAgICAgICB0aGlzLmlzRm9yUmV2aWV3TW9kYWwgPSB0cnVlOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRoaXMuaXNSZWplY3RlZE1vZGFsID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ1JFVklFVyc6CiAgICAgICAgICBpZiAodGhpcy5jb21wdXRlZE1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub1JlamVjdCkgewogICAgICAgICAgICB0aGlzLmhhbmRsZU1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub1JlamVjdCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdGVkVHJJdGVtLnN0YXR1cykgewogICAgICAgICAgICAgIGNhc2UgJ1NFTkRfU0VFTl9DTE9TRUQnOgogICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVMZXR0ZXJDYW5jZWxsZWQodGhpcy5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgdGhpcy5pc1JlamVjdGVkTW9kYWwgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLmlzUmVqZWN0ZWRNb2RhbCA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZU1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub1JlamVjdDogZnVuY3Rpb24gaGFuZGxlTWFrZVNpZ25lZENvbXByb21pc2VEZWNpc2lvblRvUmVqZWN0KCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChfdGhpczE1LnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChfdGhpczE1LnNlbGVjdGVkVHJJdGVtLmlkLCAiP3R5cGU9Y29tcHJvbWlzZS1kZWNpc2lvbi10by1yZWplY3QiKSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhhbmRsZU1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub0FjY2VwdDogZnVuY3Rpb24gaGFuZGxlTWFrZVNpZ25lZENvbXByb21pc2VEZWNpc2lvblRvQWNjZXB0KCkgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTYuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChfdGhpczE2LnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChfdGhpczE2LnNlbGVjdGVkVHJJdGVtLmlkLCAiP3R5cGU9Y29tcHJvbWlzZS1kZWNpc2lvbi10by1hY2NlcHQiKSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHZpZXdEb2NTaWduZWQ6IGZ1bmN0aW9uIHZpZXdEb2NTaWduZWQoKSB7CiAgICAgIHRoaXMudmlld01vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRJbmNvbWVUb3RhbENvdW50OiBmdW5jdGlvbiBnZXRJbmNvbWVUb3RhbENvdW50KCkgewogICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7CiAgICAgIFNlcnZpY2UuZ2V0SW5jb21lVG90YWxDb3VudCgpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgX3RoaXMxNy5hZ3JlZW1lbnRDb3VudCA9IHJzLmRhdGEuYWdyZWVtZW50OwogICAgICAgIF90aGlzMTcucmV2aWV3Q291bnQgPSBycy5kYXRhLnJldmlldzsKICAgICAgICBfdGhpczE3LnNpZ25hdHVyZUNvdW50ID0gcnMuZGF0YS5zaWduYXR1cmU7CiAgICAgIH0pOwogICAgfSwKICAgIHNpZ25TdWNjZXNzOiBmdW5jdGlvbiBzaWduU3VjY2VzcyhkYXRhKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE1KCkgewogICAgICAgIHZhciBwYXlsb2FkOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTUkKF9jb250ZXh0MTUpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTUucHJldiA9IF9jb250ZXh0MTUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcGF5bG9hZCA9IHsKICAgICAgICAgICAgICAgIHNpZ25lZENvbnRlbnQ6IGRhdGEuY29udGVudCwKICAgICAgICAgICAgICAgIGlubjogZGF0YS5pbm4sCiAgICAgICAgICAgICAgICBwbmZsOiBkYXRhLnBuZmwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmICghX3RoaXMxOC5pc1JlamVjdGVkTW9kYWwpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMxOC5pc01vZGFsS2V5cyA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzMTguc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpczE4LnNhdmVSZWplY3RlZChwYXlsb2FkKTsKICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSAyMTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0MTUudDAgPSBfdGhpczE4LnNlbGVjdGVkVHJJdGVtLnN0YXR1czsKICAgICAgICAgICAgICBfY29udGV4dDE1Lm5leHQgPSBfY29udGV4dDE1LnQwID09PSAnQ09NTUlTU0lPTl9TRU5EJyA/IDEwIDogX2NvbnRleHQxNS50MCA9PT0gJ05PVF9CRUxPTkcnID8gMTIgOiBfY29udGV4dDE1LnQwID09PSAnU0VORF9TSUdOX1RPX1JFVFVSTicgPyAxNSA6IF9jb250ZXh0MTUudDAgPT09ICdTRU5EX1NJR04nID8gMTcgOiAxOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBTZXJ2aWNlLm9ubHlEb2NTaWduKHBheWxvYWQsIF90aGlzMTguc2VsZWN0ZWRUckl0ZW0uaWQpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguaXNNb2RhbEtleXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvd01zZ1N1Y2Nlc3MoX3RoaXMxOC4kdCgic3VjY2Vzc0RvY1NpZ25lZCIpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOC5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOC5nZXRJbmNvbWVUb3RhbENvdW50KCk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgiYnJlYWsiLCAyMSk7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2Uub25seURvY1NpZ24ocGF5bG9hZCwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbS5pZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNlcnZpY2Uub25seURvY1NpZ25Ob3RCZWxvbmcocGF5bG9hZCwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbS5pZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgICAgICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguY2F0Y2hFcnIoZXJyKTsKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguaXNNb2RhbEtleXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dNc2dTdWNjZXNzKF90aGlzMTguJHQoInN1Y2Nlc3NEb2NTaWduZWQiKSk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTguZ2V0SW5jb21lVG90YWxDb3VudCgpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgICAgICAgICB9KSkpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgIC8vIHRoaXMuY2F0Y2hFcnIoZXJyKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoImJyZWFrIiwgMjEpOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIFNlcnZpY2Uuc2lnbkRvYyhwYXlsb2FkLCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtLmlkLCBfdGhpczE4LmNvbW1pc3Npb25UeXBlSWQsIF90aGlzMTguY29tbWlzc2lvbkNvbW1lbnQpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wRGF0YTsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOC5pc01vZGFsS2V5cyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOC5zaWduYXR1cmVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxOC5jb21taXNzaW9uc01vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMTguc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93TXNnU3VjY2VzcyhfdGhpczE4LiR0KCJzdWNjZXNzRG9jU2lnbmVkIikpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOC5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LmdldEluY29tZVRvdGFsQ291bnQoKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMik7CiAgICAgICAgICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7fSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJicmVhayIsIDIxKTsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBTZXJ2aWNlLmxldHRlckNhbmNlbGxlZChwYXlsb2FkLCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtLmxldHRlcklkLCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtLmlkLCBfdGhpczE4LnJlYXNvbkZvclJldmlldykudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE4LmlzTW9kYWxLZXlzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE4LnNpZ25hdHVyZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczE4LmlzRm9yUmV2aWV3TW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTgucmVhc29uRm9yUmV2aWV3ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMTguc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93TXNnU3VjY2VzcyhfdGhpczE4LiR0KCJzdWNjZXNzRG9jU2lnbmVkIikpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOC5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LmdldEluY29tZVRvdGFsQ291bnQoKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMyk7CiAgICAgICAgICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7fSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuYWJydXB0KCJicmVhayIsIDIxKTsKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBTZXJ2aWNlLnNpZ25Eb2MocGF5bG9hZCwgX3RoaXMxOC5zZWxlY3RlZFRySXRlbS5pZCwgX3RoaXMxOC5jb21taXNzaW9uVHlwZUlkLCBfdGhpczE4LmNvbW1pc3Npb25Db21tZW50KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE0JChfY29udGV4dDE0KSB7CiAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MTQucHJldiA9IF9jb250ZXh0MTQubmV4dCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguaXNNb2RhbEtleXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguc2lnbmF0dXJlTW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTguY29tbWlzc2lvbnNNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczE4LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvd01zZ1N1Y2Nlc3MoX3RoaXMxOC4kdCgic3VjY2Vzc0RvY1NpZ25lZCIpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTguZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxOC5nZXRJbmNvbWVUb3RhbENvdW50KCk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTQpOwogICAgICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgLy8gdGhpcy5jYXRjaEVycihlcnIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LmFicnVwdCgiYnJlYWsiLCAyMSk7CiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFJlY2VpdmVyczogZnVuY3Rpb24gZ2V0UmVjZWl2ZXJzKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMTkgPSB0aGlzOwogICAgICB0aGlzLmxvYWRlclJlY2VpdmVyID0gdHJ1ZTsKICAgICAgU2VydmljZS5nZXRSZWNlaXZlcnMoaXRlbS5sZXR0ZXJJZCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBfdGhpczE5LmluZm9EYXRhID0gcnMuZGF0YTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxOS5sb2FkZXJSZWNlaXZlciA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRWaXNhSW5mb0J5SWQ6IGZ1bmN0aW9uIGdldFZpc2FJbmZvQnlJZCgpIHsKICAgICAgdmFyIF90aGlzMjAgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxNi5wcmV2ID0gX2NvbnRleHQxNi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDE2Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBoZWxwZXJTZXJ2aWNlLmdldFZpc2FBbGxJbmZvQnlJZChfdGhpczIwLnNlbGVjdGVkVHJJdGVtLmFwcGxpY2F0aW9uSWRGcm9tRFhBLCBmYWxzZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczIwLnZpc2FJbmZvQnlJZCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTYpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjbGlja1RySXRlbTogZnVuY3Rpb24gY2xpY2tUckl0ZW0oaXRlbSkgewogICAgICB2YXIgX3RoaXMyMSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNygpIHsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE3LnByZXYgPSBfY29udGV4dDE3Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghKF90aGlzMjEuc2VsZWN0ZWRUckl0ZW0uaWQgPT09IGl0ZW0uaWQpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMjEuc2VsZWN0ZWRUckl0ZW0gPSB7fTsKICAgICAgICAgICAgICBfdGhpczIxLmluZm9EYXRhID0ge307CiAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBfdGhpczIxLnNlbGVjdGVkVHJJdGVtID0gaXRlbTsKICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIxLmdldEF0dGFjaGVkRmlsZXNCeUlkKGl0ZW0ubGV0dGVySWQpOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjEuZ2V0UmVjZWl2ZXJzKGl0ZW0pOwogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGlmICghWydGUk9NX0RYQScsICdOT1RfQkVMT05HJ10uaW5jbHVkZXMoaXRlbS5hcHBsaWNhdGlvblR5cGVJblByb2plY3QpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAxMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyMS5nZXRWaXNhSW5mb0J5SWQoKTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAxNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyMS5nZXRQcm9qZWN0TGV0dGVyc0J5TGV0dGVySWQoaXRlbSk7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQxNy5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX3RoaXMyMS52aXNhSW5mb0J5SWQgPSB7fTsKICAgICAgICAgICAgICBfdGhpczIxLnByb2plY3RGaWxlc0xpc3QgPSBbXTsKICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBpZiAoaXRlbS5pc1JlamVjdExldHRlckNyZWF0ZWQpIHsKICAgICAgICAgICAgICAgIFNlcnZpY2UuZ2V0UmVqZWN0TGV0dGVyKGl0ZW0ubGV0dGVySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBfdGhpczIxLnJlamVjdGVkTGV0dGVyID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczIxLnJlamVjdGVkTGV0dGVyID0gbnVsbDsKICAgICAgICAgICAgICAgIF90aGlzMjEuZmlsZVVwbG9hZFBhdGggPSBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbmF0dXJlSXRlbTogZnVuY3Rpb24gc2lnbmF0dXJlSXRlbSgpIHsKICAgICAgdGhpcy5pc01vZGFsS2V5cyA9IHRydWU7CiAgICB9LAogICAgc2VsZWN0U2VuZFR5cGU6IGZ1bmN0aW9uIHNlbGVjdFNlbmRUeXBlKHYpIHsKICAgICAgdGhpcy5zZWxlY3RlZFRySXRlbSA9IHt9OwogICAgICB0aGlzLmluZm9EYXRhID0ge307CiAgICAgIGlmICh0aGlzLmFjdGl2ZSA9PSB2KSB7CiAgICAgICAgdGhpcy5hY3RpdmUgPSAiIjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjdGl2ZSA9IHY7CiAgICAgIH0KICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgbWFrZUFncmVlOiBmdW5jdGlvbiBtYWtlQWdyZWUoaXRlbSkgewogICAgICB2YXIgX3RoaXMyMiA9IHRoaXM7CiAgICAgIHRoaXMuY25mKCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIFNlcnZpY2UubWFrZUFncmVlKGl0ZW0ubGV0dGVySWQpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxOCgpIHsKICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE4JChfY29udGV4dDE4KSB7CiAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMyMi5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIyLnN1Y2Nlc3NTYXZlZCgpOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyMi5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjIuZ2V0SW5jb21lVG90YWxDb3VudCgpOwogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTguc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgX2NhbGxlZTE4KTsKICAgICAgICAgIH0pKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBmZXRjaENvbW1pc3Npb25UeXBlczogZnVuY3Rpb24gZmV0Y2hDb21taXNzaW9uVHlwZXMoKSB7CiAgICAgIHZhciBfdGhpczIzID0gdGhpczsKICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9OwogICAgICBTZXJ2aWNlLnNlYXJjaExpc3QoJ2RpcmVjdG9yeS9jb21taXNzaW9uL2NvbW1pc3Npb24tdHlwZScsIHRoaXMudmFyX2RlZmF1bHRfc2VhcmNoX3BheWxvYWQsIG51bGwsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMjMuY29tbWlzc2lvblR5cGVzID0gcmVzLmRhdGEubGlzdDsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBtYWtlUmV2aWV3Rm9yQ29tbWlzc2lvbjogZnVuY3Rpb24gbWFrZVJldmlld0ZvckNvbW1pc3Npb24oaXRlbSkgewogICAgICB2YXIgX3RoaXMyNCA9IHRoaXM7CiAgICAgIHRoaXMuY25mKCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIFNlcnZpY2UubWFrZVJldmlld0ZvckNvbW1pc3Npb24oaXRlbS5pZCwgaXRlbS5jb21tZW50KS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoKSB7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MTkpIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDE5LnByZXYgPSBfY29udGV4dDE5Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxOS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjQuc3VjY2Vzc1NhdmVkKCk7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczI0LiRyb3V0ZXIucHVzaCgiL3Byb2plY3RzL2NvbW1pc3Npb24iKTsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUxOSk7CiAgICAgICAgICB9KSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbGV0dGVyTWFrZVZpZXdlZDogZnVuY3Rpb24gbGV0dGVyTWFrZVZpZXdlZChpdGVtKSB7CiAgICAgIHZhciBfdGhpczI1ID0gdGhpczsKICAgICAgdGhpcy5jbmYoKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIGlmIChycy52YWx1ZSkgewogICAgICAgICAgU2VydmljZS5tYWtlQ29tcHJvbWlzZURlY2lzaW9uVmlld2VkKGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczI1LmZvcmNlUm91dGVSZWxvYWQoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbGV0dGVyUmVqZWN0Vmlld2VkOiBmdW5jdGlvbiBsZXR0ZXJSZWplY3RWaWV3ZWQoaXRlbSkgewogICAgICB2YXIgX3RoaXMyNiA9IHRoaXM7CiAgICAgIHRoaXMuY25mKCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIFNlcnZpY2UubWFrZVZpZXdlZExldHRlclRvUmVqZWN0KGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBfdGhpczI2LmZvcmNlUm91dGVSZWxvYWQoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbWFrZVJldmlld0ZvckNvbW1pc3Npb25XaXRoQ29tbWVudDogZnVuY3Rpb24gbWFrZVJldmlld0ZvckNvbW1pc3Npb25XaXRoQ29tbWVudChpdGVtKSB7CiAgICAgIHZhciBfdGhpczI3ID0gdGhpczsKICAgICAgaWYgKHRoaXMuY29tbWlzc2lvblR5cGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHJldHVybiB0aGlzLmZldGNoQ29tbWlzc2lvblR5cGVzKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMjcuY29tbWlzc2lvbnNNb2RhbCA9IHRydWU7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5jb21taXNzaW9uc01vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICBtYWtlUmV2aWV3OiBmdW5jdGlvbiBtYWtlUmV2aWV3KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMjggPSB0aGlzOwogICAgICB0aGlzLmNuZigpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgaWYgKHJzLnZhbHVlKSB7CiAgICAgICAgICBTZXJ2aWNlLm1ha2VSZXZpZXcoaXRlbS5sZXR0ZXJJZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIwKCkgewogICAgICAgICAgICB2YXIgdGVtcERhdGE7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjAkKF9jb250ZXh0MjApIHsKICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIwLnByZXYgPSBfY29udGV4dDIwLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgLy8gbGV0IHRlbXBEYXRhID0gdGhpcy5zZWxlY3RlZFRySXRlbTsKICAgICAgICAgICAgICAgICAgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczI4LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjguc3VjY2Vzc1NhdmVkKCk7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjAubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczI4LmdldExpc3QodHJ1ZSwgdGVtcERhdGEuaWQpOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyOC5nZXRJbmNvbWVUb3RhbENvdW50KCk7CiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMjApOwogICAgICAgICAgfSkpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1ha2VSZXZpZXdMZXR0ZXI6IGZ1bmN0aW9uIG1ha2VSZXZpZXdMZXR0ZXIoaXRlbSkgewogICAgICB2YXIgX3RoaXMyOSA9IHRoaXM7CiAgICAgIHRoaXMuY25mKCkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgIFNlcnZpY2UubWFrZUFncmVlZExldHRlcihpdGVtLmlkKS50aGVuKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjEoKSB7CiAgICAgICAgICAgIHZhciB0ZW1wRGF0YTsKICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMSQoX2NvbnRleHQyMSkgewogICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMjkuc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgICBfY29udGV4dDIxLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyOS5zdWNjZXNzU2F2ZWQoKTsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyMS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMjkuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjEubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczI5LmdldEluY29tZVRvdGFsQ291bnQoKTsKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIxLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF9jYWxsZWUyMSk7CiAgICAgICAgICB9KSkpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVqZWN0Q29uZmlybTogZnVuY3Rpb24gcmVqZWN0Q29uZmlybSgpIHsKICAgICAgdmFyIF90aGlzMzAgPSB0aGlzOwogICAgICBjbmZEb2ModGhpcy4kdCgibWVzc2FnZXMucmVqZWN0X3RpdGxlIikpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgaWYgKHJzLnZhbHVlKSB7CiAgICAgICAgICBfdGhpczMwLnNpZ25hdHVyZU1vZGFsID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZvclJldmlldzogZnVuY3Rpb24gZm9yUmV2aWV3KCkgewogICAgICB2YXIgX3RoaXMzMSA9IHRoaXM7CiAgICAgIGNuZkRvYyh0aGlzLiR0KCJtZXNzYWdlcy55b3Vfc3VyZV90aXRsZSIpKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIGlmIChycy52YWx1ZSkgewogICAgICAgICAgX3RoaXMzMS5zaWduYXR1cmVNb2RhbCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB2aWV3RmlsZTogZnVuY3Rpb24gdmlld0ZpbGUodXBsb2FkUGF0aCkgewogICAgICBpZiAodGhpcy5nZXRFeHQodXBsb2FkUGF0aCkgPT09ICJwZGYiKSB7CiAgICAgICAgdGhpcy5maWxlVXBsb2FkUGF0aCA9IHVwbG9hZFBhdGg7CiAgICAgICAgdGhpcy52aWV3RmlsZU1vZGFsID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIHNpZ25JdGVtVG9NYW5hZ2VtZW50OiBmdW5jdGlvbiBzaWduSXRlbVRvTWFuYWdlbWVudChpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS90by1tYW5hZ2VtZW50LyIuY29uY2F0KGl0ZW0ubGV0dGVySWQsICIvIikuY29uY2F0KGl0ZW0uaWQpKTsKICAgIH0sCiAgICBoYW5kbGVTZW5kTGV0dGVyVG9DaGFpcm1hbjogZnVuY3Rpb24gaGFuZGxlU2VuZExldHRlclRvQ2hhaXJtYW4oKSB7CiAgICAgIHZhciBfdGhpczMyID0gdGhpczsKICAgICAgdGhpcy5jbmYoKS50aGVuKGZ1bmN0aW9uIChfcmVmMTUpIHsKICAgICAgICB2YXIgdmFsdWUgPSBfcmVmMTUudmFsdWU7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBfdGhpczMyLnNlbmRMZXR0ZXJUb0NoYWlybWFuLmxvYWRlciA9IHRydWU7CiAgICAgICAgICBTZXJ2aWNlLmhhbmRsZVNlbmRMZXR0ZXJUb0NoYWlybWFuKF90aGlzMzIucmVqZWN0ZWRMZXR0ZXIuaWQsIF90aGlzMzIuc2VuZExldHRlclRvQ2hhaXJtYW4uY29tbWVudCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMzIuZ2V0TGlzdCgpOwogICAgICAgICAgICBfdGhpczMyLnNlbmRMZXR0ZXJUb0NoYWlybWFuLmxvYWRlciA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczMyLnNlbmRMZXR0ZXJUb0NoYWlybWFuLm1vZGFsID0gZmFsc2U7CiAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMzMi5zZW5kTGV0dGVyVG9DaGFpcm1hbi5sb2FkZXIgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMzMi5zZW5kTGV0dGVyVG9DaGFpcm1hbi5tb2RhbCA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVMZXR0ZXJDYW5jZWxsZWQ6IGZ1bmN0aW9uIGhhbmRsZUxldHRlckNhbmNlbGxlZChpdGVtKSB7CiAgICAgIHRoaXMuaXNSZWplY3RlZFNlZU1vZGFsID0gdHJ1ZTsKICAgIH0sCiAgICBzaWduQWNjZXB0ZWRJdGVtOiBmdW5jdGlvbiBzaWduQWNjZXB0ZWRJdGVtKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMzMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjIoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyMiQoX2NvbnRleHQyMikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyMi5wcmV2ID0gX2NvbnRleHQyMi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoIShpdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCA9PT0gJ0ZST01fRFhBJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ1NFTkRfU0lHTicgJiYgaXRlbS5hY3Rpb24gPT09ICdTSUdOQVRVUkUnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyMi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCBmYWxzZSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgICAgIF90aGlzMzMuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnblJlamVjdGVkSXRlbTogZnVuY3Rpb24gc2lnblJlamVjdGVkSXRlbShpdGVtKSB7CiAgICAgIHZhciBfdGhpczM0ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIzKCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjMkKF9jb250ZXh0MjMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0MjMucHJldiA9IF9jb250ZXh0MjMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoaXRlbS5hcHBsaWNhdGlvblR5cGVJblByb2plY3QgPT09ICdGUk9NX0RYQScgJiYgaXRlbS5zdGF0dXMgPT09ICdTRU5EX1NJR04nICYmIGl0ZW0uYWN0aW9uID09PSAnU0lHTkFUVVJFJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyMy5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5zZXRMZXR0ZXJSZWp0T3JBY2NlcHQoaXRlbS5sZXR0ZXJJZCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgICAgIF90aGlzMzQuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbkl0ZW06IGZ1bmN0aW9uIHNpZ25JdGVtKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMzUgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMjgoKSB7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyOCQoX2NvbnRleHQyOCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyOC5wcmV2ID0gX2NvbnRleHQyOC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDI4LnQwID0gaXRlbS5hY3Rpb247CiAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gX2NvbnRleHQyOC50MCA9PT0gJ1NJR05BVFVSRScgPyAzIDogX2NvbnRleHQyOC50MCA9PT0gJ0FHUkVFTUVOVCcgPyA1OSA6IF9jb250ZXh0MjgudDAgPT09ICdSRVZJRVcnID8gNjYgOiA5ODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF90aGlzMzUuY3VycmVudEl0ZW0gPSBpdGVtOwogICAgICAgICAgICAgIGlmICghKGl0ZW0uYXBwbGljYXRpb25UeXBlSW5Qcm9qZWN0ID09PSAnRlJPTV9EWEEnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyOC50MSA9IGl0ZW0uc3RhdHVzOwogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IF9jb250ZXh0MjgudDEgPT09ICdTRU5EX1NJR04nID8gOCA6IF9jb250ZXh0MjgudDEgPT09ICdDT01NSVNTSU9OX1NFTkQnID8gMTEgOiAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgICAgICAgX3RoaXMzNS4kcm91dGVyLnB1c2goIi9sZXR0ZXIvaW5jb21lLyIuY29uY2F0KGl0ZW0ubGV0dGVySWQsICIvIikuY29uY2F0KGl0ZW0uaWQpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgMTYpOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDEzOwogICAgICAgICAgICAgIHJldHVybiBTZXJ2aWNlLnNldExldHRlclJlanRPckFjY2VwdChpdGVtLmxldHRlcklkLCB0cnVlKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgICAgICAgICAgX3RoaXMzNS4kcm91dGVyLnB1c2goIi9sZXR0ZXIvaW5jb21lLyIuY29uY2F0KGl0ZW0ubGV0dGVySWQsICIvIikuY29uY2F0KGl0ZW0uaWQpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgMTYpOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNuZkRvYyhfdGhpczM1LiR0KCJkb2NDb25maXJtIikpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzNS5zaWduYXR1cmVNb2RhbCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDE2KTsKICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA1ODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBpZiAoIShpdGVtLmFwcGxpY2F0aW9uVHlwZUluUHJvamVjdCA9PT0gJ05PVF9CRUxPTkcnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKCEoaXRlbS5maWxlVHlwZSAhPT0gJ3BkZicpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAyMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNS5jb252ZXJ0VG9QZGYoaXRlbSkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfcmVmMTYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUoKS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyNChyKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMjQkKF9jb250ZXh0MjQpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI0LnByZXYgPSBfY29udGV4dDI0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyLnVwbG9hZFBhdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczM1LiR0b2FzdChfdGhpczM1LiR0KCdtZXNzYWdlcy5wcm9qZWN0X2ZpbGVzX2NvbnZlcnRfcGRmX2Vycm9yJyksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghci51cGxvYWRQYXRoLmVuZHNXaXRoKCcucGRmJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczM1LiR0b2FzdChfdGhpczM1LiR0KCdtZXNzYWdlcy5wcm9qZWN0X2ZpbGVzX2NvbnZlcnRfcGRmX2Vycm9yJyksIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTI0KTsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYxNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KCkpLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgX2NvbnRleHQyOC50MiA9IGl0ZW0uc3RhdHVzOwogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IF9jb250ZXh0MjgudDIgPT09ICdTRU5EX1NJR04nID8gMjcgOiBfY29udGV4dDI4LnQyID09PSAnRk9SX1JFR0lPTicgPyAyOSA6IF9jb250ZXh0MjgudDIgPT09ICdGT1JfTk9UX0JFTE9ORycgPyAzMiA6IF9jb250ZXh0MjgudDIgPT09ICdDT01NSVNTSU9OX1NFTkQnID8gMzUgOiBfY29udGV4dDI4LnQyID09PSAnU0VORF9TSUdOX0ZJTklTSCcgPyAzNyA6IF9jb250ZXh0MjgudDIgPT09ICdGT1JfTk9UX0NPTVBMRVRFRCcgPyA0MCA6IF9jb250ZXh0MjgudDIgPT09ICdTRU5EX0ZPUl9DT01NSVNTSU9OJyA/IDQzIDogX2NvbnRleHQyOC50MiA9PT0gJ1NFTkRfU0lHTl9UT19SRVRVUk4nID8gNDYgOiBfY29udGV4dDI4LnQyID09PSAnVE9fU0lHTl9SRUpFQ1RfTEVUVEVSJyA/IDQ5IDogX2NvbnRleHQyOC50MiA9PT0gJ1RPX1NJR05fRklOSVNIX0xFVFRFUicgPyA1MiA6IDU1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgIF90aGlzMzUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAzMTsKICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5zZXRMZXR0ZXJSZWp0T3JBY2NlcHQoaXRlbS5sZXR0ZXJJZCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgICAgIF90aGlzMzUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSAzNDsKICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5zZXRMZXR0ZXJSZWp0T3JBY2NlcHQoaXRlbS5sZXR0ZXJJZCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgICAgIF90aGlzMzUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICBfdGhpczM1LiRyb3V0ZXIucHVzaCgiL2xldHRlci9pbmNvbWUvIi5jb25jYXQoaXRlbS5sZXR0ZXJJZCwgIi8iKS5jb25jYXQoaXRlbS5pZCkpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCA1OCk7CiAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL21ha2Utc2lnbmVkLXRvLWNsb3NlZC8iLmNvbmNhdChpdGVtLmlkLCAiLyIpLmNvbmNhdChpdGVtLmxldHRlcklkKSk7CiAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA0MjsKICAgICAgICAgICAgICByZXR1cm4gU2VydmljZS5zZXRMZXR0ZXJSZWp0T3JBY2NlcHQoaXRlbS5sZXR0ZXJJZCwgdHJ1ZSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgICAgIF90aGlzMzUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA0NTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNS4kcm91dGVyLnB1c2goIi9sZXR0ZXIvYmVmb3JlLWNvbW1pc3Npb24vIi5jb25jYXQoaXRlbS5pZCwgIi8iKS5jb25jYXQoaXRlbS5sZXR0ZXJJZCkpOwogICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCA1OCk7CiAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gNDg7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzUuJHJvdXRlci5wdXNoKCIvbGV0dGVyL2luY29tZS8iLmNvbmNhdChpdGVtLmxldHRlcklkLCAiLyIpLmNvbmNhdChpdGVtLmlkKSk7CiAgICAgICAgICAgIGNhc2UgNDg6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA1MTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNS4kcm91dGVyLnB1c2goIi9sZXR0ZXIvdG8tcmVqZWN0LyIuY29uY2F0KGl0ZW0uaWQsICIvIikuY29uY2F0KGl0ZW0ubGV0dGVySWQpKTsKICAgICAgICAgICAgY2FzZSA1MToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgNTgpOwogICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDU0OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LiRyb3V0ZXIucHVzaCgiL2xldHRlci9iZWZvcmUtY29tbWlzc2lvbi8iLmNvbmNhdChpdGVtLmlkLCAiLyIpLmNvbmNhdChpdGVtLmxldHRlcklkKSk7CiAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDU4KTsKICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA1NzsKICAgICAgICAgICAgICByZXR1cm4gY25mRG9jKF90aGlzMzUuJHQoImRvY0NvbmZpcm0iKSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgICAgICAgIGlmIChycy52YWx1ZSkgewogICAgICAgICAgICAgICAgICBfdGhpczM1LnNpZ25hdHVyZU1vZGFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1NzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgNTgpOwogICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCA5OCk7CiAgICAgICAgICAgIGNhc2UgNTk6CiAgICAgICAgICAgICAgX3RoaXMzNS5jdXJyZW50SXRlbSA9IGl0ZW07CiAgICAgICAgICAgICAgX2NvbnRleHQyOC50MyA9IGl0ZW0uc3RhdHVzOwogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDYzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgIF90aGlzMzUubWFrZUFncmVlKGl0ZW0pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCA2NSk7CiAgICAgICAgICAgIGNhc2UgNjU6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDk4KTsKICAgICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgICBfdGhpczM1LmN1cnJlbnRJdGVtID0gaXRlbTsKICAgICAgICAgICAgICBpZiAoIV90aGlzMzUuY29tcHV0ZWRNYWtlU2lnbmVkQ29tcHJvbWlzZURlY2lzaW9uVG9BY2NlcHQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDcyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDcwOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LmhhbmRsZU1ha2VTaWduZWRDb21wcm9taXNlRGVjaXNpb25Ub0FjY2VwdCgpOwogICAgICAgICAgICBjYXNlIDcwOgogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDk3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgIGlmICghKCFfdGhpczM1LmN1cnJlbnRJdGVtLmlzRm9yQ29tbWlzc2lvbiAmJiBfdGhpczM1LmN1cnJlbnRJdGVtLmlzSGVhZE9mRGVwYXJ0bWVudCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDc2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMzUubGV0dGVyTWFrZVZpZXdlZChpdGVtKTsKICAgICAgICAgICAgICBfY29udGV4dDI4Lm5leHQgPSA5NzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICBfY29udGV4dDI4LnQ0ID0gaXRlbS5zdGF0dXM7CiAgICAgICAgICAgICAgX2NvbnRleHQyOC5uZXh0ID0gX2NvbnRleHQyOC50NCA9PT0gJ1NFTkRfRk9SX0NPTU1JU1NJT04nID8gNzkgOiBfY29udGV4dDI4LnQ0ID09PSAnU0VOVF9UT19NQU5BR0VNRU5UJyA/IDgxIDogX2NvbnRleHQyOC50NCA9PT0gJ1NFTlRfRk9SX1JFSkVDVCcgPyA4MyA6IF9jb250ZXh0MjgudDQgPT09ICdUT19JTlZPS0VfU0lHTkVEJyA/IDg1IDogX2NvbnRleHQyOC50NCA9PT0gJ1NFTkRfU0VFTl9DTE9TRUQnID8gODcgOiBfY29udGV4dDI4LnQ0ID09PSAnRklOSVNIX0xFVFRFUl9TSUdOX0FORF9TRU5EJyA/IDkwIDogX2NvbnRleHQyOC50NCA9PT0gJ1JFSkVDVEVEJyA/IDkzIDogOTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgX3RoaXMzNS5tYWtlUmV2aWV3Rm9yQ29tbWlzc2lvbihpdGVtKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgOTcpOwogICAgICAgICAgICBjYXNlIDgxOgogICAgICAgICAgICAgIF90aGlzMzUubWFrZVJldmlld0ZvckNvbW1pc3Npb25XaXRoQ29tbWVudChpdGVtKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgOTcpOwogICAgICAgICAgICBjYXNlIDgzOgogICAgICAgICAgICAgIC8vIFhhdCB5YXJhdGlzaCB0dWdtYXNpZGEgc2h1IGpveWdhIGtlbGF5YXB0aS4KICAgICAgICAgICAgICBfdGhpczM1LnVwbG9hZFJlamVjdExldHRlcihpdGVtKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgOTcpOwogICAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICAgIF90aGlzMzUubWFrZVJldmlld0xldHRlcihpdGVtKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgOTcpOwogICAgICAgICAgICBjYXNlIDg3OgogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDg5OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LmNuZigpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKFsiRk9SX1JFU1VNRV9XT1JLIiwgIkZPUl9ERUxBWV9XT1JLIiwgIkZPUl9TVVNQRU5EX1dPUksiXS5pbmNsdWRlcyhfdGhpczM1LnNlbGVjdGVkVHJJdGVtLnJldHVyblR5cGUpKSB7CiAgICAgICAgICAgICAgICAgICAgU2VydmljZS5sZXR0ZXJBY2NlcHRGb3JSZW9wZW4oaXRlbS5sZXR0ZXJJZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI1KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNSQoX2NvbnRleHQyNSkgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI1LnByZXYgPSBfY29udGV4dDI1Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMzUuc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LnN1Y2Nlc3NTYXZlZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNS5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI1Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzUuZ2V0SW5jb21lVG90YWxDb3VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjUpOwogICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgU2VydmljZS5tYWtlQWdyZWVkTGV0dGVyVG9DbG9zZWQoaXRlbS5pZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI2KCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXBEYXRhOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyNiQoX2NvbnRleHQyNikgewogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI2LnByZXYgPSBfY29udGV4dDI2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIF90aGlzMzUuc2VsZWN0ZWRUckl0ZW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LnN1Y2Nlc3NTYXZlZCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNS5nZXRMaXN0KHRydWUsIHRlbXBEYXRhLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzUuZ2V0SW5jb21lVG90YWxDb3VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjYpOwogICAgICAgICAgICAgICAgICAgIH0pKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA4OToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgOTcpOwogICAgICAgICAgICBjYXNlIDkwOgogICAgICAgICAgICAgIF9jb250ZXh0MjgubmV4dCA9IDkyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LmNuZigpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgICAgICBpZiAocnMudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgU2VydmljZS5tYWtlVmlld2VkTGV0dGVyVG9GaW5pc2goaXRlbS5pZCkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTI3KCkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wRGF0YTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTI3JChfY29udGV4dDI3KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDI3LnByZXYgPSBfY29udGV4dDI3Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMzNS5zZWxlY3RlZFRySXRlbSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyNy5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzNS5zdWNjZXNzU2F2ZWQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MjcubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMzUuZ2V0TGlzdCh0cnVlLCB0ZW1wRGF0YS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDI3Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczM1LmdldEluY29tZVRvdGFsQ291bnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI3LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMjcpOwogICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDkyOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LmFicnVwdCgiYnJlYWsiLCA5Nyk7CiAgICAgICAgICAgIGNhc2UgOTM6CiAgICAgICAgICAgICAgX3RoaXMzNS5sZXR0ZXJSZWplY3RWaWV3ZWQoaXRlbSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDk3KTsKICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICBfdGhpczM1Lm1ha2VSZXZpZXcoaXRlbSk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjguYWJydXB0KCJicmVhayIsIDk3KTsKICAgICAgICAgICAgY2FzZSA5NzoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyOC5hYnJ1cHQoImJyZWFrIiwgOTgpOwogICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDI4LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjgpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMzNiA9IHRoaXM7CiAgICAgIGlmICghdGhpcy4kcmVmcy5hZGRSZWYuY2hlY2tWYWxpZGl0eSgpKSB7CiAgICAgICAgU2VydmljZS51cGxvYWQodGhpcy4kcmVmcy5hZGRSZWYuZm9ybSkudGhlbihmdW5jdGlvbiAocnMpIHsKICAgICAgICAgIGlmIChycy5kYXRhKSB7CiAgICAgICAgICAgIF90aGlzMzYuZ2V0TGlzdCgpOwogICAgICAgICAgICB2YXIgcm91dGVEYXRhID0gX3RoaXMzNi4kcm91dGVyLnJlc29sdmUoewogICAgICAgICAgICAgIG5hbWU6ICJPZmZpY2UtRE9DVU1FTlQtY29tbWlzc2lvbiIsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHBhZ2U6ICJHRVQiLAogICAgICAgICAgICAgICAgaWQ6IHJzLmRhdGEuaWQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB3aW5kb3cub3Blbihyb3V0ZURhdGEuaHJlZiwgIl9ibGFuayIpOwogICAgICAgICAgICBfdGhpczM2LmlzTW9kYWwgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVudGVySW5mbygpOwogICAgICB9CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHRoaXMuaXNNb2RhbCA9IHRydWU7CiAgICB9LAogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzMzcgPSB0aGlzOwogICAgICB2YXIgcmVzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOwogICAgICB2YXIgcmVzZXRJZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBTZXJ2aWNlLmdldExpc3RMZXR0ZXJJbmNvbWUodGhpcy5wYXJhbXMsIHRoaXMuYWN0aXZlKS50aGVuKGZ1bmN0aW9uIChfcmVmMjApIHsKICAgICAgICB2YXIgZGF0YSA9IF9yZWYyMC5kYXRhOwogICAgICAgIF90aGlzMzcubGlzdCA9IGRhdGEubGlzdDsKICAgICAgICBfdGhpczM3LnRvdGFsID0gZGF0YS50b3RhbDsKICAgICAgICBpZiAocmVzZXQpIHsKICAgICAgICAgIHZhciBuZXdkYXRhID0gX3RoaXMzNy5saXN0LmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuaWQgPT09IHJlc2V0SWQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMzcuc2VsZWN0ZWRUckl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBuZXdkYXRhKTsKICAgICAgICAgIC8vIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICBfdGhpczM3LmdldFJlY2VpdmVycyhfdGhpczM3LnNlbGVjdGVkVHJJdGVtKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAvLyB0aGlzLmNhdGNoRXJyKGVycik7CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMzcubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRSZWplY3RMZXR0ZXI6IGZ1bmN0aW9uIHVwbG9hZFJlamVjdExldHRlcihpdGVtKSB7CiAgICAgIHZhciBfdGhpczM4ID0gdGhpczsKICAgICAgdGhpcy5jbmYoKS50aGVuKGZ1bmN0aW9uIChfcmVmMjEpIHsKICAgICAgICB2YXIgdmFsdWUgPSBfcmVmMjEudmFsdWU7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBTZXJ2aWNlLnVwbG9hZFJlamVjdExldHRlcihpdGVtLmlkLCAnTEVUVEVSX1JFSkVDVCcsICJSYWQgZXRpc2ggeGF0aSIpLnRoZW4oZnVuY3Rpb24gKHJzKSB7CiAgICAgICAgICAgIHZhciByb3V0ZURhdGEgPSBfdGhpczM4LiRyb3V0ZXIucmVzb2x2ZSh7CiAgICAgICAgICAgICAgbmFtZTogIk9mZmljZS1ET0NVTUVOVC1jb21taXNzaW9uIiwKICAgICAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICAgICAgaWQ6IHJzLmRhdGEuaWQsCiAgICAgICAgICAgICAgICBwYWdlOiAiR0VUIgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzMzguZ2V0TGlzdCgpOwogICAgICAgICAgICBfdGhpczM4LmdldEluY29tZVRvdGFsQ291bnQoKTsKICAgICAgICAgICAgd2luZG93Lm9wZW4ocm91dGVEYXRhLmhyZWYsICJfYmxhbmsiKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,eACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MACAC,QACA;QACAC;QACAC;MACA,GACA;QACAD;QACAN;MACA,EACA;MACAQ;MACA7B;MACAD;MACA+B;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAN;MACA;IACA;EACA;EACAO;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,OACA;UAAA;YAAA;YAAA,OACA;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EACA;EACAC;IACAC;MACA;QACAA;UACAC;UACAnE;QACA;QACAoE;MACA;IACA;IACAC;MACA,sEACA,iEACA,6EACA,iHACA;IACA;IACAC;MACA,sEACA,iEACA,2DACA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;MACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;YACA;cACA;YACA;YACA;UACA;YACA;UACA;YACA;UACA;YACA;QAAA;MAEA;QACA;MACA;MACA;IACA;EACA;EAEAC;IACAC;MACA;MACA;IACA;IACAC;MAAA;MACAC;QACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAC;gBACAC;gBACAC;gBACAC;cACA;cAAA,eACA;cAAA,kCACA;cAAA;YAAA;cAAA,eACA;cAAA,kCACA;cAAA;YAAA;cAAA;cAAA,OACAC,qHACAC;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACA;sBACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA,IACAC;gBACA;cAAA,CACA;YAAA;cAAA;YAAA;cAAA;YAAA;cAAA;cAAA,OAKAF,mIACAC;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACAE;sBAAA;sBAAA,OACAC;oBAAA;sBACA;sBACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA,IACAF;gBACA;cAAA,CACA;YAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAGA;IACAG;MAAA;MACA;QACA,+CACA,4DACA,uDACA;UACA;YACA;cAAAC;YAAA;UACA;UACAN,gJACAC;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACAG;gBAAA;kBACA;kBACA;kBACA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CACA,IACAF;YACA;UAAA,CACA,EACAK;YACA;YACA;UACA;QACA;UACA;QACA;MACA;QACA;UAAAD;QAAA;MACA;IACA;IACAE;MACA;QAAA;MAAA;MACA;QACA;UACAC;UACAC;UACAC;QACA;MAEA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;MACAb,2DACAC;QACA;QACA;QACA;QACA;QACA;AACA;AACA;AACA;AACA;AACA;MACA,GACAC,oBACA,GACAK;QACA;MACA;IACA;IACAO;MAAA;MACA;MACA;MACA;MACA;MAEAd,kCACAC;QACAc;UACA;QACA;MACA,GACAR;QACA;QACA;MACA;IACA;IACAS;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAVA,CAYA;IACAC;MACA;AACA;AACA;AACA;MACA;QACAC;QACAC;UAAApG;UAAAqG;QAAA;MACA;MACAC;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;MACA;QACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAL;QACAC;UAAAC;UAAArG;QAAA;MACA;MACAsG;IACA;IACAG;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;QACA;UACAC;UACAC;UACAC;UACAC;QACA;QACA7B,kCACAC;UACA;YACA;cACA;YACA;YACA6B;UACA;YACAA;UACA;QACA,GACA5B;UACA;UACA6B;QACA;MACA;IACA;IACAC;MAAA;MACAhC,oDACAC;QACA;QACA;QACA;UACA;YACAc;cACA,6BACAd;gBACA;cACA,GACAC;gBACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA,GACAA,oBACA;IACA;IACA+B;MAAA;MACA;MACA;MACA;MACAjC,wDACAC;QACAc;UACA;QACA;MACA,GACAR;QACA;MACA;IACA;IACA2B;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACApC;QACA;MACA;IACA;IACAqC;MAAA;MACArC;QACA;MACA;IACA;IACAsC;MAAA;MACA;QACA;QACAtC,qBACA,iCACA,2BACA,wBACAJ,QACA,CACAK;UAAA;UAAA;YAAA;cAAA;gBACA;gBACAE;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA,CAOA,IACAI;UACA;QACA;MACA;IACA;IACAgC;MAAA;MACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;YACA;cACA;cACA;YACA;cACA;cACA;YACA;cACA;cACA;UAAA;UAEA;QACA;UACA;YACA;UACA;YACA;cACA;gBACA;gBACA;cACA;gBACA;gBACA;YAAA;UAEA;UACA;QACA;UACA;UACA;MAAA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA5C;QACA;QACA;QACA;MACA;IACA;IACA6C;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cACAjD;gBACAC;gBACAC;gBACAC;cACA;cAAA,KACA;gBAAA;gBAAA;cAAA;cACA;cACA;cACA;cAAA;cAAA;YAAA;cAAA,gBAEA;cAAA,oCACA,2CAcA,sCAuBA,+CAcA;cAAA;YAAA;cAlDAC,wDACAC;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACAE;sBAAA;sBAAA,OACAC;oBAAA;sBAAA;sBAAA,OACA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA,IACAF;gBACA;cAAA,CACA;cAAA;YAAA;cAAA;cAAA,OAGAF,wDACAC;gBAAA;gBAAA;kBAAA;oBAAA;sBAAA;sBAAA,OACAD,iEACAC;wBAAA;0BAAA;4BAAA;4BAAA;8BAAA;0BAAA;wBAAA;sBAAA,CAGA,IACAC;wBACA;sBACA;oBAAA;sBAEA;sBACA;sBACAC;sBAAA;sBAAA,OACAC;oBAAA;sBAAA;sBAAA,OACA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA,IACAF;gBACA;cAAA,CACA;YAAA;cAAA;YAAA;cAGAF,yGACAC;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACA;sBACAE;sBAAA;sBAAA,OACAC;oBAAA;sBAAA;sBAAA,OACA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA,IACAF,sBACA;cAAA;YAAA;cAGAF,sHACAC;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACA;sBACA;sBACAE;sBAAA;sBAAA,OACAC;oBAAA;sBAAA;sBAAA,OACA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CACA,IACAF,sBACA;cAAA;YAAA;cAGAF,yGACAC;gBAAA;gBAAA;kBAAA;oBAAA;sBACA;sBACA;sBACA;sBACAE;sBAAA;sBAAA,OACAC;oBAAA;sBAAA;sBAAA,OACA;oBAAA;sBAAA;sBAAA,OACA;oBAAA;oBAAA;sBAAA;kBAAA;gBAAA;cAAA,CAOA,IACAF;gBACA;cAAA,CACA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAIA;IACA4C;MAAA;MACA;MACA9C,oCACAC;QACA;MACA,GACAM;QACA;MACA;IACA;IACAwC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACAC,qFACA/C;gBACA;cACA,GACAC;gBACA+C;cACA,wBACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MACA;gBAAA;gBAAA;cAAA;cACA;cACA;cAAA;cAAA;YAAA;cAEA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OACA;YAAA;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;YAAA;cAEA;cACA;YAAA;cAEA;gBACAlD;kBACA;gBACA;kBACAiD;gBACA;cACA;gBACA;gBACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAEA;IACAE;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;MACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;UACArD;YAAA;YAAA;cAAA;gBAAA;kBACAG;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CAOA;QACA;MACA;IACA;IACAmD;MAAA;MAAA;QAAA;MAAA;MACAtD,wGACAC;QACA;QACAsD;MACA,GACArD;QACA+C;MACA;IACA;IACAO;MAAA;MACA;QACA;UACAxD;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CACA;QACA;MACA;IACA;IACAyD;MAAA;MACA;QACA;UACAzD;YACA;UACA;QACA;MACA;IACA;IACA0D;MAAA;MACA;QACA;UACA1D;YACA;UACA;QACA;MACA;IACA;IACA2D;MAAA;MACA;QACA;UACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;UACA5D;YAAA;YAAA;cAAA;gBAAA;kBACA;kBACAG;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CACA;QACA;MACA;IACA;IACA0D;MAAA;MACA;QACA;UACA7D;YAAA;YAAA;cAAA;gBAAA;kBACAG;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;kBAAA;kBAAA,OACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA,CACA;QACA;MACA;IACA;IACA2D;MAAA;MACApE;QACA;UACA;QACA;MACA;IACA;IACAqE;MAAA;MACArE;QACA;UACA;QACA;MACA;IACA;IACAsE;MACA;QACA;QACA;MACA;IACA;IACAC;MACA,yDACAC,oCACA;IACA;IACAC;MAAA;MACA;QAAA;QACA;UACA;UACAnE;YACA;YACA;YACA;UACA,GACAO;YACA;YACA;UACA;QACA;MACA;IACA;IACA6D;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MACAH,+EACAA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAEA;IAEAI;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,MACAJ,+EACAA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAEA;IACAK;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA,gBACAL;cAAA,oCACA,oCA2FA,qCAQA;cAAA;YAAA;cAlGA;cAAA,MACAA;gBAAA;gBAAA;cAAA;cAAA,gBACAA;cAAA,oCACA,oCAOA;cAAA;YAAA;cAAA;cAAA,OANAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;cAAA;YAAA;cAGAxE;gBACA;kBACA;gBACA;cACA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA,MAGAwE;gBAAA;gBAAA;cAAA;cAAA,MACAA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;gBAAA;kBAAA;oBAAA;sBAAA;wBACA;0BACA;4BAAA5D;0BAAA;wBACA;0BACA;4BAAAA;0BAAA;wBACA;sBAAA;sBAAA;wBAAA;oBAAA;kBAAA;gBAAA,CACA;gBAAA;kBAAA;gBAAA;cAAA,KACAJ;gBAAA;cAAA;YAAA;cAAA;cAAA;YAAA;cAAA,gBAGAgE;cAAA,oCACA,qCAGA,sCAOA,0CAOA,2CAGA,4CAGA,6CAOA,+CAGA,+CAGA,iDAGA;cAAA;YAAA;cAtCA;cAAA;YAAA;cAAA;cAAA,OAGAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;cAAA;YAAA;cAGA;cAAA;YAAA;cAAA;cAAA,OAGA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGAlE;gBACA,8CACAkE,oCACA;cACA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGAxE;gBACA;kBACA;gBACA;cACA;YAAA;cAAA;YAAA;cAAA;YAAA;cAMA;cAAA,gBACAwE;cAAA;cAAA;YAAA;cAEA;cAAA;YAAA;cAAA;YAAA;cAKA;cAAA,KACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;YAAA;cAAA,MAEA;gBAAA;gBAAA;cAAA;cACA;cAAA;cAAA;YAAA;cAAA,gBAEAA;cAAA,oCACA,+CAGA,8CAGA,2CAIA,4CAGA,4CAqBA,uDAYA;cAAA;YAAA;cA7CA;cAAA;YAAA;cAGA;cAAA;YAAA;cAGA;cACA;cAAA;YAAA;cAGA;cAAA;YAAA;cAAA;cAAA,OAGA;gBACA;kBACA;oBACAlE;sBAAA;sBAAA;wBAAA;0BAAA;4BACAG;4BAAA;4BAAA,OACA;0BAAA;4BAAA;4BAAA,OACA;0BAAA;4BAAA;4BAAA,OACA;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA,CACA;kBACA;oBACAH;sBAAA;sBAAA;wBAAA;0BAAA;4BACAG;4BAAA;4BAAA,OACA;0BAAA;4BAAA;4BAAA,OACA;0BAAA;4BAAA;4BAAA,OACA;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA,CACA;kBACA;gBACA;cACA;YAAA;cAAA;YAAA;cAAA;cAAA,OAGA;gBACA;kBACAH;oBAAA;oBAAA;sBAAA;wBAAA;0BACAG;0BAAA;0BAAA,OACA;wBAAA;0BAAA;0BAAA,OACA;wBAAA;0BAAA;0BAAA,OACA;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA,CACA;gBACA;cACA;YAAA;cAAA;YAAA;cAGA;cAAA;YAAA;cAGA;cAAA;YAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAMA;IACAqE;MAAA;MACA;QACAxE;UACA;YACA;YACA;cACAkB;cACAC;gBAAApG;gBAAAqG;cAAA;YACA;YACAC;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAoD;MACA;IACA;IACAC;MAAA;MAAA;MAAA;MACA;MACA1E,sDACAC;QAAA;QACA;QACA;QACA;UACA;YAAA;UAAA;UACA;UACA;UACA;QACA;MACA,GACAC;QACA;MAAA,CACA,EACAK;QACA;MACA;IACA;IACAoE;MAAA;MACA;QAAA;QACA;UACA3E;YACA;cACAkB;cACAC;gBAAAC;gBAAArG;cAAA;YACA;YACA;YACA;YACAsG;UACA;QACA;MACA;IACA;EACA;AACA","names":["components","SignKeys","Receivers","Editor","Modal","watch","page","searchValue","data","rejectedSeeLoader","rejectedLetter","viewFileModal","fileUploadPath","isRejectedSeeModal","signatureSeeModal","reasonRejectedSee","commissionTypeId","commissionComment","commissionCompletionDate","commissionModalLoader","commissionTypes","commissionsModal","currentPage","src","numPages","reasonRejected","reasonForReview","selectedTrItem","active","sendTypeList","label","value","title","items","text","href","list","limit","loading","total","isModal","currentItem","signatureModal","loaderButton","isModalKeys","agreementCount","signatureCount","reviewCount","loaderReceiver","infoData","visaInfoById","rejectedLoader","isRejectedModal","isForReviewModal","viewModal","filesList","projectFilesList","viewModalBeforeSigned","loaderPdf","ilovaUploadPath","viewIlovaModal","base64","editModal","loader","contextText","icon","pdf","sendLetterToChairman","modal","comment","created","computed","params","itemsPerPage","search","computedMakeSignedCompromiseDecisionToReject","computedMakeSignedCompromiseDecisionToAccept","signItemButtonLabel","methods","showRejectedByRaisModal","rejectSeeConfirm","cnfDoc","signSuccessSee","payload","signedContent","inn","pnfl","Service","then","catch","tempData","showMsgSuccess","openSignatureModalForCommission","type","finally","customLabelCommissionTypes","nameRu","nameLt","nameUz","changeText","okModal","viewModalClick","setTimeout","editLetter","viewProject","name","query","id","window","viewIlova","openOnlyOffice","viewIlovaProject","convertToPdf","url","outputtype","forSign","key","res","rej","getByIdLetter","viewLetter","viewDocBeforeSigned","setCurrentPage","getAttachedFilesById","getProjectLettersByLetterId","saveRejected","handleToReject","showRejectedModal","handleMakeSignedCompromiseDecisionToReject","handleMakeSignedCompromiseDecisionToAccept","viewDocSigned","getIncomeTotalCount","signSuccess","getReceivers","getVisaInfoById","helperService","console","clickTrItem","signatureItem","selectSendType","makeAgree","fetchCommissionTypes","callback","makeReviewForCommission","letterMakeViewed","letterRejectViewed","makeReviewForCommissionWithComment","makeReview","makeReviewLetter","rejectConfirm","forReview","viewFile","signItemToManagement","item","handleSendLetterToChairman","handleLetterCancelled","signAcceptedItem","signRejectedItem","signItem","save","add","getList","uploadRejectLetter"],"sourceRoot":"src/modules/letter/income","sources":["income.vue"],"sourcesContent":["<script>\r\nimport Service from \"../letterService\";\r\nimport {cnfDoc, showMsgSuccess} from \"@/helper\";\r\nimport SignKeys from \"../SignKeys.vue\";\r\nimport Receivers from \"./receivers.vue\";\r\nimport Editor from \"../create/froal.editor.vue\";\r\nimport Modal from \"../create/modal.vue\";\r\nimport helperService from '@/shared/services/helper.service'\r\n\r\nexport default {\r\n  components: {SignKeys, Receivers, Editor, Modal},\r\n  watch: {\r\n    page() {\r\n      this.getList();\r\n    },\r\n    searchValue(v) {\r\n      this.getList();\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      rejectedSeeLoader: false,\r\n      rejectedLetter: null,\r\n      viewFileModal: false,\r\n      fileUploadPath: null,\r\n      isRejectedSeeModal: false,\r\n      signatureSeeModal: false,\r\n      reasonRejectedSee: \"\",\r\n      commissionTypeId: null,\r\n      commissionComment: '',\r\n      commissionCompletionDate: null,\r\n      commissionModalLoader: false,\r\n      commissionTypes: [],\r\n      commissionsModal: false,\r\n      currentPage: 1,\r\n      src: null,\r\n      numPages: undefined,\r\n      reasonRejected: \"\",\r\n      reasonForReview: \"\",\r\n      selectedTrItem: {},\r\n      active: \"\",\r\n      sendTypeList: [\r\n        {\r\n          label: this.$t(\"forSignature\"),\r\n          value: \"SIGNATURE\",\r\n        },\r\n        {\r\n          label: this.$t(\"forAgreement\"),\r\n          value: \"AGREEMENT\",\r\n        },\r\n        {\r\n          label: this.$t(\"forReview\"),\r\n          value: \"REVIEW\",\r\n        },\r\n      ],\r\n      title: this.$t(\"received\"),\r\n      items: [\r\n        {\r\n          text: this.$t(\"menu\"),\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: this.$t(\"received\"),\r\n          active: true,\r\n        },\r\n      ],\r\n      list: [],\r\n      searchValue: \"\",\r\n      page: 1,\r\n      limit: 20,\r\n      loading: false,\r\n      total: 1,\r\n      isModal: false,\r\n      currentItem: {},\r\n      signatureModal: false,\r\n      loaderButton: false,\r\n      isModalKeys: false,\r\n      agreementCount: 0,\r\n      signatureCount: 0,\r\n      reviewCount: 0,\r\n      loaderReceiver: false,\r\n      infoData: {},\r\n      visaInfoById: {},\r\n      rejectedLoader: false,\r\n      isRejectedModal: false,\r\n      isForReviewModal: false,\r\n      viewModal: false,\r\n      filesList: [],\r\n      projectFilesList: [],\r\n      viewModalBeforeSigned: false,\r\n      loaderPdf: false,\r\n      ilovaUploadPath: null,\r\n      viewIlovaModal: false,\r\n      base64: null,\r\n      editModal: false,\r\n      loader: false,\r\n      contextText: \"\",\r\n      icon: {\r\n        pdf: require('@/assets/pdf.png'),\r\n      },\r\n      sendLetterToChairman: {\r\n        modal: false,\r\n        comment: \"\",\r\n        loader: false,\r\n      }\r\n    };\r\n  },\r\n  async created() {\r\n    await this.getList();\r\n    await this.getIncomeTotalCount();\r\n  },\r\n  computed: {\r\n    params() {\r\n      return {\r\n        params: {\r\n          itemsPerPage: this.limit,\r\n          page: this.page - 1,\r\n        },\r\n        search: this.searchValue,\r\n      };\r\n    },\r\n    computedMakeSignedCompromiseDecisionToReject() {\r\n      return this.selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n          && this.selectedTrItem.applicationTypeInProject !== 'NOT_BELONG'\r\n          && ['SENT_FOR_REJECT', 'REJECTED', 'TO_INVOKE_SIGNED', 'TO_SIGN_FINISH_LETTER',\r\n            'FINISH_LETTER_SIGN_AND_SEND', 'SEND_SIGN_TO_RETURN', 'SEND_SIGN'].indexOf(this.selectedTrItem.status) === -1\r\n          && this.selectedTrItem.isForCommission && !this.selectedTrItem.isHeadOfDepartment;\r\n    },\r\n    computedMakeSignedCompromiseDecisionToAccept() {\r\n      return this.selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n          && this.selectedTrItem.applicationTypeInProject !== 'NOT_BELONG'\r\n          && ['REJECTED'].indexOf(this.selectedTrItem.status) === -1\r\n          && this.selectedTrItem.isForCommission && !this.selectedTrItem.isHeadOfDepartment;\r\n    },\r\n    signItemButtonLabel() {\r\n      if (this.selectedTrItem.action === \"SIGNATURE\") {\r\n        if (this.selectedTrItem.status === 'SEND_SIGN') {\r\n          return this.$t(\"submodules.commission.doc_status.send_for_commission\")\r\n        }\r\n        return this.$t(\"submodules.reports.make_sign\")\r\n      } else if (this.selectedTrItem.action === 'REVIEW') {\r\n        if (this.selectedTrItem.isForCommission && !this.selectedTrItem.isHeadOfDepartment) {\r\n          return this.$t(\"submodules.commission.doc_status.for_begin_commission\")\r\n        }\r\n        if (this.selectedTrItem.status === 'SEND_SEEN_CLOSED' && [\"FOR_RESUME_WORK\", \"FOR_DELAY_WORK\", \"FOR_SUSPEND_WORK\"].includes(this.selectedTrItem.returnType)) {\r\n          return this.$t('submodules.commission.doc_status.allow_project_reopening')\r\n        }\r\n        switch (this.selectedTrItem.status) {\r\n          case 'SENT_FOR_REJECT':\r\n            if (!this.selectedTrItem.isRejectLetterCreated) {\r\n              return this.$t(\"submodules.commission.doc_button.create_letter\")\r\n            }\r\n            break;\r\n          case 'REJECTED':\r\n              return this.$t(\"submodules.commission.doc_status.confirmation_that_letter_has_reached\")\r\n          case 'FINISH_LETTER_SIGN_AND_SEND':\r\n              return this.$t(\"submodules.commission.doc_status.confirmation_that_work_finished\")\r\n          default:\r\n            return this.$t(\"confirm\")\r\n        }\r\n      } else if (this.selectedTrItem.action === 'AGREEMENT') {\r\n        return this.$t(\"submodules.reports.make_agreement\")\r\n      }\r\n      return \"\"\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    showRejectedByRaisModal(item) {\r\n      this.currentItem = item;\r\n      this.isRejectedSeeModal = true;\r\n    },\r\n    rejectSeeConfirm() {\r\n      cnfDoc(this.$t(\"messages.reject_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureSeeModal = true;\r\n        }\r\n      });\r\n    },\r\n    async signSuccessSee(data) {\r\n      let payload = {\r\n        signedContent: data.content,\r\n        inn: data.inn,\r\n        pnfl: data.pnfl\r\n      }\r\n      switch (this.selectedTrItem.action) {\r\n        case 'REVIEW':\r\n          switch (this.selectedTrItem.status) {\r\n            case 'SEND_SEEN_CLOSED':\r\n              await Service.letterCancelled(payload, this.selectedTrItem.letterId, this.selectedTrItem.id, this.reasonRejectedSee)\r\n                  .then(async () => {\r\n                    this.isRejectedSeeModal = false;\r\n                    this.signatureSeeModal = false;\r\n                    this.getProjects();\r\n                    this.getTotalCount();\r\n                  })\r\n                  .catch((err) => {\r\n                    // this.catchErr(err);\r\n                  });\r\n              break;\r\n          }\r\n          break;\r\n        default:\r\n          await Service.onlyDocSignForRRejectedByRais(payload, this.selectedTrItem.letterId, this.selectedTrItem.id, this.reasonRejectedSee)\r\n              .then(async () => {\r\n                this.isRejectedSeeModal = false;\r\n                this.signatureSeeModal = false;\r\n                let tempData = Object.assign({}, this.selectedTrItem);\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                this.getList();\r\n                this.getTotalCount();\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              });\r\n          break;\r\n      }\r\n    },\r\n    openSignatureModalForCommission() {\r\n      if (this.commissionTypeId) {\r\n        if (this.selectedTrItem.action === 'REVIEW'\r\n            && this.selectedTrItem.applicationTypeInProject === 'INNER'\r\n            && (this.selectedTrItem.status === 'SENT_TO_MANAGEMENT')\r\n            && this.selectedTrItem.projectType === 'BEFORE_COMMISSION') {\r\n          if (!this.commissionCompletionDate) {\r\n            return this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n          }\r\n          Service.makeReviewForCommissionManagement(this.selectedTrItem.id, this.commissionTypeId, this.commissionComment, this.commissionCompletionDate)\r\n              .then(async () => {\r\n                await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                this.getProjects();\r\n                this.getTotalCount();\r\n                this.signatureModal = false;\r\n                this.commissionsModal = false;\r\n              })\r\n              .catch((err) => {\r\n                // this.catchErr(err);\r\n              })\r\n              .finally(() => {\r\n                this.signatureModal = false;\r\n                this.commissionsModal = false;\r\n              });\r\n        } else {\r\n          this.signatureModal = true\r\n        }\r\n      } else {\r\n        this.$toast(this.$t('messages.fill_required_fields'), {type: 'error'});\r\n      }\r\n    },\r\n    customLabelCommissionTypes(opt) {\r\n      let selected = this.commissionTypes.find(e => e.id == opt);\r\n      if (selected) {\r\n        return `${this.getName({\r\n          nameRu: selected.nameRu,\r\n          nameLt: selected.nameLt,\r\n          nameUz: selected.nameUz,\r\n        })\r\n        }`\r\n      }\r\n      return ``;\r\n    },\r\n    changeText(text) {\r\n      this.contextText = text;\r\n    },\r\n    okModal() {\r\n      let text = this.$refs.editorRef.text;\r\n      this.$refs.editModalRef.loading(true);\r\n      Service.saveLetterBody(this.selectedTrItem.letterId, text)\r\n          .then(() => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            this.successEdited();\r\n            this.getList(true, tempData.id);\r\n            this.editModal = false;\r\n            /* setTimeout(() => {\r\n              let newdata = this.list.find((e) => e.id == tempData.id);\r\n              this.selectedTrItem = newdata;\r\n              this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }, 500); */\r\n          })\r\n          .catch((e) => {\r\n          })\r\n          .finally(() => {\r\n            this.$refs.editModalRef.loading(false);\r\n          });\r\n    },\r\n    viewModalClick() {\r\n      this.$refs.editModalRef.loadingPdf(true);\r\n      this.viewModalBeforeSigned = true;\r\n      this.loaderPdf = true;\r\n      this.base64 = null;\r\n\r\n      Service.convert(this.contextText)\r\n          .then((res) => {\r\n            setTimeout(() => {\r\n              this.base64 = res.data;\r\n            }, 400);\r\n          })\r\n          .finally(() => {\r\n            this.loaderPdf = false;\r\n            this.$refs.editModalRef.loadingPdf(false);\r\n          });\r\n    },\r\n    editLetter(item) {\r\n      /* this.editModal = true;\r\n      setTimeout(() => {\r\n        Service.getBody(item.letterId).then((res) => {\r\n          let editor = this.$refs.editorRef;\r\n          if (editor) {\r\n            if (!this._empty(res.data)) {\r\n              editor.setTextContent(res.data);\r\n            }\r\n          }\r\n        });\r\n      }, 400); */\r\n\r\n    },\r\n    viewProject(selectedLetter) {\r\n      /* this.$router.push({\r\n          name: selectedLetter.projectType === 'COMMISSION' ? 'CommissionProjects' : 'ProjectsMain',\r\n          query: { page: \"overview\", id: selectedLetter.projectId },\r\n      }); */\r\n      let routeData = this.$router.resolve({\r\n        name: selectedLetter.projectType === 'COMMISSION' ? 'CommissionProjects' : 'ProjectsMain',\r\n        query: {page: \"overview\", id: selectedLetter.projectId},\r\n      });\r\n      window.open(routeData.href, '_blank');\r\n    },\r\n    viewIlova(item) {\r\n      const ext = this.getExt(item.uploadPath ? item.uploadPath : item.url)\r\n      if (ext === \"pdf\") {\r\n        this.ilovaUploadPath = item.uploadPath ? item.uploadPath : item.url;\r\n        this.viewIlovaModal = true;\r\n      } else {\r\n        this.convertToPdf(item).then((uploadPath) => {\r\n          if (uploadPath) {\r\n            this.ilovaUploadPath = uploadPath;\r\n            this.viewIlovaModal = true;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    openOnlyOffice(letterId) {\r\n      let routeData = this.$router.resolve({\r\n        name: \"Office-DOCUMENT-commission\",\r\n        query: {id: letterId, page: \"GET\"},\r\n      });\r\n      window.open(routeData.href, \"_blank\");\r\n    },\r\n    viewIlovaProject(uploadPath) {\r\n      if (this.getExt(uploadPath) === \"pdf\") {\r\n        this.ilovaUploadPath = uploadPath;\r\n        this.viewIlovaModal = true;\r\n      }\r\n    },\r\n    convertToPdf(selectedItem, forSign = false) {\r\n      return new Promise((res, rej) => {\r\n        let config = {\r\n          url: `${selectedItem.url}`,\r\n          outputtype: \".pdf\",\r\n          forSign: forSign,\r\n          key: selectedItem.key,\r\n        };\r\n        Service.convertToPdfByApi(config)\r\n            .then((rs) => {\r\n              if (rs.data.uploadPath) {\r\n                this.$nextTick(() => {\r\n                  this.src = `${this.baseUrl}/${rs.data.uploadPath}`;\r\n                });\r\n                res(rs.data.uploadPath);\r\n              } else {\r\n                res(false);\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              // this.catchErr(e);\r\n              rej(e);\r\n            });\r\n      });\r\n    },\r\n    getByIdLetter() {\r\n      Service.getByIdLetter(this.selectedTrItem.letterId)\r\n          .then((rs) => {\r\n            this.currentDoc = rs.data;\r\n            this.loaderPdf = true;\r\n            this.convertToPdf(rs.data).then((uploadPath) => {\r\n              if (!uploadPath) {\r\n                setTimeout(() => {\r\n                  this.convertToPdf(rs.data)\r\n                      .then(() => {\r\n                        this.loaderPdf = false;\r\n                      })\r\n                      .catch((e) => {\r\n                        this.loaderPdf = false;\r\n                      });\r\n                }, 4000);\r\n              } else {\r\n                this.loaderPdf = false;\r\n              }\r\n            });\r\n          })\r\n          .catch((e) => {\r\n          });\r\n    },\r\n    viewLetter() {\r\n      this.viewModalBeforeSigned = true;\r\n      this.loaderPdf = true;\r\n      this.base64 = null;\r\n      Service.viewPdfByLetterId(this.selectedTrItem.letterId)\r\n          .then((res) => {\r\n            setTimeout(() => {\r\n              this.base64 = res.data;\r\n            }, 300);\r\n          })\r\n          .finally(() => {\r\n            this.loaderPdf = false;\r\n          });\r\n    },\r\n    viewDocBeforeSigned() {\r\n      // this.viewModalBeforeSigned = true;\r\n      // this.getByIdLetter();\r\n      this.viewLetter();\r\n    },\r\n    setCurrentPage(page) {\r\n      this.currentPage = page;\r\n    },\r\n    getAttachedFilesById(id) {\r\n      Service.getAttachedFilesById(id).then((res) => {\r\n        this.filesList = res.data;\r\n      });\r\n    },\r\n    getProjectLettersByLetterId(data) {\r\n      Service.projectLettersByLetterId(data.letterId).then((res) => {\r\n        this.projectFilesList = res.data;\r\n      });\r\n    },\r\n    saveRejected(payload) {\r\n      this.convertToPdf(this.selectedTrItem).then(r1 => {\r\n        this.rejectedLoader = true;\r\n        Service.saveRejected(\r\n            this.selectedTrItem.letterId,\r\n            this.selectedTrItem.id,\r\n            this.reasonRejected,\r\n            payload\r\n        )\r\n            .then(async () => {\r\n              this.isRejectedModal = false;\r\n              let tempData = Object.assign({}, this.selectedTrItem);\r\n              await this.successSaved();\r\n              await this.getList(true, tempData.id);\r\n              await this.getIncomeTotalCount();\r\n              /* setTimeout(() => {\r\n                let newdata = this.list.find((e) => e.id == tempData.id);\r\n                this.selectedTrItem = newdata;\r\n                this.$forceUpdate();\r\n                this.getReceivers(this.selectedTrItem);\r\n              }, 500); */\r\n            })\r\n            .finally(() => {\r\n              this.rejectedLoader = false;\r\n            });\r\n      })\r\n    },\r\n    handleToReject() {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          this.$router.push(`/letter/to-reject/${this.selectedTrItem.id}/${this.selectedTrItem.letterId}`);\r\n        }\r\n      });\r\n    },\r\n    showRejectedModal() {\r\n      switch (this.selectedTrItem.action) {\r\n        case 'SIGNATURE':\r\n          switch (this.selectedTrItem.status) {\r\n            case 'SEND_FOR_COMMISSION':\r\n              this.handleToReject();\r\n              break;\r\n            case 'SEND_SIGN':\r\n              this.isForReviewModal = true;\r\n              break;\r\n            default:\r\n              this.isRejectedModal = true;\r\n              break;\r\n          }\r\n          break;\r\n        case 'REVIEW':\r\n          if (this.computedMakeSignedCompromiseDecisionToReject) {\r\n            this.handleMakeSignedCompromiseDecisionToReject();\r\n          } else {\r\n            switch (this.selectedTrItem.status) {\r\n              case 'SEND_SEEN_CLOSED':\r\n                this.handleLetterCancelled(this.selectedTrItem);\r\n                break;\r\n              default:\r\n                this.isRejectedModal = true;\r\n                break;\r\n            }\r\n          }\r\n          break;\r\n        default:\r\n          this.isRejectedModal = true;\r\n          break;\r\n      }\r\n    },\r\n    async handleMakeSignedCompromiseDecisionToReject() {\r\n      await this.$router.push(`/letter/income/${this.selectedTrItem.letterId}/${this.selectedTrItem.id}?type=compromise-decision-to-reject`);\r\n    },\r\n    async handleMakeSignedCompromiseDecisionToAccept() {\r\n      await this.$router.push(`/letter/income/${this.selectedTrItem.letterId}/${this.selectedTrItem.id}?type=compromise-decision-to-accept`);\r\n    },\r\n    viewDocSigned() {\r\n      this.viewModal = true;\r\n    },\r\n    getIncomeTotalCount() {\r\n      Service.getIncomeTotalCount().then((rs) => {\r\n        this.agreementCount = rs.data.agreement;\r\n        this.reviewCount = rs.data.review;\r\n        this.signatureCount = rs.data.signature;\r\n      });\r\n    },\r\n    async signSuccess(data) {\r\n      let payload = {\r\n        signedContent: data.content,\r\n        inn: data.inn,\r\n        pnfl: data.pnfl\r\n      };\r\n      if (this.isRejectedModal) {\r\n        this.isModalKeys = false;\r\n        this.signatureModal = false;\r\n        this.saveRejected(payload)\r\n      } else {\r\n        switch (this.selectedTrItem.status) {\r\n          case 'COMMISSION_SEND':\r\n            Service.onlyDocSign(payload, this.selectedTrItem.id)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                });\r\n            break;\r\n          case 'NOT_BELONG':\r\n            await Service.onlyDocSign(payload, this.selectedTrItem.id)\r\n                .then(async () => {\r\n                  await Service.onlyDocSignNotBelong(payload, this.selectedTrItem.id)\r\n                      .then(async () => {\r\n\r\n\r\n                      })\r\n                      .catch((err) => {\r\n                        this.catchErr(err);\r\n                      });\r\n\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                });\r\n            break;\r\n          case 'SEND_SIGN_TO_RETURN':\r\n            Service.signDoc(payload, this.selectedTrItem.id, this.commissionTypeId, this.commissionComment)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  this.commissionsModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                });\r\n            break;\r\n          case 'SEND_SIGN':\r\n            Service.letterCancelled(payload, this.selectedTrItem.letterId, this.selectedTrItem.id, this.reasonForReview)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  this.isForReviewModal = false;\r\n                  this.reasonForReview = '';\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                })\r\n                .catch((err) => {\r\n                });\r\n            break;\r\n          default:\r\n            Service.signDoc(payload, this.selectedTrItem.id, this.commissionTypeId, this.commissionComment)\r\n                .then(async () => {\r\n                  this.isModalKeys = false;\r\n                  this.signatureModal = false;\r\n                  this.commissionsModal = false;\r\n                  let tempData = Object.assign({}, this.selectedTrItem);\r\n                  await showMsgSuccess(this.$t(\"successDocSigned\"));\r\n                  await this.getList(true, tempData.id);\r\n                  await this.getIncomeTotalCount();\r\n                  /* setTimeout(() => {\r\n                    let newdata = this.list.find((e) => e.id == tempData.id);\r\n                    this.selectedTrItem = Object.assign({}, newdata);\r\n                    this.$forceUpdate();\r\n                    this.getReceivers(this.selectedTrItem);\r\n                  }, 1000); */\r\n                })\r\n                .catch((err) => {\r\n                  // this.catchErr(err);\r\n                });\r\n            break;\r\n        }\r\n      }\r\n    },\r\n    getReceivers(item) {\r\n      this.loaderReceiver = true;\r\n      Service.getReceivers(item.letterId)\r\n          .then((rs) => {\r\n            this.infoData = rs.data;\r\n          })\r\n          .finally(() => {\r\n            this.loaderReceiver = false;\r\n          });\r\n    },\r\n    async getVisaInfoById() {\r\n      await helperService.getVisaAllInfoById(this.selectedTrItem.applicationIdFromDXA, false)\r\n          .then(res => {\r\n            this.visaInfoById = res.data\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          }).finally(() => {\r\n          })\r\n    },\r\n    async clickTrItem(item) {\r\n      if (this.selectedTrItem.id === item.id) {\r\n        this.selectedTrItem = {};\r\n        this.infoData = {};\r\n      } else {\r\n        this.selectedTrItem = item;\r\n        await this.getAttachedFilesById(item.letterId);\r\n        await this.getReceivers(item);\r\n        if (['FROM_DXA', 'NOT_BELONG'].includes(item.applicationTypeInProject)) {\r\n          await this.getVisaInfoById();\r\n          await this.getProjectLettersByLetterId(item);\r\n        } else {\r\n          this.visaInfoById = {}\r\n          this.projectFilesList = []\r\n        }\r\n        if (item.isRejectLetterCreated) {\r\n          Service.getRejectLetter(item.letterId).then(res => {\r\n            this.rejectedLetter = res.data;\r\n          }).catch(e => {\r\n            console.log(e)\r\n          })\r\n        } else {\r\n          this.rejectedLetter = null;\r\n          this.fileUploadPath = null;\r\n        }\r\n      }\r\n    },\r\n    signatureItem() {\r\n      this.isModalKeys = true;\r\n    },\r\n    selectSendType(v) {\r\n      this.selectedTrItem = {};\r\n      this.infoData = {};\r\n      if (this.active == v) {\r\n        this.active = \"\";\r\n      } else {\r\n        this.active = v;\r\n      }\r\n      this.getList();\r\n    },\r\n    makeAgree(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeAgree(item.letterId).then(async () => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            await this.getIncomeTotalCount();\r\n            // setTimeout(() => {\r\n            //   let newdata = this.list.find((e) => e.id == tempData.id);\r\n            //   this.selectedTrItem = Object.assign({}, newdata);\r\n            //   this.$forceUpdate();\r\n            //   this.getReceivers(this.selectedTrItem);\r\n            // }, 500);\r\n          });\r\n        }\r\n      });\r\n    },\r\n    fetchCommissionTypes(callback = () => ({})) {\r\n      Service.searchList('directory/commission/commission-type', this.var_default_search_payload, null, true)\r\n          .then(res => {\r\n            this.commissionTypes = res.data.list\r\n            callback();\r\n          })\r\n          .catch(e => {\r\n            console.log(e)\r\n          })\r\n    },\r\n    makeReviewForCommission(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeReviewForCommission(item.id, item.comment).then(async () => {\r\n            await this.successSaved();\r\n            await this.$router.push(\"/projects/commission\");\r\n          });\r\n        }\r\n      });\r\n    },\r\n    letterMakeViewed(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeCompromiseDecisionViewed(item.id).then(() => {\r\n            this.forceRouteReload()\r\n          });\r\n        }\r\n      });\r\n    },\r\n    letterRejectViewed(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeViewedLetterToReject(item.id).then(() => {\r\n            this.forceRouteReload()\r\n          });\r\n        }\r\n      });\r\n    },\r\n    makeReviewForCommissionWithComment(item) {\r\n      if (this.commissionTypes.length === 0) {\r\n        return this.fetchCommissionTypes(() => {\r\n          this.commissionsModal = true;\r\n        });\r\n      }\r\n      this.commissionsModal = true;\r\n    },\r\n    makeReview(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeReview(item.letterId).then(async () => {\r\n            // let tempData = this.selectedTrItem;\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            await this.getIncomeTotalCount();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    makeReviewLetter(item) {\r\n      this.cnf().then((rs) => {\r\n        if (rs.value) {\r\n          Service.makeAgreedLetter(item.id).then(async () => {\r\n            let tempData = Object.assign({}, this.selectedTrItem);\r\n            await this.successSaved();\r\n            await this.getList(true, tempData.id);\r\n            await this.getIncomeTotalCount();\r\n          });\r\n        }\r\n      });\r\n    },\r\n    rejectConfirm() {\r\n      cnfDoc(this.$t(\"messages.reject_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureModal = true;\r\n        }\r\n      });\r\n    },\r\n    forReview() {\r\n      cnfDoc(this.$t(\"messages.you_sure_title\")).then((rs) => {\r\n        if (rs.value) {\r\n          this.signatureModal = true;\r\n        }\r\n      });\r\n    },\r\n    viewFile(uploadPath) {\r\n      if (this.getExt(uploadPath) === \"pdf\") {\r\n        this.fileUploadPath = uploadPath;\r\n        this.viewFileModal = true;\r\n      }\r\n    },\r\n    signItemToManagement(item) {\r\n      this.$router.push(\r\n          `/letter/income/to-management/${item.letterId}/${item.id}`\r\n      );\r\n    },\r\n    handleSendLetterToChairman() {\r\n      this.cnf().then(({value}) => {\r\n        if (value) {\r\n          this.sendLetterToChairman.loader = true\r\n          Service.handleSendLetterToChairman(this.rejectedLetter.id, this.sendLetterToChairman.comment).then(() => {\r\n            this.getList();\r\n            this.sendLetterToChairman.loader = false\r\n            this.sendLetterToChairman.modal = false\r\n          })\r\n              .finally(() => {\r\n                this.sendLetterToChairman.loader = false\r\n                this.sendLetterToChairman.modal = false\r\n              })\r\n        }\r\n      });\r\n    },\r\n    handleLetterCancelled(item) {\r\n      this.isRejectedSeeModal = true;\r\n    },\r\n\r\n    async signAcceptedItem(item) {\r\n      if (item.applicationTypeInProject === 'FROM_DXA' && item.status === 'SEND_SIGN'\r\n          && item.action === 'SIGNATURE') {\r\n        await Service.setLetterRejtOrAccept(item.letterId, false).then((rs) => {\r\n          this.$router.push(\r\n              `/letter/income/${item.letterId}/${item.id}`\r\n          );\r\n        });\r\n      }\r\n    },\r\n\r\n    async signRejectedItem(item) {\r\n      if (item.applicationTypeInProject === 'FROM_DXA' && item.status === 'SEND_SIGN'\r\n          && item.action === 'SIGNATURE') {\r\n        await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n          this.$router.push(\r\n              `/letter/income/${item.letterId}/${item.id}`\r\n          );\r\n        });\r\n      }\r\n    },\r\n    async signItem(item) {\r\n      switch (item.action) {\r\n        case 'SIGNATURE':\r\n          this.currentItem = item;\r\n          if (item.applicationTypeInProject === 'FROM_DXA') {\r\n            switch (item.status) {\r\n              case 'SEND_SIGN':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'COMMISSION_SEND':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              default:\r\n                cnfDoc(this.$t(\"docConfirm\")).then((rs) => {\r\n                  if (rs.value) {\r\n                    this.signatureModal = true;\r\n                  }\r\n                });\r\n                break;\r\n            }\r\n          } else if (item.applicationTypeInProject === 'NOT_BELONG') {\r\n            if (item.fileType !== 'pdf') {\r\n              await this.convertToPdf(item).then(async r => {\r\n                if (!r.uploadPath) {\r\n                  this.$toast(this.$t('messages.project_files_convert_pdf_error'), {type: 'error'})\r\n                } else if (!r.uploadPath.endsWith('.pdf')) {\r\n                  this.$toast(this.$t('messages.project_files_convert_pdf_error'), {type: 'error'})\r\n                }\r\n              })\r\n                  .catch(e => console.log(e))\r\n            }\r\n          } else {\r\n            switch (item.status) {\r\n              case 'SEND_SIGN':\r\n                this.$router.push(`/letter/income/${item.letterId}/${item.id}`);\r\n                break;\r\n              case 'FOR_REGION':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'FOR_NOT_BELONG':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'COMMISSION_SEND':\r\n                this.$router.push(`/letter/income/${item.letterId}/${item.id}`);\r\n                break;\r\n              case 'SEND_SIGN_FINISH':\r\n                await this.$router.push(`/letter/make-signed-to-closed/${item.id}/${item.letterId}`);\r\n                break;\r\n              case 'FOR_NOT_COMPLETED':\r\n                await Service.setLetterRejtOrAccept(item.letterId, true).then((rs) => {\r\n                  this.$router.push(\r\n                      `/letter/income/${item.letterId}/${item.id}`\r\n                  );\r\n                });\r\n                break;\r\n              case 'SEND_FOR_COMMISSION':\r\n                await this.$router.push(`/letter/before-commission/${item.id}/${item.letterId}`);\r\n                break;\r\n              case 'SEND_SIGN_TO_RETURN':\r\n                await this.$router.push(`/letter/income/${item.letterId}/${item.id}`);\r\n                break;\r\n              case 'TO_SIGN_REJECT_LETTER':\r\n                await this.$router.push(`/letter/to-reject/${item.id}/${item.letterId}`);\r\n                break;\r\n              case 'TO_SIGN_FINISH_LETTER':\r\n                await this.$router.push(`/letter/before-commission/${item.id}/${item.letterId}`);\r\n                break;\r\n              default:\r\n                await cnfDoc(this.$t(\"docConfirm\")).then((rs) => {\r\n                  if (rs.value) {\r\n                    this.signatureModal = true;\r\n                  }\r\n                });\r\n                break;\r\n            }\r\n          }\r\n          break;\r\n        case 'AGREEMENT':\r\n          this.currentItem = item;\r\n          switch (item.status) {\r\n            default:\r\n              this.makeAgree(item);\r\n              break;\r\n          }\r\n          break;\r\n        case 'REVIEW':\r\n          this.currentItem = item;\r\n          if (this.computedMakeSignedCompromiseDecisionToAccept) {\r\n            await this.handleMakeSignedCompromiseDecisionToAccept();\r\n          } else {\r\n            if (!this.currentItem.isForCommission && this.currentItem.isHeadOfDepartment) {\r\n              this.letterMakeViewed(item)\r\n            } else\r\n              switch (item.status) {\r\n                case 'SEND_FOR_COMMISSION':\r\n                  this.makeReviewForCommission(item);\r\n                  break;\r\n                case 'SENT_TO_MANAGEMENT':\r\n                  this.makeReviewForCommissionWithComment(item);\r\n                  break;\r\n                case 'SENT_FOR_REJECT':\r\n                  // Xat yaratish tugmasida shu joyga kelayapti.\r\n                  this.uploadRejectLetter(item);\r\n                  break;\r\n                case 'TO_INVOKE_SIGNED':\r\n                  this.makeReviewLetter(item);\r\n                  break;\r\n                case 'SEND_SEEN_CLOSED':\r\n                  await this.cnf().then((rs) => {\r\n                    if (rs.value) {\r\n                      if ([\"FOR_RESUME_WORK\", \"FOR_DELAY_WORK\", \"FOR_SUSPEND_WORK\"].includes(this.selectedTrItem.returnType)) {\r\n                        Service.letterAcceptForReopen(item.letterId).then(async () => {\r\n                          let tempData = Object.assign({}, this.selectedTrItem);\r\n                          await this.successSaved();\r\n                          await this.getList(true, tempData.id);\r\n                          await this.getIncomeTotalCount();\r\n                        });\r\n                      } else {\r\n                        Service.makeAgreedLetterToClosed(item.id).then(async () => {\r\n                          let tempData = Object.assign({}, this.selectedTrItem);\r\n                          await this.successSaved();\r\n                          await this.getList(true, tempData.id);\r\n                          await this.getIncomeTotalCount();\r\n                        });\r\n                      }\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'FINISH_LETTER_SIGN_AND_SEND':\r\n                  await this.cnf().then((rs) => {\r\n                    if (rs.value) {\r\n                      Service.makeViewedLetterToFinish(item.id).then(async () => {\r\n                        let tempData = Object.assign({}, this.selectedTrItem);\r\n                        await this.successSaved();\r\n                        await this.getList(true, tempData.id);\r\n                        await this.getIncomeTotalCount();\r\n                      });\r\n                    }\r\n                  });\r\n                  break;\r\n                case 'REJECTED':\r\n                  this.letterRejectViewed(item)\r\n                  break;\r\n                default:\r\n                  this.makeReview(item);\r\n                  break;\r\n              }\r\n          }\r\n          break;\r\n      }\r\n    },\r\n    save() {\r\n      if (!this.$refs.addRef.checkValidity()) {\r\n        Service.upload(this.$refs.addRef.form).then((rs) => {\r\n          if (rs.data) {\r\n            this.getList();\r\n            let routeData = this.$router.resolve({\r\n              name: \"Office-DOCUMENT-commission\",\r\n              query: {page: \"GET\", id: rs.data.id},\r\n            });\r\n            window.open(routeData.href, \"_blank\");\r\n            this.isModal = false;\r\n          }\r\n        });\r\n      } else {\r\n        this.enterInfo();\r\n      }\r\n    },\r\n    add() {\r\n      this.isModal = true;\r\n    },\r\n    getList(reset = false, resetId) {\r\n      this.loading = true;\r\n      Service.getListLetterIncome(this.params, this.active)\r\n          .then(({data}) => {\r\n            this.list = data.list;\r\n            this.total = data.total;\r\n            if (reset) {\r\n              let newdata = this.list.find((e) => e.id === resetId);\r\n              this.selectedTrItem = Object.assign({}, newdata);\r\n              // this.$forceUpdate();\r\n              this.getReceivers(this.selectedTrItem);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            // this.catchErr(err);\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n    uploadRejectLetter(item) {\r\n      this.cnf().then(({value}) => {\r\n        if (value) {\r\n          Service.uploadRejectLetter(item.id, 'LETTER_REJECT', \"Rad etish xati\").then((rs) => {\r\n            let routeData = this.$router.resolve({\r\n              name: \"Office-DOCUMENT-commission\",\r\n              query: {id: rs.data.id, page: \"GET\"},\r\n            });\r\n            this.getList();\r\n            this.getIncomeTotalCount();\r\n            window.open(routeData.href, \"_blank\");\r\n          });\r\n        }\r\n      });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"col-md-12 text-center\">\r\n      <div class=\"h4 mb-4 d-inline-block\">{{ $t('submodules.reports.report_income') }}</div>\r\n    </div>\r\n    <b-modal v-model=\"isRejectedSeeModal\" :title=\"$t('submodules.reports.reasonRejected')\" scrollable size=\"md\">\r\n      <b-form-textarea v-model=\"reasonRejectedSee\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"danger\" @click=\"rejectSeeConfirm\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"rejectedSeeLoader\" rounded=\"sm\">\r\n            {{ $t(\"submodules.reports.rejected\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal v-model=\"signatureSeeModal\" :title=\"$t('submodules.reports.make_sign')\" hide-footer scrollable size=\"lg\">\r\n      <SignKeys :dataToSign=\"selectedTrItem\" @sign=\"signSuccessSee\"/>\r\n    </b-modal>\r\n    <Modal\r\n        ref=\"editModalRef\"\r\n        :cancelText=\"'actions.cancel'\"\r\n        :okText=\"'actions.save'\"\r\n        :scroll=\"true\"\r\n        :signerHide=\"false\"\r\n        :size=\"'xl'\"\r\n        :title=\"selectedTrItem.fileName\"\r\n        :value=\"editModal\"\r\n        :variantOk=\"'success'\"\r\n        @closeModal=\"editModal = false\"\r\n        @okModal=\"okModal\"\r\n        @viewModalClick=\"viewModalClick\"\r\n    >\r\n      <template v-slot:body>\r\n        <div>\r\n          <Editor ref=\"editorRef\" @changeText=\"changeText\"/>\r\n        </div>\r\n      </template>\r\n    </Modal>\r\n    <b-modal v-model=\"viewIlovaModal\" :title=\"$t('actions.view')\" scrollable size=\"xl\">\r\n      <div v-if=\"ilovaUploadPath\" style=\"height: 700px\">\r\n        <embed\r\n            :src=\"`${baseUrl}/${ilovaUploadPath}`\"\r\n            height=\"800\"\r\n            type=\"application/pdf\"\r\n            width=\"100%\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewIlovaModal = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal\r\n        v-model=\"signatureModal\"\r\n        :title=\"`${$t('submodules.reports.make_sign')}`\"\r\n        hide-footer\r\n        scrollable\r\n        size=\"lg\"\r\n    >\r\n      <SignKeys :dataToSign=\"selectedTrItem\" @sign=\"signSuccess\"/>\r\n    </b-modal>\r\n\r\n    <!-- for view document -->\r\n    <b-modal\r\n        v-model=\"viewModal\"\r\n        :title=\"selectedTrItem.id ? selectedTrItem.fileName : ''\"\r\n        scrollable\r\n        size=\"xl\"\r\n    >\r\n      <div v-if=\"selectedTrItem.url\" style=\"height: 700px\">\r\n        <embed\r\n            :src=\"`${baseUrl}/${selectedTrItem.url}`\"\r\n            height=\"800\"\r\n            type=\"application/pdf\"\r\n            width=\"100%\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewModal = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <!-- modal view before modal -->\r\n    <b-modal\r\n        v-model=\"viewModalBeforeSigned\"\r\n        :title=\"selectedTrItem.id ? selectedTrItem.fileName : ''\"\r\n        body-bg-variant=\"light\"\r\n        scrollable\r\n        size=\"xl\"\r\n    >\r\n      <b-overlay :opacity=\"1\" :show=\"loaderPdf\" rounded=\"lg\" variant=\"white\">\r\n        <div style=\"min-height: 700px\">\r\n          <embed\r\n              v-if=\"base64\"\r\n              :src=\"`data:application/pdf;base64, ${base64}`\"\r\n              :style=\"`min-height:${heightWindow-250}px`\"\r\n              style=\"width: 100%;\"\r\n          />\r\n        </div>\r\n      </b-overlay>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"secondary\" @click=\"viewModalBeforeSigned = false\">{{ $t(\"actions.close\") }}</b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <!-- COMMISSIONS MODAL -->\r\n    <b-modal\r\n        v-model=\"commissionsModal\"\r\n        :title=\"`${$t('submodules.commission.title')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <BaseMultiselectWithValidation\r\n          v-model=\"commissionTypeId\"\r\n          :custom-label=\"customLabelCommissionTypes\"\r\n          :label=\"$t('submodules.commission.special_commission_type.title')\"\r\n          :max-height=\"600\"\r\n          :options=\"commissionTypes.map(e => e.id)\"\r\n          :show-labels=\"false\"\r\n          class=\"required\"\r\n          label-on-top\r\n          open-direction=\"bottom\"\r\n          placeholder=\"\"\r\n          rules=\"required\"\r\n      ></BaseMultiselectWithValidation>\r\n\r\n      <BaseDatePickerWithValidation\r\n          v-model=\"commissionCompletionDate\"\r\n          :label=\"$t('date')\"\r\n          :placeholder=\"$t('date')\"\r\n          lang=\"ru\"\r\n          required\r\n      />\r\n      <b-form-textarea\r\n          v-model=\"commissionComment\"\r\n          :placeholder=\"$t('submodules.doc.summary')\"\r\n          class=\"mt-3\"\r\n          rows=\"5\"\r\n      ></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"success\" @click=\"openSignatureModalForCommission\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"commissionModalLoader\" rounded=\"sm\">\r\n            {{ $t(\"actions.continue\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n        v-model=\"isRejectedModal\"\r\n        :title=\"`${$t('submodules.reports.reasonRejected')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <b-form-textarea v-model=\"reasonRejected\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"danger\" @click=\"rejectConfirm\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"rejectedLoader\" rounded=\"sm\">\r\n            {{ $t(\"submodules.reports.rejected\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n        v-model=\"isForReviewModal\"\r\n        :title=\"`${$t('column.comment')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <b-form-textarea v-model=\"reasonForReview\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"warning\" @click=\"forReview\" :disabled=\"!reasonForReview\">\r\n          <b-overlay :opacity=\"0.1\" :show=\"rejectedLoader\" rounded=\"sm\">\r\n            {{ $t(\"submodules.commission.returnsee\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n        v-model=\"sendLetterToChairman.modal\"\r\n        :title=\"`${$t('submodules.commission.send_for_sign')}`\"\r\n        scrollable\r\n        size=\"md\"\r\n    >\r\n      <b-form-textarea v-model=\"sendLetterToChairman.comment\" rows=\"5\"></b-form-textarea>\r\n\r\n      <template v-slot:modal-footer>\r\n        <b-button variant=\"success\" @click=\"handleSendLetterToChairman\">\r\n          <b-overlay\r\n              :opacity=\"0.1\"\r\n              :show=\"sendLetterToChairman.loader\"\r\n              rounded=\"sm\"\r\n          >\r\n            {{ $t(\"submodules.commission.send_for_sign\") }}\r\n          </b-overlay>\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body p-2\">\r\n            <div class=\"row\">\r\n              <div class=\"col-sm-4\">\r\n                <div class=\"d-inline-block mt-1 ml-2\">\r\n                  <div class=\"search-box\">\r\n                    <div class=\"position-relative\">\r\n                      <input\r\n                          v-model=\"searchValue\"\r\n                          :placeholder=\"$t('actions.search')\"\r\n                          class=\"form-control rounded bg-light border-light\"\r\n                          style=\"width: 300px\"\r\n                          type=\"text\"\r\n                      />\r\n                      <i class=\"mdi mdi-magnify search-icon\"></i>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-sm-8\">\r\n                <div class=\"text-sm-right\">\r\n                  <div class=\"mr-3 float-right\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                      <div\r\n                          v-for=\"(dc, index) in sendTypeList\"\r\n                          :key=\"index + 'doc'\"\r\n                          :class=\"dc.value === active ? 'my-card-active' : ''\"\r\n                          class=\"card m-0 my-card-hovered_2 mr-3\"\r\n                          @click.prevent=\"selectSendType(dc.value)\"\r\n                      >\r\n                        <div class=\" card-body p-0 text-center d-flex align-items-center justify-content-center \">\r\n                          <div>\r\n                            <div class=\"d-flex align-items-center\">\r\n                              <img\r\n                                  :src=\"\r\n                                    dc.value === 'SIGNATURE'\r\n                                      ? require('@/assets/doc/2.png')\r\n                                      : dc.value === 'REVIEW'\r\n                                      ? require('@/assets/doc/3.png')\r\n                                      : require('@/assets/doc/4.png')\r\n                                  \"\r\n                                  alt=\"DOC\"\r\n                                  height=\"30\"\r\n                              />\r\n\r\n                              <div class=\"ml-2\">\r\n                                <p class=\"m-0\">\r\n                                  {{ dc.label }}\r\n                                </p>\r\n                              </div>\r\n                              <div class=\"ml-2\">\r\n                                <b-badge v-if=\" dc.value === 'AGREEMENT' && agreementCount > 0 \" variant=\"success\">\r\n                                  {{ agreementCount }}\r\n                                </b-badge>\r\n\r\n                                <b-badge v-if=\" dc.value === 'SIGNATURE' && signatureCount > 0 \" variant=\"success\">\r\n                                  {{ signatureCount }}\r\n                                </b-badge>\r\n\r\n                                <b-badge v-if=\" dc.value === 'REVIEW' && reviewCount > 0 \" variant=\"success\">\r\n                                  {{ reviewCount }}\r\n                                </b-badge>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-7\">\r\n            <div class=\"card card-body\">\r\n              <div class=\"table-responsive\">\r\n                <b-overlay :opacity=\"0.1\" :show=\"loading\" rounded=\"sm\">\r\n                  <table class=\"table table-centered table-striped table-nowrap table-hover\">\r\n                    <thead class=\"thead-light\">\r\n                    <tr>\r\n                      <th class=\"text-center\" scope=\"col\" style=\"width: 70px\"></th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"column.created_by\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"submodules.doc.founder\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"docDate\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"docName\") }}\r\n                      </th>\r\n                      <th class=\"text-center\" scope=\"col\">\r\n                        {{ $t(\"puropseOfSending\") }}\r\n                      </th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    <tr v-if=\"list.length === 0\" class=\"text-center\">\r\n                      <td :style=\"loading ? 'height:50px' : ''\" colspan=\"9\" style=\"vertical-align: middle\">\r\n                        <h5>\r\n                          {{ $t(\"messages.data_not_found\") }}\r\n                        </h5>\r\n                      </td>\r\n                    </tr>\r\n                    <tr\r\n                        v-for=\"(item, index) in list\"\r\n                        :key=\"index + 'CREATE_DOC'\"\r\n                        :class=\"\r\n                            selectedTrItem.id == item.id\r\n                              ? 'bg-soft-primary text-primary'\r\n                              : item.status === 'CANCELED' || item.cancelled\r\n                              ? 'bg-soft-danger text-danger'\r\n                              : item.isViewed ? 'bg-soft-success text-dark' : 'bg-white text-dark font-weight-bold'\r\n                          \"\r\n                        class=\"p_cursor\"\r\n                        @click.prevent=\"clickTrItem(item)\"\r\n                    >\r\n                      <td class=\"text-center\">\r\n                        <strong>\r\n                          {{ paginate(index, limit, page - 1) }}</strong>\r\n                      </td>\r\n                      <td class=\"text-left\">\r\n                        {{ item.ownerLastName ? item.ownerLastName : '' }}\r\n                        {{ item.ownerFirstName ? item.ownerFirstName : '' }}\r\n                        {{ item.ownerParentName ? item.ownerParentName : '' }}\r\n                      </td>\r\n                      <td class=\"text-left\">\r\n                        {{ item.senderLastName ? item.senderLastName : '' }}\r\n                        {{ item.senderFirstName ? item.senderFirstName : '' }}\r\n                        {{ item.senderParentName ? item.senderParentName : '' }}\r\n                      </td>\r\n                      <td :class=\"!item.isRead ? 'font-weight-bold' : ''\" class=\"text-center\">\r\n                        {{ item.date }}\r\n                      </td>\r\n                      <td :class=\"!item.isRead ? 'font-weight-bold' : ''\" class=\"text-center\">\r\n                        <p class=\"pre m-0\">{{ item.fileName }}</p>\r\n                      </td>\r\n                      <td\r\n                          :class=\"!item.isRead ? 'font-weight-bold' : ''\"\r\n                          class=\"text-center p-0\"\r\n                      >\r\n                        {{\r\n                          item.action === \"SIGNATURE\"\r\n                              ? $t(\"forSignature\")\r\n                              : item.action === \"AGREEMENT\"\r\n                                  ? $t(\"forAgreement\")\r\n                                  : item.action === \"REVIEW\"\r\n                                      ? $t(\"forReview\")\r\n                                      : \"\"\r\n                        }}\r\n                        <i\r\n                            v-if=\"item.action === 'SIGNATURE' && item.signed\"\r\n                            class=\"mdi mdi-check-all font-size-22 p-0 ml-2 text-success\"\r\n                        ></i>\r\n\r\n                        <i\r\n                            v-if=\"item.action === 'AGREEMENT' && item.isAgreed\"\r\n                            class=\"mdi mdi-handshake font-size-22 ml-2 text-success\"\r\n                        ></i>\r\n\r\n                        <i\r\n                            v-if=\"item.action === 'REVIEW' && item.isViewed\"\r\n                            class=\"mdi mdi-file-eye font-size-18 font-size-16 ml-2 text-success\"\r\n                        ></i>\r\n                      </td>\r\n                    </tr>\r\n                    </tbody>\r\n                  </table>\r\n                </b-overlay>\r\n              </div>\r\n              <div v-if=\"total > 0\" class=\"row\">\r\n                <div class=\"col-lg-12\">\r\n                  <b-pagination v-model=\"page\" :per-page=\"limit\" :total-rows=\"total\" class=\"m-0\" size=\"sm\"/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-5\">\r\n            <div class=\"card card-body\">\r\n<!--              <div>status: {{ selectedTrItem.status }}</div>-->\r\n<!--              <div>action: {{ selectedTrItem.action }}</div>-->\r\n<!--              <div>returnType: {{ selectedTrItem.returnType }}</div>-->\r\n<!--              <div>projectType: {{ selectedTrItem.projectType }}</div>-->\r\n<!--              <div>applicationTypeInProject: {{ selectedTrItem.applicationTypeInProject }}</div>-->\r\n              <table class=\"table m-0\">\r\n                <tbody>\r\n                <!-- Tugmalar -->\r\n                <tr v-if=\"selectedTrItem.id\">\r\n                  <td class=\"text-muted text-center p-0\" colspan=\"2\">\r\n                    <div class=\"p-4\">\r\n                      <div v-if=\"['SIGNED', 'CANCELED'].indexOf(selectedTrItem.status) === -1 ||\r\n                      selectedTrItem.status === 'SIGNED' &&selectedTrItem.action === 'REVIEW' && selectedTrItem.isHeadOfDepartment\">\r\n                        <b-button-group v-if=\"\r\n                                (selectedTrItem.action === 'SIGNATURE' &&\r\n                                  !selectedTrItem.signed) ||\r\n                                (selectedTrItem.action === 'AGREEMENT' &&\r\n                                  !selectedTrItem.isAgreed) ||\r\n                                (selectedTrItem.action === 'REVIEW' &&\r\n                                  !selectedTrItem.isViewed && !selectedTrItem.cancelled)\r\n                              \">\r\n                          <!-- DXA uchun project yaratish  -->\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status === 'SEND_FOR_COMMISSION'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t('actions.for_start_commission') }}\r\n                          </b-button>\r\n                          <!-- Boshqalar uchun tasdiqlash, korish, imzolash  -->\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA' && selectedTrItem.applicationTypeInProject !== 'NOT_BELONG'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ signItemButtonLabel }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject === 'NOT_BELONG'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t(\"submodules.reports.make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n                                 && selectedTrItem.status ==='SEND_FOR_COMMISSION'\r\n                                 && selectedTrItem.action === 'SIGNATURE'\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t(\"submodules.reports.make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status !=='SEND_FOR_COMMISSION' && selectedTrItem.action !== 'SIGNATURE')\"\r\n                              variant=\"success\"\r\n                              @click=\"signItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{\r\n                              selectedTrItem.action === \"REVIEW\"\r\n                                  ? $t(\"confirm\")\r\n                                  : selectedTrItem.action === \"AGREEMENT\"\r\n                                      ? $t(\"submodules.reports.make_agreement\")\r\n                                      : \"\"\r\n                            }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status ==='SEND_SIGN'\r\n                              && selectedTrItem.action ==='SIGNATURE')\"\r\n                              variant=\"success\"\r\n                              @click=\"signAcceptedItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-check\"></i><br>\r\n                            {{ $t(\"submodules.reports.doc_make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status ==='SEND_SIGN'\r\n                              && selectedTrItem.action ==='SIGNATURE') \"\r\n                              variant=\"danger\"\r\n                              @click=\"signRejectedItem(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.reports.doc_reject_make_sign\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n                                 && selectedTrItem.applicationTypeInProject !=='NOT_BELONG'\r\n                                 && ['TO_SIGN_REJECT_LETTER', 'SENT_FOR_REJECT', 'REJECTED', 'TO_INVOKE_SIGNED', 'TO_SIGN_FINISH_LETTER', 'SEND_SIGN_FINISH',\r\n                                 'FINISH_LETTER_SIGN_AND_SEND', 'SEND_SIGN_TO_RETURN', 'SEND_SIGN', 'SEND_SEEN_CLOSED'].indexOf(selectedTrItem.status) === -1\r\n                                 && !selectedTrItem.isForCommission && !selectedTrItem.isHeadOfDepartment\"\r\n                              variant=\"danger\"\r\n                              @click=\"showRejectedModal\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.reports.rejected\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"computedMakeSignedCompromiseDecisionToReject\"\r\n                              variant=\"danger\"\r\n                              @click=\"showRejectedModal\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.commission.doc_status.reject_begin_commission\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"selectedTrItem.applicationTypeInProject !== 'FROM_DXA'\r\n                                 && selectedTrItem.applicationTypeInProject !=='NOT_BELONG'\r\n                                 && ['SEND_SIGN'].indexOf(selectedTrItem.status) !== -1 && !selectedTrItem.isHeadOfDepartment\"\r\n                              variant=\"warning\"\r\n                              @click=\"showRejectedModal\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"submodules.commission.returnsee\") }}\r\n                          </b-button>\r\n                          <!--Rasmiylatirishda hato kamchiliklar tufayli qaytarildi-->\r\n                          <b-button\r\n                              v-if=\"(selectedTrItem.applicationTypeInProject === 'FROM_DXA' && selectedTrItem.status === 'SEND_SIGN')\"\r\n                              v-b-tooltip.hover.top\r\n                              :title=\"$t('submodules.commission.returnByRais')\"\r\n                              class=\"ml-1\"\r\n                              variant=\"warning\"\r\n                              @click=\"showRejectedByRaisModal(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-times\"></i><br>\r\n                            {{ $t(\"column.return\") }}\r\n                          </b-button>\r\n                          <b-button\r\n                              v-if=\"['TO_SIGN_REJECT_LETTER'].indexOf(selectedTrItem.status) === -1 && selectedTrItem.action === 'SIGNATURE' && selectedTrItem.fileType === 'docx'\"\r\n                              :to=\"{\r\n                                name: 'Office-DOCUMENT-commission',\r\n                                query: { id: selectedTrItem.letterId, page: 'GET' },\r\n                              }\"\r\n                              target=\"_blank\"\r\n                              variant=\"light\"\r\n                          >\r\n                            <i class=\"fa fa-pencil-alt\"></i><br>\r\n                            {{ $t(\"actions.edit\") }}\r\n                          </b-button>\r\n                        </b-button-group>\r\n                        <!-- Loyihani korish va attachmentni  korish -->\r\n                        <b-button-group>\r\n                          <!-- loyihani korish-->\r\n                          <b-button\r\n                              v-if=\"['TO_SIGN_REJECT_LETTER', 'REJECTED', 'TO_INVOKE_SIGNED', 'FINISH_LETTER_SIGN_AND_SEND'].indexOf(selectedTrItem.status) === -1 &&\r\n                                    ['LETTER_FINISH', 'LETTER_REJECT'].indexOf(selectedTrItem.letterType) === -1\"\r\n                              variant=\"info\"\r\n                              @click=\"viewProject(selectedTrItem)\"\r\n                          >\r\n                            <i class=\"fa fa-eye\"></i><br>\r\n                            {{ selectedTrItem.projectType === 'COMMISSION' ? $t(\"actions.view_commission\") : $t(\"actions.view_project\") }}\r\n                          </b-button>\r\n                          <!-- Xujjatni ko'rish -->\r\n                          <b-button variant=\"primary\" @click=\"viewIlova(selectedTrItem)\"\r\n                                    v-if=\"getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'pdf'\">\r\n                            <i class=\"fa fa-eye\"></i><br>\r\n                            {{ $t(\"actions.view_document\") }}\r\n                          </b-button>\r\n                          <!-- Xujjatni docx bolsa only ofisga otish ko'rish [pastroqda bir bi xil tugma bor] -->\r\n                          <b-button\r\n                              variant=\"outline-info\"\r\n                              @click=\"openOnlyOffice(selectedTrItem.letterId)\"\r\n                              v-if=\"selectedTrItem.applicationTypeInProject === 'FROM_DXA' && getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'docx'\">\r\n                            <i class=\"fa fa-pen\"></i><br>\r\n                            {{ $t(\"actions.edit\") }}\r\n                          </b-button>\r\n                        </b-button-group>\r\n                      </div>\r\n                      <b-button-group v-else>\r\n                        <b-button v-if=\"['TO_SIGN_REJECT_LETTER', 'REJECTED', 'TO_INVOKE_SIGNED', 'FINISH_LETTER_SIGN_AND_SEND'].indexOf(selectedTrItem.status) === -1 &&\r\n                                    ['LETTER_FINISH', 'LETTER_REJECT'].indexOf(selectedTrItem.letterType) === -1\"\r\n                            variant=\"info\" @click=\"viewProject(selectedTrItem)\">\r\n                          <i class=\"fa fa-eye\"></i><br>\r\n                          {{ $t(\"actions.view_project\") }}\r\n                        </b-button>\r\n                        <!-- Xujjatni ko'rish -->\r\n                        <b-button\r\n                            variant=\"primary\"\r\n                            @click=\"viewIlova(selectedTrItem)\"\r\n                            v-if=\"getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'pdf'\"\r\n                        >\r\n                          <i class=\"fa fa-eye\"></i><br>\r\n                          {{ $t(\"actions.view_document\") }}\r\n                        </b-button>\r\n                        <!-- Xujjatni docx bolsa only ofisga otish ko'rish [teparoqda bior xil tugma bor] -->\r\n                        <b-button\r\n                            variant=\"outline-info\"\r\n                            @click=\"openOnlyOffice(selectedTrItem.letterId)\"\r\n                            v-if=\"getExt(selectedTrItem.uploadPath ? selectedTrItem.uploadPath : selectedTrItem.url) === 'docx' && selectedTrItem.status !== 'CANCELED'\"\r\n                        >\r\n                          <i class=\"fa fa-pen\"></i><br>\r\n                          {{ $t(\"actions.edit\") }}\r\n                        </b-button>\r\n                      </b-button-group>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"docName\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ selectedTrItem.id && selectedTrItem.fileName ? selectedTrItem.fileName : \"\" }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"docCreatedDate\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ selectedTrItem.created }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"submodules.dxa.dxa_application_number\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ visaInfoById.applicationRegNumber }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>\r\n                      {{ $t(\"submodules.commission.income_date\") }}\r\n                    </b>\r\n                  </td>\r\n                  <td>\r\n                    {{ visaInfoById.dateCameFromDxa }}\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b> {{ $t(\"submodules.dxa.application_type\") }}</b> <br>\r\n                  </td>\r\n                  <td>\r\n                    <span v-if=\"visaInfoById.applicationType === 'FOR_SALE'\" class=\"text-left\" style=\"font-size: 12px\">\r\n                      {{ $t(\"submodules.dxa.dxa_application_1\") }}\r\n                    </span>\r\n                    <span\r\n                        v-else-if=\"visaInfoById.applicationType === 'FOR_ADD'\"\r\n                        class=\"text-left\"\r\n                        style=\"font-size: 12px\"\r\n                    > {{ $t(\"submodules.dxa.dxa_application_2\") }}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"selectedTrItem.isForCommission\">\r\n                  <td colspan=\"2\">\r\n                    <div class=\"p-2 bg-gradient bg-info rounded text-white\">\r\n                      {{ $t(\"submodules.commission.doc_status.send_for_commission\") }}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"whoSent\") }}</b>\r\n                  </td>\r\n                  <td class=\"pl-0\">\r\n                    <ul v-if=\"selectedTrItem.id\" id=\"il\" class=\"list-unstyled chat-list\">\r\n                      <li>\r\n                        <div class=\"media d-flex\" style=\"align-items: center\">\r\n                          <div class=\"align-self-center mr-3\"></div>\r\n                          <div v-if=\"selectedTrItem.senderUploadPath\" class=\"align-self-center mr-3\">\r\n                            <img\r\n                                :src=\"`${hrUrl}/${selectedTrItem.senderUploadPath}`\"\r\n                                alt\r\n                                class=\"rounded-circle avatar-sm\"\r\n                                height=\"auto\"\r\n                            />\r\n                          </div>\r\n                          <div v-if=\"!selectedTrItem.senderUploadPath\" class=\"avatar-sm align-self-center mr-3\">\r\n                            <span class=\" avatar-title rounded-circle bg-soft-primary text-white\">\r\n                              {{ selectedTrItem?.senderFirstName?.charAt(0) }}\r\n                            </span>\r\n                          </div>\r\n                          <div class=\"media-body overflow-hidden\">\r\n                            <h5 class=\"font-size-14 mb-1\">\r\n                              {{\r\n                                `${selectedTrItem.senderLastName} ${selectedTrItem.senderFirstName} ${selectedTrItem.senderParentName}`\r\n                              }}\r\n                            </h5>\r\n                            <p class=\"m-0\">\r\n                              {{\r\n                                getName({\r\n                                  nameLt: selectedTrItem.senderDepNameLt,\r\n                                  nameRu: selectedTrItem.senderDepNameRu,\r\n                                  nameUz: selectedTrItem.senderDepNameUz,\r\n                                })\r\n                              }}\r\n                            </p>\r\n                            <p class=\"m-0\">\r\n                              {{\r\n                                getName({\r\n                                  nameLt: selectedTrItem.senderPositionNameLt,\r\n                                  nameRu: selectedTrItem.senderPositionNameRu,\r\n                                  nameUz: selectedTrItem.senderPositionNameUz,\r\n                                })\r\n                              }}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"puropseOfSending\") }}</b>\r\n                  </td>\r\n                  <td>\r\n                    {{\r\n                      selectedTrItem.id\r\n                          ? selectedTrItem.action === \"SIGNATURE\"\r\n                              ? $t(\"forSignature\")\r\n                              : selectedTrItem.action === \"AGREEMENT\"\r\n                                  ? $t(\"forAgreement\")\r\n                                  : selectedTrItem.action === \"REVIEW\"\r\n                                      ? $t(\"forReview\")\r\n                                      : \"\"\r\n                          : \"\"\r\n                    }}\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"selectedTrItem.comment !== null && selectedTrItem.comment !== ''\">\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"column.comment\") }}</b>\r\n                  </td>\r\n                  <td>\r\n                    {{ selectedTrItem.comment }}\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"filesList.length > 0\">\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"letter_ilovalar\") }}</b>\r\n                  </td>\r\n                  <td></td>\r\n                </tr>\r\n                <tr v-for=\"(item, index) in filesList\" :key=\"index + 'FILE'\" class=\"mt-3\">\r\n                  <td class=\"p-2\" colspan=\"2\">\r\n                    <div class=\"d-flex align-items-center bg-light p-2 justify-content-between\">\r\n                      <div class=\"d-flex align-items-center\">\r\n                        <a\r\n                            :download=\"getExt(item.uploadPath) === 'pdf' ? false: item.uploadPath\"\r\n                            :href=\"getExt(item.uploadPath) === 'pdf' ? `#` : `${baseUrl}/${item.uploadPath}`\"\r\n                            @click=\"viewIlova(item)\"\r\n                        >\r\n                          <FileView :uploadPath=\"item.fileName\" class=\"my-card-hovered\"/>\r\n                        </a>\r\n                        <span class=\"ml-2\">\r\n                          {{ item.fileName }}\r\n                        </span>\r\n                      </div>\r\n                      <a\r\n                          :href=\"`${baseUrl}/${item.uploadPath}`\"\r\n                          class=\"mr-3 p-1 btn btn-sm btn-light\"\r\n                          download\r\n                      >\r\n                        <i class=\"bx bx-download font-size-20\"></i>\r\n                      </a>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n                <tr v-if=\"selectedTrItem.isRejectLetterCreated && rejectedLetter\">\r\n                  <td class=\"text-muted\">\r\n                    <a :download=\"getExt(rejectedLetter.url) === 'pdf' ? false : rejectedLetter.url\"\r\n                       :href=\"getExt(rejectedLetter.url) === 'pdf' ? `#` : `${baseUrl}/${rejectedLetter.url}`\"\r\n                       @click=\"viewFile(rejectedLetter.url)\"\r\n                    >\r\n                      <FileView :uploadPath=\"rejectedLetter.url\" class=\"d-inline-block my-card-hovered\"/>\r\n                      <b class=\"align-top d-inline-block p-2 py-3\">{{ rejectedLetter.fileName }}</b>\r\n                    </a>\r\n                  </td>\r\n                  <td>\r\n                    <b-btn variant=\"success m-2\" @click=\"sendLetterToChairman.modal = true\"\r\n                           v-if=\"rejectedLetter.status === 'CREATED'\">\r\n                      <i class=\"fa fa-file-signature\"></i>\r\n                      {{ $t('submodules.commission.send_for_sign') }}\r\n                    </b-btn>\r\n                  </td>\r\n                </tr>\r\n                <tr>\r\n                  <td class=\"text-muted\">\r\n                    <b>{{ $t(\"qabulQiluvchilar\") }}</b>\r\n                  </td>\r\n                  <td></td>\r\n                </tr>\r\n                </tbody>\r\n              </table>\r\n              <b-overlay\r\n                  :opacity=\"0.1\"\r\n                  :show=\"loaderReceiver\"\r\n                  rounded=\"sm\"\r\n              >\r\n                <Receivers\r\n                    :selectedAgreement=\"infoData.agreement\"\r\n                    :selectedReview=\"infoData.review\"\r\n                    :selectedSignature=\"infoData.signature\"\r\n                />\r\n              </b-overlay>\r\n              <!-- COMMISSION FILES -->\r\n              <div class=\"wrapper\" v-if=\"selectedTrItem && projectFilesList.length\">\r\n                <span CLASS=\"fromcenter\">{{ $t('commission_attached_files') }}</span>\r\n              </div>\r\n              <div\r\n                  v-if=\"selectedTrItem && projectFilesList.length\"\r\n                  class=\"card card-body card-tabs mt-1\"\r\n                  style=\"min-height: 10em; width: 100%\"\r\n              >\r\n                <tr v-for=\"(item, index) in projectFilesList\" :key=\"index + 'FILE'\" class=\"mt-1\">\r\n                  <div class=\"d-flex align-items-center bg-light p-2 justify-content-between\">\r\n                    <div class=\"d-flex align-items-center\">\r\n                      <a :download=\"getExt(item.url) === 'pdf' ? false : item.url\"\r\n                         :href=\"getExt(item.url) === 'pdf' ? `#` : `${baseUrl}/${item.url}`\"\r\n                         @click=\"viewIlovaProject(item.url)\"\r\n                      >\r\n                        <BaseFileViewer :uploadPath=\"item.url\" class=\"my-card-hovered\"/>\r\n                      </a>\r\n                      <span class=\"ml-2\">\r\n                        {{ item.fileName }}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </tr>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <b-modal\r\n        v-model=\"viewFileModal\"\r\n        :title=\"$t('actions.view')\"\r\n        scrollable\r\n        size=\"xl\"\r\n    >\r\n      <div\r\n          v-if=\"fileUploadPath\"\r\n          style=\"height: 700px\"\r\n      >\r\n        <embed\r\n            :src=\"`${baseUrl}/${fileUploadPath}`\"\r\n            height=\"800\"\r\n            type=\"application/pdf\"\r\n            width=\"100%\"\r\n        />\r\n      </div>\r\n      <template v-slot:modal-footer>\r\n        <b-button\r\n            variant=\"secondary\"\r\n            @click=\"viewFileModal = false\"\r\n        >{{\r\n            $t(\"actions.close\")\r\n          }}\r\n        </b-button>\r\n      </template>\r\n    </b-modal>\r\n  </div>\r\n  <!-- </Layout> -->\r\n</template>\r\n\r\n<style>\r\n.bg-class {\r\n  background-color: #fbfbfb !important;\r\n}\r\n</style>"]}]}