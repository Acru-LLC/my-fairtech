{"remainingRequest":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\modules\\profile\\profile.vue?vue&type=style&index=1&id=35060d1c&lang=scss&scoped=true&","dependencies":[{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\src\\modules\\profile\\profile.vue","mtime":1674799497786},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":1667355376309},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667355356565},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667355363746},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1667355361315},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667355378280},{"path":"C:\\ACRU PROJECT\\Fair Tech\\ohirgi\\acru-frontend\\acru-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667355356562}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCjo6di1kZWVwLnNpZGViYXItY2hhdCB7DQogIC5iLXNpZGViYXIgew0KICAgIHdpZHRoOiAxMDB2dzsNCiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsNCiAgfQ0KfQ0KDQo6OnYtZGVlcC5hdmF0YXItZWRpdC1wZW5jaWwgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlOw0KICBib3gtc2hhZG93OiA1cHggNXB4IDVweCAjZWVlOw0KICBib3JkZXItcmFkaXVzOiA1MHB4Ow0KICBib3JkZXI6IDNweCBzb2xpZCB3aGl0ZTsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICAvKiBiYWNrZ3JvdW5kOiAjNTU2ZWU2OyAqLw0KfQ0KDQo6OnYtZGVlcC5hdmF0YXItY29udGFpbmVyIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBoZWlnaHQ6IDVyZW07DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KfQ0KDQo6OnYtZGVlcC5hdmF0YXItY29udGFpbmVyOmhvdmVyIC5vdmVybGF5IHsNCiAgb3BhY2l0eTogMSAhaW1wb3J0YW50Ow0KfQ0KDQoNCjo6di1kZWVwLmltYWdlIHsNCiAgZGlzcGxheTogYmxvY2s7DQogIHdpZHRoOiA1cmVtOw0KICBoZWlnaHQ6IDVyZW07DQp9DQoNCjo6di1kZWVwLm92ZXJsYXkgew0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMDsNCiAgYm90dG9tOiAwOw0KICBoZWlnaHQ6IDEwMCU7DQogIHdpZHRoOiA1cmVtOw0KICBvcGFjaXR5OiAwOw0KICB0cmFuc2l0aW9uOiAwLjNzIGVhc2U7DQp9DQoNCjo6di1kZWVwLmljb24gew0KICBjb2xvcjogd2hpdGU7DQogIGZvbnQtc2l6ZTogMTAwcHg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiA1MCU7DQogIGxlZnQ6IDUwJTsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7DQogIC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KDQo6OnYtZGVlcC5mYS11c2VyOmhvdmVyIHsNCiAgY29sb3I6ICNlZWU7DQp9DQo="},{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA80BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"profile.vue","sourceRoot":"src/modules/profile","sourcesContent":["<template>\r\n  <!--  <Layout>-->\r\n  <!--    <PageHeader :items=\"breadcrumbs\" :title=\"title\"/>-->\r\n  <div>\r\n    <div>\r\n      <b-overlay :show=\"loadingContent\">\r\n        <b-form-file\r\n            ref=\"userAvatarFileRef\"\r\n            style=\"display: none\"\r\n            v-model=\"fileForUserAvatar\"\r\n            @input=\"updateUserAvatar\"\r\n        ></b-form-file>\r\n        <b-card>\r\n          <b-row class=\"text-right\">\r\n            <b-col>\r\n              <template v-if=\"!editAccountInfo\">\r\n                <b-button :disabled=\"loadingButton\" @click=\"changeStateEditAccountInfo('change')\"\r\n                          class=\"mr-1 ml-1\"\r\n                          size=\"sm\" variant=\"success\">\r\n                  <i class=\"fa fa-pen\"></i> {{ $t('profile.change') }}\r\n                </b-button>\r\n              </template>\r\n              <template v-else>\r\n                <b-button :disabled=\"loadingButton || !canSaveUserInfo\" @click=\"saveChanges\" size=\"sm\"\r\n                          variant=\"success\">\r\n                  <i class=\"fa fa-save\"></i> {{ $t('profile.password.update') }}\r\n                </b-button>\r\n                <b-button :disabled=\"loadingButton\" @click=\"changeStateEditAccountInfo('cancel')\"\r\n                          class=\"mr-1 ml-1\"\r\n                          size=\"sm\" variant=\"danger\">\r\n                  <i class=\"fa fa-times\"></i> {{ $t('profile.password.cancel') }}\r\n                </b-button>\r\n              </template>\r\n            </b-col>\r\n          </b-row>\r\n          <br>\r\n          <b-row>\r\n            <b-col class=\"text-center\" md=\"4\" sm=\"12\">\r\n              <template-logo-component></template-logo-component>\r\n              <br>\r\n              <!--                            <b-button class=\"btn-default btn-circle\" size=\"sm\"><i class=\"fa fa-upload\"></i>-->\r\n              <!--                            </b-button>-->\r\n              <!--              <b-button variant=\"success\" size=\"sm\" @click=\"openFileBrowser\"><i class=\"fa fa-pen\"></i>-->\r\n              <!--                {{ $t('profile.change') }}-->\r\n              <!--              </b-button>-->\r\n              <div class=\"avatar-container\">\r\n                <b-spinner\r\n                    v-if=\"userAvatarLoading\"\r\n                    variant=\"primary\"\r\n                    label=\"Loading\"\r\n                ></b-spinner>\r\n                <img\r\n                    v-else\r\n                    class=\"rounded-circle bg-light image\"\r\n                    :src=\"`${userAvatarUrlFromStorage ? publicPath+userAvatarUrlFromStorage : require('../../assets/images/users/default-avatar.png')}`\"\r\n                />\r\n                <div class=\"overlay\">\r\n                  <div\r\n                      @click=\"userAvatarClicked\"\r\n                      class=\"avatar-edit-pencil\r\n                               d-flex\r\n                               align-items-center\r\n                               justify-content-center\r\n                               bg-primary\"\r\n                  >\r\n                    <i\r\n                        class=\"mdi mdi-camera-plus-outline text-white\"\r\n                        style=\"font-size: 2rem;\"\r\n                    ></i>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"user-full-name mt-4\">\r\n                <p class=\"text\">{{ item.fullName }}</p>\r\n                <b-button @click=\"openChangePasswordModal\" class=\"btn-default btn-circle\"\r\n                          size=\"sm\"><i class=\"fa fa-key\"></i>\r\n                </b-button>\r\n              </div>\r\n\r\n            </b-col>\r\n            <b-col md=\"8\" sm=\"12\">\r\n              <div class=\"mt-2 table-striped\">\r\n                <table class=\"table\">\r\n                  <tbody>\r\n                  <tr>\r\n                    <th scope=\"row\" width=\"20%\">{{ $t('profile.fio') }}</th>\r\n                    <td>{{ item.fullName }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('column.birthdate') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col lg=\"6\" md=\"6\" sm=\"12\" xl=\"4\">\r\n                          <template v-if=\"editAccountInfo\">\r\n\r\n                            <!--                            <b-form-input size=\"sm\" v-mask=\"myDateMask\"-->\r\n                            <!--                                          :state=\"globalRegexDateOfBirth.test(itemCopy.employee.dateOfBirth)\"-->\r\n                            <!--                                          v-model=\"itemCopy.employee.dateOfBirth\"-->\r\n                            <!--                            ></b-form-input>-->\r\n\r\n                            <BaseDatePickerWithValidation\r\n                                custom-styles=\"grid-template-columns: 100%\"\r\n                                v-model=\"itemCopy.employee.dateOfBirth\"\r\n                                lang=\"ru\"\r\n                            ></BaseDatePickerWithValidation>\r\n                          </template>\r\n\r\n                          <template v-else>\r\n                            {{ item.employee.dateOfBirth }}\r\n                          </template>\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.inn') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col lg=\"6\" md=\"6\" sm=\"12\" xl=\"4\">\r\n                          <template v-if=\"editAccountInfo\">\r\n\r\n                            <b-form-input :disabled=\"loadingButton\"\r\n                                          :state=\"globalRegexInn.test(itemCopy.employee.inn)\"\r\n                                          size=\"sm\"\r\n                                          v-mask=\"'##############'\"\r\n                                          v-model=\"itemCopy.employee.inn\"\r\n                            >\r\n                            </b-form-input>\r\n\r\n\r\n                          </template>\r\n                          <template v-else>\r\n                            {{ item.employee.inn }}\r\n                          </template>\r\n\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.pinfl') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col lg=\"6\" md=\"6\" sm=\"12\" xl=\"4\">\r\n                          <template v-if=\"editAccountInfo\">\r\n                            <b-form-input :disabled=\"loadingButton\"\r\n                                          size=\"sm\"\r\n                                          v-mask=\"'##############'\"\r\n                                          v-model=\"itemCopy.employee.pinfl\"\r\n                            >\r\n                            </b-form-input>\r\n                          </template>\r\n\r\n                          <template v-else>\r\n                            {{ item.employee.pinfl }}\r\n                          </template>\r\n\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.title') }}</th>\r\n                    <td>{{ item.userName }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.email') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <b-col cols=\"12\"\r\n                               sm=\"6\">\r\n                          <template v-if=\"editAccountInfo\">\r\n                            <BaseInputWithValidation\r\n                                :rules=\"{email: true}\"\r\n                                custom-styles=\"grid-template-columns: 0% 65%\"\r\n                                placeholder=\"meningEmail@gmail.com\"\r\n                                v-model=\"itemCopy.mail\"\r\n                            />\r\n                            <!--                            <b-input-group append=\"@gmail.com\" size=\"sm\">-->\r\n                            <!--                              <b-form-input :disabled=\"loadingButton\"-->\r\n                            <!--                                            v-model=\"itemCopy.email\"-->\r\n                            <!--                              >-->\r\n                            <!--                              </b-form-input>-->\r\n                            <!--                            </b-input-group>-->\r\n                          </template>\r\n\r\n                          <template v-else>\r\n                            {{ item.mail }}\r\n                          </template>\r\n\r\n                        </b-col>\r\n                      </b-row>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th scope=\"row\">{{ $t('profile.phonenumber') }}</th>\r\n                    <td>\r\n                      <b-row>\r\n                        <template v-if=\"editAccountInfo\">\r\n                          <b-col\r\n                              sm=\"12\"\r\n                              md=\"6\"\r\n                          >\r\n                            <BaseInputWithValidation\r\n                                not-required\r\n                                custom-styles=\"grid-template-columns: 0% 65%\"\r\n                                v-model=\"itemCopy.phoneNumber\"\r\n                                mask=\"+998#########\"\r\n                                placeholder=\"+998#########\"\r\n                            />\r\n                          </b-col>\r\n\r\n                          <!--                            <b-form-input :disabled=\"loadingButton\" size=\"sm\"-->\r\n                          <!--                                          v-mask=\"'## ### ## ##'\"-->\r\n                          <!--                                          v-model=\"itemCopy.phoneNumber\"-->\r\n                          <!--                            >-->\r\n                          <!--                            </b-form-input>-->\r\n\r\n                        </template>\r\n\r\n                        <template v-else>\r\n                          {{ item.phoneNumber }}\r\n                          <!--                            {{ getCorrectPhoneNumber(item.phoneNumber) }}-->\r\n                        </template>\r\n                      </b-row>\r\n\r\n                    </td>\r\n                  </tr>\r\n                  <!--                  <tr>-->\r\n                  <!--                    <th scope=\"row\">{{ $t('profile.inPhoneNumber') }}</th>-->\r\n                  <!--                    <td>-->\r\n                  <!--                      <b-row>-->\r\n                  <!--                        <b-col lg=\"5\" md=\"5\" sm=\"12\" xl=\"3\">-->\r\n                  <!--                          <template v-if=\"editAccountInfo\">-->\r\n                  <!--                            <b-form-input :disabled=\"loadingButton\" size=\"sm\"-->\r\n                  <!--                                          v-mask=\"'#####'\"-->\r\n                  <!--                                          v-model=\"itemCopy.inPhoneNumber\"-->\r\n                  <!--                            >-->\r\n                  <!--                            </b-form-input>-->\r\n\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                          <template v-else>-->\r\n                  <!--                            {{ item.inPhoneNumber }}-->\r\n                  <!--                          </template>-->\r\n                  <!--                        </b-col>-->\r\n                  <!--                      </b-row>-->\r\n                  <!--                    </td>-->\r\n                  <!--                  </tr>-->\r\n                  <!--                  <tr>-->\r\n                  <!--                    <th scope=\"row\">{{ $t('profile.departmentCode') }}</th>-->\r\n                  <!--                    <td>-->\r\n                  <!--                      <b-row>-->\r\n                  <!--                        <b-col lg=\"5\" md=\"5\" sm=\"12\" xl=\"3\">-->\r\n                  <!--                          <template v-if=\"editAccountInfo\">-->\r\n                  <!--                            <b-form-input :disabled=\"loadingButton\" size=\"sm\"-->\r\n                  <!--                                          v-mask=\"'##-##'\"-->\r\n                  <!--                                          v-model=\"itemCopy.departmentCode\"-->\r\n                  <!--                            >-->\r\n                  <!--                            </b-form-input>-->\r\n\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                          <template v-else>-->\r\n                  <!--                            {{ item.departmentCode }}-->\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                        </b-col>-->\r\n                  <!--                      </b-row>-->\r\n\r\n                  <!--                    </td>-->\r\n                  <!--                  </tr>-->\r\n                  <!--                  <tr>-->\r\n                  <!--                    <th scope=\"row\">{{ $t('profile.trustedUsers') }}</th>-->\r\n                  <!--                    <td>-->\r\n                  <!--                      <b-row>-->\r\n                  <!--                        <b-col md=\"6\" sm=\"12\">-->\r\n                  <!--                          <template v-if=\"editAccountInfo\">-->\r\n\r\n                  <!--                            <v-select-->\r\n                  <!--                                :clearable=\"false\"-->\r\n                  <!--                                :filterBy=\"myFilterUserList\"-->\r\n                  <!--                                :getOptionLabel=\"myDefaultLabelUserList\"-->\r\n                  <!--                                :loading=\"loadingUser\"-->\r\n                  <!--                                :options=\"userList\"-->\r\n                  <!--                                class=\"sel mt-2\"-->\r\n                  <!--                                multiple-->\r\n                  <!--                                name=\"bank\"-->\r\n                  <!--                                v-model=\"itemCopy.trustedUsers\"-->\r\n                  <!--                            >-->\r\n                  <!--                              <template #no-options=\"{ search, searching, loading }\">-->\r\n                  <!--                                {{ $t(\"profile.empty_table\") }}-->\r\n                  <!--                              </template>-->\r\n                  <!--                            </v-select>-->\r\n\r\n                  <!--                          </template>-->\r\n                  <!--                          <template v-else>-->\r\n                  <!--&lt;!&ndash;                            <template v-for=\"el in item.trustedUsers\">&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                              <p>&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                                <b-badge size=\"md\" variant=\"primary\">{{ el.text }}&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                                </b-badge>&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                              </p>&ndash;&gt;-->\r\n                  <!--&lt;!&ndash;                            </template>&ndash;&gt;-->\r\n                  <!--                          </template>-->\r\n\r\n                  <!--                        </b-col>-->\r\n                  <!--                      </b-row>-->\r\n\r\n                  <!--                    </td>-->\r\n                  <!--                  </tr>-->\r\n\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <table class=\"table\">\r\n                <tbody>\r\n\r\n                </tbody>\r\n              </table>\r\n            </b-col>\r\n          </b-row>\r\n\r\n\r\n        </b-card>\r\n      </b-overlay>\r\n    </div>\r\n\r\n\r\n    <b-modal hide-footer hide-header ref=\"my-modal\" size=\"md\" v-model=\"changePasswordModal\">\r\n      <header class=\"modal-header\">\r\n        <b-col cols=\"10\">\r\n          <h5 class=\"modal-title text-center\"><b>{{\r\n              $t('profile.password.change')\r\n            }}</b></h5>\r\n        </b-col>\r\n        <b-col cols=\"2\">\r\n          <button @click=\"showModal('changePasswordModal',false)\" aria-label=\"Close\" class=\"close\"\r\n                  type=\"button\">Ã—\r\n          </button>\r\n        </b-col>\r\n\r\n\r\n      </header>\r\n      <div class=\"modal-body\">\r\n\r\n        <ValidationObserver ref=\"form\" v-slot=\"errors\">\r\n          {{ setAllErrors(errors.errors) }}\r\n          <b-row>\r\n            <b-col md=\"12\" sm=\"12\">\r\n              <ValidationProvider\r\n                  name=\"oldPassword\"\r\n                  v-slot=\"v\">\r\n                <b-form-group\r\n                    label-cols-sm=\"5\"\r\n                    label-for=\"input-1\"\r\n                >\r\n                  <template slot=\"label\">\r\n                    <label class=\"d-block\">{{\r\n                        $t('profile.password.old')\r\n                      }}\r\n                      <span class=\"text-danger\"> *</span></label>\r\n                  </template>\r\n                  <b-form-input\r\n                      :placeholder=\"$t('profile.password.old')\"\r\n\r\n                      class=\"mt-1\"\r\n                      size=\"sm\"\r\n                      type=\"password\"\r\n                      v-model=\"account.currentPassword\"\r\n                  ></b-form-input>\r\n                  <b-form-invalid-feedback\r\n\r\n                      id=\"usernameInput-feedback\"\r\n                  >\r\n                    {{ v.errors[0] }}\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n              </ValidationProvider>\r\n\r\n            </b-col>\r\n            <b-col md=\"12\" sm=\"12\">\r\n              <ValidationProvider\r\n                  name=\"password\"\r\n                  v-slot=\"v\">\r\n                <b-form-group\r\n                    label-cols-sm=\"5\"\r\n                    label-for=\"input-1\"\r\n                >\r\n                  <template slot=\"label\">\r\n                    <label class=\"d-block\">{{\r\n                        $t('profile.password.new')\r\n                      }}\r\n                      <span class=\"text-danger\"> *</span></label>\r\n                  </template>\r\n                  <b-input-group class=\"mt-1\" size=\"sm\">\r\n                    <b-form-input\r\n                        :placeholder=\"$t('profile.password.new')\"\r\n\r\n                        :type=\"inputType ? 'password' : 'text'\"\r\n                        v-model=\"account.password\"\r\n                    ></b-form-input>\r\n                    <template #append>\r\n                      <button @click=\"showPassword\" class=\"btn btn-sm btn-primary\">\r\n                        <i class=\"fa fa-eye\" v-if=\"inputType\"></i>\r\n                        <i class=\"fa fa-eye-slash\" v-else></i>\r\n\r\n                      </button>\r\n                    </template>\r\n                  </b-input-group>\r\n                  <b-form-invalid-feedback\r\n\r\n                      id=\"usernameInput-feedback\"\r\n                  >\r\n                    {{ v.errors[0] }}\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n              </ValidationProvider>\r\n\r\n            </b-col>\r\n            <b-col md=\"12\" sm=\"12\">\r\n              <ValidationProvider\r\n                  name=\"confirmPassword\"\r\n                  v-slot=\"v\">\r\n                <b-form-group\r\n                    label-cols-sm=\"5\"\r\n                    label-for=\"input-1\"\r\n                >\r\n                  <template slot=\"label\">\r\n                    <label class=\"d-block\">{{\r\n                        $t('profile.password.confirm')\r\n                      }}\r\n                      <span class=\"text-danger\"> *</span></label>\r\n                  </template>\r\n                  <b-input-group class=\"mt-1\" size=\"sm\">\r\n                    <b-form-input\r\n                        :placeholder=\"$t('profile.password.new')\"\r\n                        :type=\"inputType ? 'password' : 'text'\"\r\n                        v-model=\"account.rePassword\"\r\n                    ></b-form-input>\r\n                    <template #append>\r\n                      <button @click=\"showPassword\" class=\"btn btn-sm btn-primary\">\r\n                        <i class=\"fa fa-eye\" v-if=\"inputType\"></i>\r\n                        <i class=\"fa fa-eye-slash\" v-else></i>\r\n\r\n                      </button>\r\n                    </template>\r\n                  </b-input-group>\r\n                  <b-form-invalid-feedback\r\n                      id=\"usernameInput-feedback\"\r\n                  >\r\n                    {{ v.errors[0] }}\r\n                  </b-form-invalid-feedback>\r\n                </b-form-group>\r\n              </ValidationProvider>\r\n\r\n            </b-col>\r\n          </b-row>\r\n        </ValidationObserver>\r\n        <hr>\r\n        <b-row>\r\n          <b-col md=\"12\" sm=\"12\">\r\n            <button :disabled=\"!modalFormValid\"\r\n                    @click=\"changePassword\" class=\"btn btn-sm btn-success float-right\">\r\n              <b-spinner small v-if=\"loadingButton\"></b-spinner>\r\n              {{ $t('profile.password.update') }}\r\n            </button>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n\r\n    </b-modal>\r\n  </div>\r\n\r\n  <!--  </Layout>-->\r\n\r\n</template>\r\n<script>\r\n// import Layout from \"@/router/layouts/main\";\r\n// import PageHeader from \"@/components/page-header\";\r\nimport AccountService from \"../../shared/services/profile/account.service\";\r\nimport TemplateLogoComponent from \"../../components/template-logo-component/template-logo-component\";\r\nimport ManualService from \"../../shared/services/profile/manual.service\";\r\nimport {mapState} from \"vuex\";\r\nimport appConfig from \"@/app.config\";\r\nimport {TokenService} from \"@/shared/services/storage.service\"\r\nimport messengerService from \"@/shared/services/messengerService\";\r\n\r\nexport default {\r\n  name: \"Profile\",\r\n  data() {\r\n    return {\r\n      publicPath: process.env.BASE_URL,\r\n      localUserAvatarUrl: null,\r\n      userAvatarLoading: false,\r\n      innerWidth: window.innerWidth,\r\n      userFullName: TokenService.getFullName(),\r\n      userId: TokenService.getUserId(),\r\n      loaderEdit: false,\r\n      fileForUserAvatar: null,\r\n      user_info: {\r\n        profile_img: require(\"../../assets/images/profile/profile-avatar.png\"),\r\n      },\r\n      breadcrumbs: [\r\n        {\r\n          text: this.$t('actions.profile'),\r\n          href: \"#\"\r\n\r\n        },\r\n      ],\r\n      appConfig,\r\n      title: this.$t('actions.profile'),\r\n      item: {\r\n        fullName: \"\",\r\n        userName: \"\",\r\n        phoneNumber: \"\",\r\n        mail: \"\",\r\n        employee: {\r\n          pinfl: \"\",\r\n          inn: \"\",\r\n          dateOfBirth: \"\"\r\n        },\r\n        trustedUsers: [],\r\n        avatarUrl: \"\"\r\n      },\r\n      changePasswordModal: false,\r\n      account: {\r\n        currentPassword: \"\",\r\n        password: \"\",\r\n        rePassword: \"\"\r\n      },\r\n      loadingButton: false,\r\n      inputType: true,\r\n      allErrors: {},\r\n      editAccountInfo: false,\r\n      itemCopy: {},\r\n      globalRegexPinfl: new RegExp('^\\\\d{14}$'),\r\n      globalRegexInn: new RegExp('^\\\\d{9}$'),\r\n      globalRegexDateOfBirth: new RegExp('^\\\\d{2}.\\\\d{2}.\\\\d{4}$'),\r\n      loadingUser: false,\r\n      userList: [],\r\n      loadingContent: false,\r\n      uploadFile: null\r\n    }\r\n  },\r\n  methods: {\r\n    updateUserAvatar() {\r\n      this.userAvatarLoading = true\r\n      messengerService\r\n          .changeUserProfileAvatar(this.fileForUserAvatar)\r\n          .then((rs) => {\r\n            this.userAvatarLoading = false\r\n            if (rs.data) {\r\n              this.localUserAvatarUrl = rs.data\r\n              TokenService.setUserAvatarUrl(rs.data)\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            console.log(e)\r\n            this.userAvatarLoading = false\r\n          })\r\n    },\r\n    userAvatarClicked() {\r\n      this.$refs.userAvatarFileRef.$el.firstChild.click()\r\n    },\r\n    myDateMask(value) {\r\n      let regex = [/[0|1|2|3]/]\r\n      if (value) {\r\n        if (value[0] === 3) {\r\n          regex.push(/[0|1]/)\r\n\r\n        } else {\r\n          regex.push(/[0-9]/)\r\n\r\n        }\r\n        regex.push(/[.]/);\r\n        regex.push(/[0|1]/);\r\n        if (value[3] === 1) {\r\n          regex.push(/[0|1|2]/);\r\n        } else {\r\n          regex.push(/[0-9]/)\r\n        }\r\n        regex.push(/[.]/);\r\n        regex.push(/[1|2]/)\r\n        regex.push(/[0-9]/)\r\n        regex.push(/[0-9]/)\r\n        regex.push(/[0-9]/)\r\n\r\n      }\r\n      return regex\r\n    },\r\n    async setLoadingContent(value) {\r\n      this.loadingContent = value\r\n    },\r\n    async searchUserByString(search = \"\") {\r\n      let filter = {\r\n        Search: search,\r\n        SortColumn: \"\",\r\n        OrderType: \"\",\r\n        PageNumber: 1,\r\n        PageLimit: 1000\r\n      };\r\n      this.loadingUser = true;\r\n      await ManualService.getUserList(filter).then(response => {\r\n        this.userList = response.data.rows;\r\n      }).finally(() => {\r\n        this.loadingUser = false;\r\n      })\r\n    },\r\n    myFilterUserList(option, label, search) {\r\n      let text = option.text.includes(search.toLowerCase()) || option.text.includes(search.toUpperCase()) ||\r\n          option.text.includes(search.charAt(0).toUpperCase() + search.slice(1));\r\n\r\n      return text;\r\n    },\r\n    myDefaultLabelUserList(option) {\r\n      let text = option.text;\r\n      return `${text}`;\r\n    },\r\n    getCorrectPhoneNumber(phoneNumber) {\r\n      return \"998\" + \" \" + phoneNumber.substr(0, 2) + \" \" + phoneNumber.substr(2);\r\n    },\r\n    async saveChanges() {\r\n      this.loadingButton = true;\r\n      // this.itemCopy.trustedUsers.forEach(el => {\r\n      //   trustedUsers.push(el.value)\r\n      // });\r\n      let obj = {\r\n        phoneNumber: this.itemCopy.phoneNumber,\r\n        inn: this.itemCopy.employee.inn,\r\n        personalNumber: this.itemCopy.employee.pinfl,\r\n        mail: this.itemCopy.mail,\r\n        birthday: this.itemCopy.employee.dateOfBirth,\r\n      };\r\n      await AccountService.changeUserInfo(obj)\r\n          .then(async (response) => {\r\n            if (300 > response.status && response.status >= 200) {\r\n              // await this.getUserInfo();\r\n              this.successEdited();\r\n              await this.getUserInfo();\r\n              this.changeStateEditAccountInfo('cancel')\r\n\r\n              // this.changeStateEditAccountInfo();\r\n\r\n              // this.$myMakeToast(\r\n              //     this.$t(`actions.messages.update_success`),\r\n              //     this.$t(\"actions.success\"),\r\n              //     \"success\"\r\n              // );\r\n\r\n            } else {\r\n              // this.$myMakeToast(\r\n              //     response.data.error,\r\n              //     this.$t(\"actions.error\"),\r\n              //     \"danger\"\r\n              // );\r\n              this.enterInfo();\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            this.enterInfo();\r\n            // this.$myMakeToast(\r\n            //     this.$globalCreateErrorMessageFromArray(\r\n            //         this.$getArrayFromArrayList(Object.values(e.response.data.errors))),\r\n            //     this.$t(\"actions.error\"),\r\n            //     \"danger\"\r\n            // );\r\n          }).finally(() => {\r\n            this.loadingButton = false;\r\n          });\r\n    },\r\n    changeStateEditAccountInfo(mode) {\r\n      if (mode === 'change') {\r\n        this.$set(this.itemCopy, 'phoneNumber', this.item.phoneNumber)\r\n        this.$set(this.itemCopy, 'mail', this.itemCopy.mail);\r\n        this.$set(this.itemCopy.employee, 'inn', this.item.employee.inn)\r\n        this.$set(this.itemCopy.employee, 'pinfl', this.item.employee.pinfl)\r\n      }\r\n      this.editAccountInfo = !this.editAccountInfo\r\n    },\r\n    showPassword() {\r\n      this.inputType = !this.inputType;\r\n    },\r\n    setAllErrors(errors) {\r\n      this.allErrors = errors;\r\n    },\r\n    checkValid() {\r\n      let valid = false;\r\n      if (\r\n          this.modalFormValid &&\r\n          (this.account.currentPassword !== '' && this.account.currentPassword !== null) &&\r\n          (this.account.password !== '' && this.account.password !== null) &&\r\n          (this.account.rePassword !== '' && this.account.rePassword !== null)\r\n      ) {\r\n        valid = true;\r\n      } else {\r\n        valid = false;\r\n      }\r\n      return valid\r\n    },\r\n    async changePassword() {\r\n      this.loadingButton = true;\r\n      let vm = this;\r\n      if (vm.checkValid()) {\r\n        await AccountService.changePassword(vm.account).then((response) => {\r\n          if (300 > response.status && response.status >= 200) {\r\n            this.changePasswordModal = false\r\n            this.$toast(this.$t('messages.saved_successfully'), { type: 'success' });\r\n            // vm.$myMakeToast(\r\n            //     vm.$t(`actions.messages.update_success`),\r\n            //     vm.$t(\"actions.success\"),\r\n            //     \"success\"\r\n            // );\r\n            setTimeout(function () {\r\n              vm.showModal('changePasswordModal', false);\r\n            }, 500);\r\n          } else {\r\n            // this.$myMakeToast(\r\n            //     response.data.error,\r\n            //     this.$t(\"actions.error\"),\r\n            //     \"danger\"\r\n            // );\r\n            this.enterInfo();\r\n\r\n          }\r\n        })\r\n            .catch((e) => {\r\n              this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n              // this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n              // this.$myMakeToast(\r\n              //     this.$globalCreateErrorMessageFromArray(\r\n              //         this.$getArrayFromArrayList(Object.values(e.response.data.errors))),\r\n              //     this.$t(\"actions.error\"),\r\n              //     \"danger\"\r\n              // );\r\n            })\r\n            .finally(() => {\r\n              this.loadingButton = false;\r\n            });\r\n      } else {\r\n        vm.loadingButton = false;\r\n        this.$toast(this.$t('messages.fill_required_fields'), { type: 'error' });\r\n        // vm.$myMakeToast(vm.$t('actions.messages.all_field_required'), vm.$t('actions.error'), 'danger');\r\n      }\r\n    },\r\n    showModal(modal, value) {\r\n      this.$data[modal] = value;\r\n    },\r\n    openChangePasswordModal() {\r\n      this.changePasswordModal = true;\r\n    },\r\n    async getUserInfo() {\r\n      await AccountService.getUserInfo().then((response) => {\r\n        this.item = response.data;\r\n        this.item = {\r\n          fullName: response.data.employeeLastName + ' ' + response.data.employeeFirstName + ' ' + response.data.employeeMiddleName,\r\n          userName: response.data.username,\r\n          phoneNumber: response.data.phoneNumber,\r\n          mail: response.data.mail,\r\n          employee: {\r\n            pinfl: response.data.inps,\r\n            inn: response.data.inn,\r\n            dateOfBirth: response.data.birthday\r\n          },\r\n          trustedUsers: [],\r\n          avatarUrl: '',\r\n        },\r\n            // this.$store.commit('auth/setUserInfo', response.data);\r\n            TokenService.setUserInfo(response.data);\r\n        this.itemCopy = JSON.parse(JSON.stringify(this.item));\r\n        this.$set(this.itemCopy, 'mail', this.itemCopy.mail);\r\n      })\r\n    }\r\n  },\r\n  async created() {\r\n    // await this.setLoadingContent(true);\r\n    // await this.searchUserByString();\r\n    await this.getUserInfo();\r\n    await this.setLoadingContent(false);\r\n  },\r\n  computed: {\r\n    ...mapState('auth', ['UserInfo']),\r\n    userAvatarUrlFromStorage() {\r\n      let triggerForUrl = this.localUserAvatarUrl\r\n      return TokenService.getUserAvatarUrl()\r\n    },\r\n    modalFormValid() {\r\n      let valid = true;\r\n      if (Object.keys(this.allErrors).length > 1) {\r\n\r\n        Object.entries(this.allErrors).forEach(([key, value]) => {\r\n          if (value.length > 0) {\r\n            valid = false;\r\n          }\r\n        })\r\n      }\r\n      return valid;\r\n    },\r\n    canSaveUserInfo() {\r\n      return this.itemCopy.phoneNumber &&\r\n          this.itemCopy.mail &&\r\n          (this.itemCopy.employee.pinfl ? this.globalRegexPinfl.test(this.itemCopy.employee.pinfl) : true) &&\r\n          this.globalRegexInn.test(this.itemCopy.employee.inn);\r\n    }\r\n  },\r\n  watch: {\r\n    // 'itemCopy.employee.dateOfBirth': {\r\n    //   async handler(newValue) {\r\n    //     if (newValue.length === 2 || newValue.length === 5) {\r\n    //       this.itemCopy.employee.dateOfBirth += \"-\";\r\n    //     }\r\n    //\r\n    //   }\r\n    // }\r\n  },\r\n  components: {\r\n    TemplateLogoComponent,\r\n    // Layout,\r\n    // PageHeader\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.user-full-name:hover .change-password-button {\r\n  opacity: 1;\r\n  margin-top: 25px;\r\n}\r\n\r\n.btn-circle {\r\n  width: 30px;\r\n  height: 30px;\r\n  padding: 6px 0px;\r\n  border-radius: 15px;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  line-height: 1.42857;\r\n}\r\n\r\n.btn-circle:hover {\r\n  background-color: #1808ec;\r\n  font-size: 13px;\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep.sidebar-chat {\r\n  .b-sidebar {\r\n    width: 100vw;\r\n    background: white;\r\n  }\r\n}\r\n\r\n::v-deep.avatar-edit-pencil {\r\n  width: 100%;\r\n  height: 100%;\r\n  transition: all 0.5s ease;\r\n  box-shadow: 5px 5px 5px #eee;\r\n  border-radius: 50px;\r\n  border: 3px solid white;\r\n  cursor: pointer;\r\n  /* background: #556ee6; */\r\n}\r\n\r\n::v-deep.avatar-container {\r\n  position: relative;\r\n  height: 5rem;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n::v-deep.avatar-container:hover .overlay {\r\n  opacity: 1 !important;\r\n}\r\n\r\n\r\n::v-deep.image {\r\n  display: block;\r\n  width: 5rem;\r\n  height: 5rem;\r\n}\r\n\r\n::v-deep.overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  height: 100%;\r\n  width: 5rem;\r\n  opacity: 0;\r\n  transition: 0.3s ease;\r\n}\r\n\r\n::v-deep.icon {\r\n  color: white;\r\n  font-size: 100px;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  -ms-transform: translate(-50%, -50%);\r\n  text-align: center;\r\n}\r\n\r\n::v-deep.fa-user:hover {\r\n  color: #eee;\r\n}\r\n</style>"]}]}